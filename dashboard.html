<!DOCTYPE html>
<html lang="en" id="htmlRoot">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
   <title id="pageTitle">CardGift - Admin Dashboard</title>
   
   <!-- PWA Meta tags -->
   <meta name="description" content="CardGift Admin Dashboard - Manage your network">
   <meta name="theme-color" content="#FFD700">
   
   <!-- Favicon fix -->
   <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÅ</text></svg>">
   
   <!-- ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Web3 Integration - SafePal Priority -->
   <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
   <script src="js/wallet-state.js"></script>
   
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       body {
           font-family: 'Arial', sans-serif;
           background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
           color: #FFFFFF;
           overflow-x: hidden;
           min-height: 100vh;
       }

       /* –ó–æ–ª–æ—Ç—ã–µ —á–∞—Å—Ç–∏—Ü—ã —Ñ–æ–Ω–∞ */
       body::before {
           content: '';
           position: fixed;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           background: radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.08) 0%, transparent 50%),
                       radial-gradient(circle at 80% 80%, rgba(255, 215, 0, 0.08) 0%, transparent 50%);
           pointer-events: none;
           z-index: -1;
       }

       /* –Ø–ó–´–ö–û–í–û–ô –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ */
       .language-switcher {
           position: fixed;
           top: 0px;
           right: 15px;
           z-index: 1000;
           display: flex;
           background: rgba(0, 0, 0, 0.9);
           border-radius: 15px;
           padding: 4px;
           backdrop-filter: blur(10px);
           border: 1px solid rgba(255, 215, 0, 0.3);
       }

       .lang-btn {
           background: transparent;
           border: none;
           color: #FFD700;
           padding: 6px 12px;
           border-radius: 10px;
           cursor: pointer;
           font-size: 12px;
           font-weight: bold;
           transition: all 0.3s ease;
           min-width: 35px;
       }

       .lang-btn.active {
           background: rgba(255, 215, 0, 0.3);
           color: #FFF;
       }

       /* SIDEBAR */
       .sidebar {
           position: fixed;
           left: 0;
           top: 0;
           width: 280px;
           height: 100vh;
           background: rgba(0, 0, 0, 0.95);
           backdrop-filter: blur(20px);
           border-right: 2px solid #FFD700;
           z-index: 100;
           overflow-y: auto;
           overflow-x: hidden;
           transition: transform 0.3s ease;
           scrollbar-width: thin;
           scrollbar-color: #FFD700 transparent;
       }

       .sidebar::-webkit-scrollbar {
           width: 4px;
       }

       .sidebar::-webkit-scrollbar-track {
           background: transparent;
       }

       .sidebar::-webkit-scrollbar-thumb {
           background: #FFD700;
           border-radius: 2px;
       }

       .sidebar.mobile-hidden {
           transform: translateX(-100%);
       }

       .sidebar-header {
           padding: 25px 20px;
           text-align: center;
           border-bottom: 1px solid rgba(255, 215, 0, 0.3);
       }

       .logo {
           font-size: 28px;
           background: linear-gradient(45deg, #FFD700, #FFA500);
           -webkit-background-clip: text;
           -webkit-text-fill-color: transparent;
           background-clip: text;
           font-weight: bold;
           margin-bottom: 8px;
       }

       .user-info {
           background: rgba(255, 215, 0, 0.1);
           border-radius: 10px;
           padding: 15px;
           margin-top: 15px;
       }

       .user-level {
           background: #FFD700;
           color: #000;
           padding: 4px 10px;
           border-radius: 15px;
           font-size: 11px;
           font-weight: bold;
           display: inline-block;
           margin-bottom: 8px;
       }

       .user-id {
           color: #CCC;
           font-size: 12px;
       }

       /* NOTIFICATION BADGE */
       .notification-badge {
           position: absolute;
           top: -8px;
           right: -8px;
           background: #FF4444;
           color: white;
           border-radius: 50%;
           width: 20px;
           height: 20px;
           font-size: 10px;
           display: flex;
           align-items: center;
           justify-content: center;
           font-weight: bold;
           animation: pulse 2s infinite;
       }

       .notification-badge.read {
           background: #4CAF50;
           animation: none;
       }

       .notification-badge.hidden {
           display: none;
       }

       @keyframes pulse {
           0% { transform: scale(1); }
           50% { transform: scale(1.1); }
           100% { transform: scale(1); }
       }

       /* MENU */
       .sidebar-menu {
           padding: 20px 0;
       }

       .menu-item {
           display: flex;
           align-items: center;
           padding: 15px 25px;
           color: #CCC;
           text-decoration: none;
           transition: all 0.3s ease;
           border-left: 3px solid transparent;
           cursor: pointer;
           position: relative;
       }

       .menu-item:hover {
           background: rgba(255, 215, 0, 0.1);
           color: #FFF;
       }

       .menu-item.active {
           background: rgba(255, 215, 0, 0.2);
           border-left-color: #FFD700;
           color: #FFD700;
       }

       .menu-item.locked {
           opacity: 0.4;
           cursor: not-allowed;
           position: relative;
       }

       .menu-item.locked::after {
           content: "üîí";
           position: absolute;
           right: 25px;
           font-size: 16px;
       }

       .menu-icon {
           width: 24px;
           margin-right: 15px;
           text-align: center;
           font-size: 18px;
       }

       /* MAIN CONTENT */
       .main-content {
           margin-left: 280px;
           padding: 30px;
           min-height: 100vh;
           transition: margin-left 0.3s ease;
       }

       .main-content.full-width {
           margin-left: 0;
       }

       /* MOBILE TOGGLE */
       .mobile-toggle {
           display: none;
           position: fixed;
           top: 15px;
           left: 15px;
           z-index: 1001;
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid #FFD700;
           border-radius: 10px;
           padding: 10px;
           cursor: pointer;
           color: #FFD700;
       }

       /* SECTION */
       .content-section {
           display: none;
           animation: fadeInUp 0.5s ease;
       }

       .content-section.active {
           display: block;
       }

       .section-header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           margin-bottom: 30px;
           flex-wrap: wrap;
           gap: 15px;
       }

       .section-title {
           font-size: 28px;
           color: #FFD700;
           font-weight: bold;
       }

       /* STATS CARDS */
       .stats-grid {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
           gap: 20px;
           margin-bottom: 30px;
       }

       .stat-card {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid #FFD700;
           border-radius: 15px;
           padding: 20px;
           text-align: center;
           transition: transform 0.3s ease;
       }

       .stat-card:hover {
           transform: translateY(-5px);
       }

       .stat-icon {
           font-size: 32px;
           margin-bottom: 10px;
       }

       .stat-number {
           font-size: 24px;
           font-weight: bold;
           color: #FFD700;
           margin-bottom: 5px;
       }

       .stat-label {
           color: #CCC;
           font-size: 14px;
       }

       /* CONTACT CATEGORIES */
       .contact-categories {
           display: grid;
           grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
           gap: 15px;
           margin-bottom: 30px;
       }

       .category-card {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(255, 215, 0, 0.3);
           border-radius: 12px;
           padding: 15px;
           text-align: center;
           transition: all 0.3s ease;
           cursor: pointer;
       }

       .category-card:hover {
           border-color: #FFD700;
           background: rgba(255, 215, 0, 0.05);
       }

       .category-card.selected {
           border-color: #FFD700;
           background: rgba(255, 215, 0, 0.1);
       }

       .category-icon {
           font-size: 24px;
           margin-bottom: 8px;
       }

       .category-name {
           font-weight: bold;
           margin-bottom: 5px;
       }

       .category-count {
           color: #FFD700;
           font-size: 18px;
           font-weight: bold;
       }

       /* REFERRAL SYSTEM */
       .referral-section {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(255, 215, 0, 0.3);
           border-radius: 15px;
           padding: 25px;
           margin-bottom: 30px;
       }

       /* ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï LEVEL BUTTONS - —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */
       .level-buttons {
           display: flex;
           gap: 10px;
           margin-bottom: 20px;
           overflow-x: auto;
           overflow-y: hidden;
           scrollbar-width: none;
           -ms-overflow-style: none;
           padding: 5px 0;
           justify-content: flex-start;
       }

       .level-buttons::-webkit-scrollbar {
           display: none;
       }

       .level-btn {
           background: rgba(255, 215, 0, 0.1);
           border: 2px solid #FFD700;
           color: #FFD700;
           border-radius: 50%;
           width: 50px;
           height: 50px;
           min-width: 50px;
           display: flex;
           align-items: center;
           justify-content: center;
           font-weight: bold;
           cursor: pointer;
           transition: all 0.3s ease;
           position: relative;
           flex-shrink: 0;
       }

       .level-btn:hover {
           background: rgba(255, 215, 0, 0.2);
           transform: scale(1.1);
       }

       .level-btn.active {
           background: #FFD700;
           color: #000;
       }

       .level-btn.locked {
           opacity: 0.3;
           cursor: not-allowed;
       }

       .level-btn.locked::after {
           content: "üîí";
           position: absolute;
           top: -5px;
           right: -5px;
           font-size: 12px;
       }

       /* LEVEL CONTENT */
       .level-content {
           background: rgba(255, 255, 255, 0.05);
           border-radius: 10px;
           padding: 20px;
           margin-top: 20px;
           display: none;
       }

       .level-content.active {
           display: block;
       }

       .level-header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           margin-bottom: 15px;
           flex-wrap: wrap;
       }

       .level-title {
           color: #FFD700;
           font-weight: bold;
           font-size: 18px;
       }

       .level-count {
           background: rgba(255, 215, 0, 0.2);
           color: #FFD700;
           padding: 4px 12px;
           border-radius: 15px;
           font-size: 12px;
           font-weight: bold;
       }

       /* ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø TEAM TABLE - —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */
       .team-table {
           overflow-x: auto;
           overflow-y: hidden;
           scrollbar-width: thin;
           scrollbar-color: #FFD700 transparent;
           border-radius: 10px;
           border: 1px solid rgba(255, 215, 0, 0.2);
       }

       .team-table::-webkit-scrollbar {
           height: 6px;
       }

       .team-table::-webkit-scrollbar-track {
           background: rgba(255, 215, 0, 0.1);
           border-radius: 3px;
       }

       .team-table::-webkit-scrollbar-thumb {
           background: #FFD700;
           border-radius: 3px;
       }

       .team-table table {
           width: 100%;
           border-collapse: collapse;
           min-width: 700px;
       }

       .team-table th {
           background: rgba(255, 215, 0, 0.1);
           color: #FFD700;
           padding: 12px 8px;
           text-align: left;
           border-bottom: 2px solid #FFD700;
           font-size: 14px;
           white-space: nowrap;
           position: sticky;
           top: 0;
           z-index: 10;
       }

       .team-table td {
           padding: 10px 8px;
           border-bottom: 1px solid rgba(255, 215, 0, 0.2);
           color: #FFF;
           font-size: 13px;
           white-space: nowrap;
       }

       .team-table tr:hover {
           background: rgba(255, 215, 0, 0.05);
       }

       .user-id-cell {
           color: #4CAF50;
           font-weight: bold;
           cursor: pointer;
           transition: color 0.3s ease;
       }

       .user-id-cell:hover {
           color: #FFD700;
       }

       .wallet-status {
           padding: 2px 6px;
           border-radius: 10px;
           font-size: 10px;
           font-weight: bold;
       }

       .wallet-active {
           background: rgba(76, 175, 80, 0.3);
           color: #4CAF50;
       }

       .wallet-inactive {
           background: rgba(128, 128, 128, 0.3);
           color: #888;
       }

       .status-badge {
           padding: 3px 8px;
           border-radius: 12px;
           font-size: 10px;
           font-weight: bold;
       }

       .status-coauthor {
           background: rgba(139, 69, 19, 0.3);
           color: #D2691E;
       }

       .status-super {
           background: rgba(255, 215, 0, 0.3);
           color: #FFD700;
       }

       .status-mini {
           background: rgba(255, 193, 7, 0.3);
           color: #FFC107;
       }

       .status-basic {
           background: rgba(128, 128, 128, 0.3);
           color: #CCC;
       }

       /* ‚úÖ –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ê–†–•–ò–í–ê */
       .cards-grid {
           display: grid;
           grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
           gap: 20px;
           margin-bottom: 30px;
       }

       .archive-card {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(255, 215, 0, 0.3);
           border-radius: 15px;
           overflow: hidden;
           transition: all 0.3s ease;
           cursor: pointer;
       }

       .archive-card:hover {
           transform: translateY(-5px);
           border-color: #FFD700;
           box-shadow: 0 10px 25px rgba(255, 215, 0, 0.2);
       }

       .card-preview {
           position: relative;
           width: 100%;
           height: 160px;
           overflow: hidden;
       }

       .card-preview img {
           width: 100%;
           height: 100%;
           object-fit: cover;
       }

       .card-overlay {
           position: absolute;
           top: 0;
           left: 0;
           right: 0;
           bottom: 0;
           background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.7));
           display: flex;
           align-items: flex-end;
           padding: 15px;
       }

       .card-stats {
           display: flex;
           gap: 15px;
           color: white;
           font-size: 12px;
           font-weight: bold;
       }

       .card-info {
           padding: 15px;
       }

       .card-title {
           color: #FFD700;
           font-size: 16px;
           font-weight: bold;
           margin-bottom: 10px;
           overflow: hidden;
           text-overflow: ellipsis;
           white-space: nowrap;
       }

       .card-actions {
           display: flex;
           gap: 8px;
           justify-content: space-between;
       }

       .card-action-btn {
           background: rgba(255, 255, 255, 0.1);
           border: 1px solid rgba(255, 215, 0, 0.5);
           color: #FFD700;
           border-radius: 6px;
           padding: 6px 10px;
           cursor: pointer;
           font-size: 12px;
           transition: all 0.3s ease;
           flex: 1;
           text-align: center;
       }

       .card-action-btn:hover {
           background: rgba(255, 215, 0, 0.2);
           border-color: #FFD700;
       }

       .upgrade-btn {
           animation: pulse 2s infinite;
       }

       .archive-controls {
           display: flex;
           justify-content: space-between;
           align-items: center;
           flex-wrap: wrap;
           gap: 15px;
       }

       .archive-limits {
           color: #CCC;
           font-size: 14px;
       }

       .archive-actions {
           display: flex;
           gap: 10px;
       }

       /* ‚úÖ –°–¢–ò–õ–ò –î–õ–Ø –ë–õ–û–ì–ê */
       .post-item {
           background: rgba(0,0,0,0.9);
           border: 1px solid rgba(255,215,0,0.3);
           border-radius: 12px;
           padding: 20px;
           margin-bottom: 15px;
           transition: all 0.3s ease;
       }

       .post-item:hover {
           border-color: #FFD700;
           background: rgba(255,215,0,0.05);
       }

       /* ‚úÖ –°–¢–ò–õ–ò –î–õ–Ø –û–ü–†–û–°–û–í */
       .survey-card {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(33, 150, 243, 0.3);
           border-radius: 15px;
           padding: 20px;
           margin-bottom: 15px;
           transition: all 0.3s ease;
       }

       .survey-card:hover {
           border-color: #2196F3;
           background: rgba(33, 150, 243, 0.05);
       }

       .survey-title {
           color: #2196F3;
           font-size: 18px;
           font-weight: bold;
           margin-bottom: 10px;
       }

       .survey-stats {
           display: flex;
           gap: 20px;
           margin-top: 15px;
           font-size: 12px;
           color: #CCC;
       }

       .survey-option {
           background: rgba(255, 255, 255, 0.1);
           border: 2px solid rgba(33, 150, 243, 0.3);
           border-radius: 8px;
           padding: 10px 15px;
           margin: 5px 0;
           cursor: pointer;
           transition: all 0.3s ease;
           display: flex;
           justify-content: space-between;
           align-items: center;
       }

       .survey-option:hover {
           border-color: #2196F3;
           background: rgba(33, 150, 243, 0.1);
       }

       .survey-option.selected {
           border-color: #2196F3;
           background: rgba(33, 150, 243, 0.2);
       }

       .survey-progress-bar {
           height: 4px;
           background: rgba(33, 150, 243, 0.3);
           border-radius: 2px;
           margin-top: 10px;
           overflow: hidden;
       }

       .survey-progress-fill {
           height: 100%;
           background: #2196F3;
           transition: width 0.3s ease;
       }

       /* ‚úÖ –°–¢–ò–õ–ò –î–õ–Ø –ö–û–ù–¢–ê–ö–¢–û–í –ò –ü–û–ò–°–ö–ê */
       .contacts-search-section {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(255, 215, 0, 0.3);
           border-radius: 15px;
           padding: 20px;
           margin-bottom: 20px;
       }

       .search-filters {
           display: flex;
           gap: 10px;
           flex-wrap: wrap;
           align-items: center;
           margin-bottom: 15px;
       }

       .search-input {
           flex: 1;
           min-width: 200px;
           background: rgba(255, 255, 255, 0.1);
           border: 1px solid #FFD700;
           border-radius: 8px;
           padding: 8px 12px;
           color: #FFF;
           font-size: 14px;
       }

       .search-input:focus {
           outline: none;
           box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
       }

       .search-select {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid #FFD700;
           color: #FFD700;
           min-width: 150px;
           padding: 8px 12px;
           border-radius: 8px;
           font-size: 14px;
       }

       .search-btn {
           background: #FFD700;
           color: #000;
           border: none;
           border-radius: 8px;
           padding: 8px 16px;
           cursor: pointer;
           font-weight: bold;
           transition: all 0.3s ease;
       }

       .search-btn:hover {
           background: #FFA500;
           transform: translateY(-2px);
       }

       .clear-btn {
           background: rgba(255, 68, 68, 0.2);
           color: #FF4444;
           border: 1px solid #FF4444;
           border-radius: 8px;
           padding: 8px 16px;
           cursor: pointer;
           transition: all 0.3s ease;
       }

       .clear-btn:hover {
           background: rgba(255, 68, 68, 0.3);
       }

       .contacts-table-section {
           background: rgba(0, 0, 0, 0.9);
           border: 1px solid rgba(255, 215, 0, 0.3);
           border-radius: 15px;
           padding: 20px;
           margin-bottom: 20px;
       }

       .contacts-table {
           overflow-x: auto;
           overflow-y: hidden;
           scrollbar-width: thin;
           scrollbar-color: #FFD700 transparent;
           border-radius: 10px;
           border: 1px solid rgba(255, 215, 0, 0.2);
           max-height: 600px;
           overflow-y: auto;
       }

       .contacts-table::-webkit-scrollbar {
           width: 6px;
           height: 6px;
       }

       .contacts-table::-webkit-scrollbar-track {
           background: rgba(255, 215, 0, 0.1);
           border-radius: 3px;
       }

       .contacts-table::-webkit-scrollbar-thumb {
           background: #FFD700;
           border-radius: 3px;
       }

       .contacts-table table {
           width: 100%;
           border-collapse: collapse;
           min-width: 900px;
       }

       .contacts-table th {
           background: rgba(255, 215, 0, 0.1);
           color: #FFD700;
           padding: 12px 8px;
           text-align: left;
           border-bottom: 2px solid #FFD700;
           font-size: 14px;
           white-space: nowrap;
           position: sticky;
           top: 0;
           z-index: 10;
       }

       .contacts-table td {
           padding: 10px 8px;
           border-bottom: 1px solid rgba(255, 215, 0, 0.2);
           color: #FFF;
           font-size: 13px;
           white-space: nowrap;
       }

       .contacts-table tr:hover {
           background: rgba(255, 215, 0, 0.05);
       }

       .contact-platform-badge {
           background: rgba(33, 150, 243, 0.2);
           color: #2196F3;
           padding: 2px 8px;
           border-radius: 10px;
           font-size: 10px;
           font-weight: bold;
       }

       .contact-platform-badge.telegram {
           background: rgba(54, 135, 203, 0.2);
           color: #3687CB;
       }

       .contact-platform-badge.whatsapp {
           background: rgba(37, 211, 102, 0.2);
           color: #25D366;
       }

       .contact-platform-badge.email {
           background: rgba(234, 67, 53, 0.2);
           color: #EA4335;
       }

       .contact-platform-badge.instagram {
           background: rgba(225, 48, 108, 0.2);
           color: #E1306C;
       }

       .contact-platform-badge.facebook {
           background: rgba(24, 119, 242, 0.2);
           color: #1877F2;
       }

       .contact-platform-badge.tiktok {
           background: rgba(254, 44, 85, 0.2);
           color: #FE2C55;
       }

       .contact-platform-badge.twitter {
           background: rgba(29, 161, 242, 0.2);
           color: #1DA1F2;
       }

       .contact-platform-badge.viber {
           background: rgba(103, 58, 183, 0.2);
           color: #673AB7;
       }

       .contact-consent-badge {
           padding: 2px 8px;
           border-radius: 10px;
           font-size: 10px;
           font-weight: bold;
       }

       .consent-yes {
           background: rgba(76, 175, 80, 0.2);
           color: #4CAF50;
       }

       .consent-no {
           background: rgba(244, 67, 54, 0.2);
           color: #F44336;
       }

       .contact-action-btn {
           background: rgba(255, 255, 255, 0.1);
           border: 1px solid rgba(255, 215, 0, 0.5);
           color: #FFD700;
           border-radius: 4px;
           padding: 4px 8px;
           cursor: pointer;
           font-size: 11px;
           transition: all 0.3s ease;
           margin: 2px;
       }

       .contact-action-btn:hover {
           background: rgba(255, 215, 0, 0.2);
           border-color: #FFD700;
       }

       .contact-action-btn.chat {
          background: rgba(33, 150, 243, 0.2);
          border-color: #2196F3;
          color: #2196F3;
      }

      .contact-action-btn.push {
          background: rgba(76, 175, 80, 0.2);
          border-color: #4CAF50;
          color: #4CAF50;
      }

      .contact-action-btn.delete {
          background: rgba(244, 67, 54, 0.2);
          border-color: #F44336;
          color: #F44336;
      }

      /* API INTEGRATION SECTION */
      .api-integration-section {
          background: rgba(0, 0, 0, 0.9);
          border: 1px solid rgba(33, 150, 243, 0.3);
          border-radius: 15px;
          padding: 25px;
          margin-bottom: 30px;
      }

      .api-card {
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(33, 150, 243, 0.2);
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 15px;
          transition: all 0.3s ease;
      }

      .api-card:hover {
          border-color: #2196F3;
          background: rgba(33, 150, 243, 0.05);
      }

      .api-card h4 {
          color: #2196F3;
          margin-bottom: 15px;
          display: flex;
          align-items: center;
          gap: 10px;
      }

      .api-input {
          width: 100%;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(33, 150, 243, 0.3);
          border-radius: 8px;
          padding: 10px 12px;
          color: #FFF;
          font-size: 14px;
          margin-bottom: 10px;
          font-family: monospace;
      }

      .api-input:focus {
          outline: none;
          border-color: #2196F3;
          box-shadow: 0 0 10px rgba(33, 150, 243, 0.3);
      }

      .api-status {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 12px;
          margin-top: 10px;
      }

      .api-status.connected {
          color: #4CAF50;
      }

      .api-status.disconnected {
          color: #F44336;
      }

      .api-test-btn {
          background: rgba(33, 150, 243, 0.2);
          border: 1px solid #2196F3;
          color: #2196F3;
          border-radius: 8px;
          padding: 8px 15px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.3s ease;
          margin-right: 10px;
      }

      .api-test-btn:hover {
          background: rgba(33, 150, 243, 0.3);
      }

      .api-save-btn {
          background: #4CAF50;
          border: none;
          color: white;
          border-radius: 8px;
          padding: 8px 15px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.3s ease;
      }

      .api-save-btn:hover {
          background: #45a049;
      }

      /* PUSH NOTIFICATIONS SECTION */
      .push-section {
          background: rgba(0, 0, 0, 0.9);
          border: 1px solid rgba(76, 175, 80, 0.3);
          border-radius: 15px;
          padding: 25px;
          margin-bottom: 30px;
      }

      .push-limits {
          background: rgba(255, 152, 0, 0.1);
          border: 1px solid rgba(255, 152, 0, 0.3);
          border-radius: 12px;
          padding: 15px;
          margin-bottom: 20px;
          color: #FF9800;
          font-size: 14px;
      }

      .push-composer {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 20px;
      }

      .target-selection {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 15px;
          margin-bottom: 20px;
      }

      .target-card {
          background: rgba(255, 255, 255, 0.1);
          border: 2px solid rgba(76, 175, 80, 0.3);
          border-radius: 10px;
          padding: 15px;
          text-align: center;
          cursor: pointer;
          transition: all 0.3s ease;
      }

      .target-card:hover {
          border-color: #4CAF50;
          background: rgba(76, 175, 80, 0.1);
      }

      .target-card.selected {
          border-color: #4CAF50;
          background: rgba(76, 175, 80, 0.2);
      }

      .target-icon {
          font-size: 24px;
          margin-bottom: 8px;
      }

      .target-name {
          font-weight: bold;
          margin-bottom: 5px;
          color: #FFF;
      }

      .target-count {
          color: #4CAF50;
          font-size: 12px;
      }

      .custom-groups-section {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 12px;
          padding: 20px;
          margin-bottom: 20px;
      }

      .group-create-form {
          display: flex;
          gap: 10px;
          align-items: center;
          flex-wrap: wrap;
          margin-bottom: 15px;
      }

      .group-name-input {
          flex: 1;
          min-width: 200px;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(76, 175, 80, 0.3);
          border-radius: 8px;
          padding: 8px 12px;
          color: #FFF;
          font-size: 14px;
      }

      .group-create-btn {
          background: #4CAF50;
          border: none;
          color: white;
          border-radius: 8px;
          padding: 8px 15px;
          cursor: pointer;
          font-size: 14px;
          transition: all 0.3s ease;
      }

      .group-create-btn:hover {
          background: #45a049;
      }

      .custom-groups-list {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 15px;
      }

      .custom-group-card {
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(76, 175, 80, 0.3);
          border-radius: 10px;
          padding: 15px;
          cursor: pointer;
          transition: all 0.3s ease;
      }

      .custom-group-card:hover {
          border-color: #4CAF50;
          background: rgba(76, 175, 80, 0.1);
      }

      .custom-group-card.selected {
          border-color: #4CAF50;
          background: rgba(76, 175, 80, 0.2);
      }

      .group-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
      }

      .group-name {
          color: #4CAF50;
          font-weight: bold;
      }

      .group-delete-btn {
          background: rgba(244, 67, 54, 0.2);
          border: 1px solid #F44336;
          color: #F44336;
          border-radius: 4px;
          padding: 4px 8px;
          cursor: pointer;
          font-size: 11px;
          transition: all 0.3s ease;
      }

      .group-delete-btn:hover {
          background: rgba(244, 67, 54, 0.3);
      }

      .message-composer {
          margin-bottom: 20px;
      }

      .message-textarea {
          width: 100%;
          min-height: 120px;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(76, 175, 80, 0.3);
          border-radius: 12px;
          padding: 15px;
          color: #FFF;
          font-size: 14px;
          resize: vertical;
          font-family: inherit;
          line-height: 1.5;
      }

      .message-textarea:focus {
          outline: none;
          border-color: #4CAF50;
          box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
      }

      .message-char-count {
          text-align: right;
          color: #888;
          font-size: 12px;
          margin-top: 5px;
      }

      .send-push-btn {
          background: linear-gradient(45deg, #4CAF50, #45a049);
          color: white;
          border: none;
          border-radius: 12px;
          padding: 15px 30px;
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.3s ease;
          width: 100%;
      }

      .send-push-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      }

      .send-push-btn:disabled {
          background: #666;
          cursor: not-allowed;
          transform: none;
          box-shadow: none;
      }

      /* IMPORT/EXPORT SECTION */
      .import-export-section {
          background: rgba(0, 0, 0, 0.9);
          border: 1px solid rgba(156, 39, 176, 0.3);
          border-radius: 15px;
          padding: 25px;
          margin-bottom: 30px;
      }

      .import-export-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;
      }

      .import-card,
      .export-card {
          background: rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(156, 39, 176, 0.2);
          border-radius: 12px;
          padding: 20px;
          text-align: center;
      }

      .import-export-icon {
          font-size: 48px;
          margin-bottom: 15px;
          color: #9C27B0;
      }

      .import-export-title {
          color: #9C27B0;
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 10px;
      }

      .import-export-desc {
          color: #CCC;
          font-size: 14px;
          margin-bottom: 20px;
          line-height: 1.5;
      }

      .file-input {
          display: none;
      }

      .file-input-label {
          background: rgba(156, 39, 176, 0.2);
          border: 2px solid #9C27B0;
          color: #9C27B0;
          border-radius: 10px;
          padding: 12px 20px;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s ease;
          display: inline-block;
          margin-bottom: 10px;
      }

      .file-input-label:hover {
          background: rgba(156, 39, 176, 0.3);
          transform: translateY(-2px);
      }

      .export-btn {
          background: #9C27B0;
          border: none;
          color: white;
          border-radius: 10px;
          padding: 12px 20px;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s ease;
      }

      .export-btn:hover {
          background: #7B1FA2;
          transform: translateY(-2px);
      }

      .supported-formats {
          color: #888;
          font-size: 12px;
          margin-top: 10px;
      }

      /* ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô CRM MODAL - –ù–û–í–´–ô –î–ò–ó–ê–ô–ù */
      .crm-modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.9);
          z-index: 2000;
          display: none;
          align-items: center;
          justify-content: center;
          padding: 20px;
          backdrop-filter: blur(10px);
      }

      .crm-modal.show {
          display: flex;
      }

      .crm-modal-content {
          background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(26, 26, 26, 0.95) 100%);
          border: 2px solid #FFD700;
          border-radius: 20px;
          padding: 30px;
          max-width: 600px;
          width: 100%;
          max-height: 80vh;
          overflow-y: auto;
          box-shadow: 0 20px 40px rgba(255, 215, 0, 0.3);
          backdrop-filter: blur(20px);
      }

      .crm-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 25px;
          padding-bottom: 15px;
          border-bottom: 2px solid rgba(255, 215, 0, 0.3);
      }

      .crm-title {
          color: #FFD700;
          font-size: 24px;
          font-weight: bold;
          background: linear-gradient(45deg, #FFD700, #FFA500);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
      }

      .close-btn {
          background: rgba(255, 68, 68, 0.2);
          border: 2px solid #FF4444;
          color: #FF4444;
          border-radius: 50%;
          width: 40px;
          height: 40px;
          font-size: 20px;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .close-btn:hover {
          background: rgba(255, 68, 68, 0.3);
          transform: scale(1.1);
      }

      .crm-tabs {
          display: flex;
          gap: 10px;
          margin-bottom: 25px;
          overflow-x: auto;
          scrollbar-width: none;
          -ms-overflow-style: none;
          padding: 5px 0;
      }

      .crm-tabs::-webkit-scrollbar {
          display: none;
      }

      .crm-tab {
          background: rgba(255, 255, 255, 0.1);
          border: 2px solid rgba(255, 215, 0, 0.3);
          color: #FFD700;
          padding: 12px 20px;
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
          white-space: nowrap;
          flex-shrink: 0;
          font-weight: bold;
      }

      .crm-tab.active {
          background: linear-gradient(45deg, #FFD700, #FFA500);
          color: #000;
          border-color: #FFD700;
          box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
      }

      .crm-tab:hover:not(.active) {
          background: rgba(255, 215, 0, 0.2);
          border-color: #FFD700;
      }

      .crm-content {
          display: none;
          animation: fadeInUp 0.3s ease;
      }

      .crm-content.active {
          display: block;
      }

      .notes-textarea {
          width: 100%;
          min-height: 150px;
          background: rgba(255, 255, 255, 0.1);
          border: 2px solid rgba(255, 215, 0, 0.3);
          border-radius: 12px;
          padding: 15px;
          color: #FFF;
          resize: vertical;
          font-family: inherit;
          font-size: 14px;
          line-height: 1.5;
          transition: border-color 0.3s ease;
      }

      .notes-textarea:focus {
          outline: none;
          border-color: #FFD700;
          box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
      }

      .notes-textarea::placeholder {
          color: #888;
      }

      .save-btn {
          background: linear-gradient(45deg, #4CAF50, #45a049);
          color: white;
          border: none;
          border-radius: 12px;
          padding: 12px 25px;
          cursor: pointer;
          margin-top: 15px;
          transition: all 0.3s ease;
          font-weight: bold;
          font-size: 14px;
      }

      .save-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      }

      /* CHAT SECTION */
      .chat-container {
          border: 2px solid rgba(255, 215, 0, 0.3);
          border-radius: 12px;
          height: 350px;
          display: flex;
          flex-direction: column;
          overflow: hidden;
      }

      .chat-messages {
          flex: 1;
          padding: 20px;
          overflow-y: auto;
          background: rgba(255, 255, 255, 0.05);
          scrollbar-width: thin;
          scrollbar-color: #FFD700 transparent;
      }

      .chat-messages::-webkit-scrollbar {
          width: 6px;
      }

      .chat-messages::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.1);
      }

      .chat-messages::-webkit-scrollbar-thumb {
          background: #FFD700;
          border-radius: 3px;
      }

      .chat-message {
          background: rgba(255, 215, 0, 0.1);
          border: 1px solid rgba(255, 215, 0, 0.3);
          border-radius: 12px;
          padding: 12px;
          margin-bottom: 10px;
          animation: slideInRight 0.3s ease;
      }

      .chat-message-time {
          font-size: 11px;
          color: #888;
          margin-bottom: 5px;
      }

      .chat-message-text {
          color: #FFF;
          line-height: 1.4;
      }

      .chat-input-area {
          padding: 15px;
          border-top: 2px solid rgba(255, 215, 0, 0.3);
          display: flex;
          gap: 10px;
          background: rgba(0, 0, 0, 0.3);
      }

      .chat-input {
         flex: 1;
         background: rgba(255, 255, 255, 0.1);
         border: 2px solid rgba(255, 215, 0, 0.3);
         border-radius: 12px;
         padding: 12px 15px;
         color: #FFF;
         font-size: 14px;
         transition: border-color 0.3s ease;
     }

     .chat-input:focus {
         outline: none;
         border-color: #FFD700;
         box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
     }

     .chat-input::placeholder {
         color: #888;
     }

     .chat-send-btn {
         background: linear-gradient(45deg, #FFD700, #FFA500);
         color: #000;
         border: none;
         border-radius: 12px;
         padding: 12px 20px;
         cursor: pointer;
         font-weight: bold;
         transition: all 0.3s ease;
     }

     .chat-send-btn:hover {
         transform: scale(1.05);
         box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
     }

     /* ‚úÖ WALLET SECTION */
     .wallet-section {
         background: rgba(0, 0, 0, 0.9);
         border: 1px solid rgba(255, 215, 0, 0.3);
         border-radius: 15px;
         padding: 25px;
         margin-bottom: 20px;
     }

     .wallet-connect-btn {
         background: linear-gradient(45deg, #FFD700, #FFA500);
         color: #000;
         border: none;
         border-radius: 12px;
         padding: 15px 30px;
         font-size: 16px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
         margin-right: 15px;
         margin-bottom: 10px;
     }

     .wallet-connect-btn:hover {
         transform: translateY(-2px);
         box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
     }

     .activation-buttons {
         display: grid;
         grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
         gap: 15px;
         margin-top: 20px;
     }

     .activation-btn {
         background: linear-gradient(45deg, #4CAF50, #45a049);
         color: white;
         border: none;
         border-radius: 12px;
         padding: 15px 20px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
         text-align: center;
         position: relative;
         overflow: hidden;
     }

     .activation-btn:hover {
         transform: translateY(-3px);
         box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
     }

     .activation-btn:disabled {
         opacity: 0.5;
         cursor: not-allowed;
         transform: none;
         box-shadow: none;
     }

     .activation-btn.mini-admin {
         background: linear-gradient(45deg, #FF9800, #F57C00);
     }

     .activation-btn.super-admin {
         background: linear-gradient(45deg, #9C27B0, #7B1FA2);
     }

     .activation-btn.mini-admin:hover {
         box-shadow: 0 10px 25px rgba(255, 152, 0, 0.4);
     }

     .activation-btn.super-admin:hover {
         box-shadow: 0 10px 25px rgba(156, 39, 176, 0.4);
     }

     /* ‚úÖ NOTIFICATION SYSTEM */
     .notification {
         position: fixed;
         top: 20px;
         right: 20px;
         background: rgba(0, 0, 0, 0.95);
         border: 2px solid #FFD700;
         border-radius: 12px;
         padding: 15px 20px;
         color: #FFF;
         z-index: 10000;
         transform: translateX(400px);
         transition: all 0.3s ease;
         backdrop-filter: blur(10px);
         max-width: 350px;
         box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
     }

     .notification.show {
         transform: translateX(0);
     }

     .notification.success {
         border-color: #4CAF50;
         background: rgba(76, 175, 80, 0.1);
     }

     .notification.error {
         border-color: #F44336;
         background: rgba(244, 67, 54, 0.1);
     }

     .notification.info {
         border-color: #2196F3;
         background: rgba(33, 150, 243, 0.1);
     }

     .notification.warning {
         border-color: #FF9800;
         background: rgba(255, 152, 0, 0.1);
     }

     /* ‚úÖ FORM ELEMENTS */
     .form-group {
         margin-bottom: 20px;
     }

     .form-label {
         display: block;
         color: #FFD700;
         margin-bottom: 8px;
         font-weight: bold;
         font-size: 14px;
     }

     .form-input, .form-textarea, .form-select {
         width: 100%;
         background: rgba(255, 255, 255, 0.1);
         border: 2px solid rgba(255, 215, 0, 0.3);
         border-radius: 8px;
         padding: 12px;
         color: #FFF;
         font-size: 14px;
         transition: all 0.3s ease;
     }

     .form-input:focus, .form-textarea:focus, .form-select:focus {
         outline: none;
         border-color: #FFD700;
         box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
     }

     .form-input::placeholder, .form-textarea::placeholder {
         color: #888;
     }

     .form-textarea {
         min-height: 100px;
         resize: vertical;
     }

     .form-select {
         background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23FFD700' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
         background-position: right 12px center;
         background-repeat: no-repeat;
         background-size: 16px;
         padding-right: 40px;
         cursor: pointer;
     }

     .form-checkbox {
         display: flex;
         align-items: center;
         gap: 10px;
         margin-bottom: 15px;
     }

     .form-checkbox input[type="checkbox"] {
         width: 18px;
         height: 18px;
         accent-color: #FFD700;
     }

     /* ‚úÖ BUTTON STYLES */
     .btn-primary {
         background: linear-gradient(45deg, #FFD700, #FFA500);
         color: #000;
         border: none;
         border-radius: 8px;
         padding: 12px 24px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
         display: inline-flex;
         align-items: center;
         gap: 8px;
     }

     .btn-primary:hover {
         transform: translateY(-2px);
         box-shadow: 0 8px 20px rgba(255, 215, 0, 0.4);
     }

     .btn-secondary {
         background: rgba(255, 255, 255, 0.1);
         color: #FFD700;
         border: 2px solid #FFD700;
         border-radius: 8px;
         padding: 12px 24px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
         display: inline-flex;
         align-items: center;
         gap: 8px;
     }

     .btn-secondary:hover {
         background: rgba(255, 215, 0, 0.2);
         transform: translateY(-2px);
     }

     .btn-danger {
         background: rgba(255, 68, 68, 0.2);
         color: #FF4444;
         border: 2px solid #FF4444;
         border-radius: 8px;
         padding: 12px 24px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
     }

     .btn-danger:hover {
         background: rgba(255, 68, 68, 0.3);
         transform: translateY(-2px);
     }

     .btn-success {
         background: linear-gradient(45deg, #4CAF50, #45a049);
         color: white;
         border: none;
         border-radius: 8px;
         padding: 12px 24px;
         font-weight: bold;
         cursor: pointer;
         transition: all 0.3s ease;
     }

     .btn-success:hover {
         transform: translateY(-2px);
         box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
     }

     /* ‚úÖ LOADING STATES */
     .loading {
         display: inline-block;
         width: 20px;
         height: 20px;
         border: 3px solid rgba(255, 255, 255, 0.3);
         border-radius: 50%;
         border-top-color: #FFD700;
         animation: spin 1s ease-in-out infinite;
     }

     @keyframes spin {
         to { transform: rotate(360deg); }
     }

     .skeleton {
         background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
         background-size: 200% 100%;
         animation: loading 1.5s infinite;
         border-radius: 4px;
     }

     @keyframes loading {
         0% { background-position: 200% 0; }
         100% { background-position: -200% 0; }
     }

     /* ‚úÖ ANIMATIONS */
     @keyframes fadeInUp {
         from {
             opacity: 0;
             transform: translateY(30px);
         }
         to {
             opacity: 1;
             transform: translateY(0);
         }
     }

     @keyframes slideInRight {
         from {
             opacity: 0;
             transform: translateX(30px);
         }
         to {
             opacity: 1;
             transform: translateX(0);
         }
     }

     @keyframes slideInLeft {
         from {
             opacity: 0;
             transform: translateX(-30px);
         }
         to {
             opacity: 1;
             transform: translateX(0);
         }
     }

     @keyframes bounceIn {
         0% {
             opacity: 0;
             transform: scale(0.3);
         }
         50% {
             opacity: 1;
             transform: scale(1.05);
         }
         70% {
             transform: scale(0.9);
         }
         100% {
             opacity: 1;
             transform: scale(1);
         }
     }

     /* ‚úÖ RESPONSIVE DESIGN */
     @media (max-width: 1200px) {
         .stats-grid {
             grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
         }
         
         .activation-buttons {
             grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
         }

         .target-selection {
             grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
         }

         .import-export-grid {
             grid-template-columns: 1fr;
         }
     }

     @media (max-width: 768px) {
         .mobile-toggle {
             display: block;
         }

         .sidebar {
             transform: translateX(-100%);
         }

         .sidebar.mobile-show {
             transform: translateX(0);
         }

         .main-content {
             margin-left: 0;
             padding: 20px 15px;
         }

         .language-switcher {
             top: 10px;
             right: 60px;
         }

         .section-header {
             flex-direction: column;
             align-items: flex-start;
             gap: 10px;
         }

         .section-title {
             font-size: 22px;
         }

         .stats-grid {
             grid-template-columns: 1fr;
             gap: 15px;
         }

         .contact-categories {
             grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
         }

         .level-buttons {
             justify-content: flex-start;
             gap: 8px;
         }

         .level-btn {
             width: 40px;
             height: 40px;
             min-width: 40px;
             font-size: 12px;
         }

         .team-table {
             font-size: 12px;
         }

         .team-table th,
         .team-table td {
             padding: 8px 6px;
         }

         .contacts-table {
             font-size: 12px;
         }

         .contacts-table th,
         .contacts-table td {
             padding: 8px 6px;
         }

         .search-filters {
             flex-direction: column;
             gap: 15px;
         }

         .search-input {
             min-width: 100%;
         }

         .crm-modal-content {
             padding: 20px;
             margin: 10px;
         }

         .crm-title {
             font-size: 20px;
         }

         .activation-buttons {
             grid-template-columns: 1fr;
         }

         .cards-grid {
             grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
             gap: 15px;
         }

         .archive-controls {
             flex-direction: column;
             align-items: stretch;
         }

         .archive-actions {
             justify-content: center;
         }

         .notification {
             top: 10px;
             right: 10px;
             left: 10px;
             max-width: none;
             transform: translateY(-100px);
         }

         .notification.show {
             transform: translateY(0);
         }

         .target-selection {
             grid-template-columns: 1fr;
         }

         .custom-groups-list {
             grid-template-columns: 1fr;
         }

         .api-card {
             padding: 15px;
         }
     }

     @media (max-width: 480px) {
         .section-title {
             font-size: 20px;
         }

         .stat-card {
             padding: 15px;
         }

         .stat-number {
             font-size: 20px;
         }

         .referral-section {
             padding: 15px;
         }

         .level-content {
             padding: 15px;
         }

         .crm-modal-content {
             padding: 15px;
         }

         .wallet-connect-btn {
             width: 100%;
             margin-bottom: 15px;
         }

         .form-input, .form-textarea, .form-select {
             padding: 10px;
         }

         .contacts-search-section,
         .contacts-table-section,
         .api-integration-section,
         .push-section,
         .import-export-section {
             padding: 15px;
         }
     }

     /* ‚úÖ PRINT STYLES */
     @media print {
         .sidebar,
         .mobile-toggle,
         .language-switcher,
         .notification {
             display: none !important;
         }

         .main-content {
             margin-left: 0 !important;
             padding: 0 !important;
         }

         body {
             background: white !important;
             color: black !important;
         }

         .stat-card,
         .referral-section,
         .wallet-section {
             border: 1px solid #000 !important;
             background: white !important;
         }
     }

     /* ‚úÖ HIGH CONTRAST MODE */
     @media (prefers-contrast: high) {
         body {
             background: #000;
             color: #FFF;
         }

         .sidebar {
             background: #000;
             border-color: #FFF;
         }

         .stat-card,
         .referral-section,
         .wallet-section {
             background: #000;
             border-color: #FFF;
             color: #FFF;
         }

         .menu-item:hover {
             background: #333;
         }
     }

     /* ‚úÖ REDUCED MOTION */
     @media (prefers-reduced-motion: reduce) {
         *,
         *::before,
         *::after {
             animation-duration: 0.01ms !important;
             animation-iteration-count: 1 !important;
             transition-duration: 0.01ms !important;
         }
     }

     /* ‚úÖ FOCUS STYLES FOR ACCESSIBILITY */
     button:focus,
     input:focus,
     textarea:focus,
     select:focus,
     .menu-item:focus {
         outline: 2px solid #FFD700;
         outline-offset: 2px;
     }

     /* ‚úÖ CUSTOM SCROLLBARS */
     ::-webkit-scrollbar {
         width: 8px;
         height: 8px;
     }

     ::-webkit-scrollbar-track {
         background: rgba(255, 255, 255, 0.1);
         border-radius: 4px;
     }

     ::-webkit-scrollbar-thumb {
         background: #FFD700;
         border-radius: 4px;
     }

     ::-webkit-scrollbar-thumb:hover {
         background: #FFA500;
     }

     /* ‚úÖ SELECTION STYLES */
     ::selection {
         background: rgba(255, 215, 0, 0.3);
         color: #FFF;
     }

     ::-moz-selection {
         background: rgba(255, 215, 0, 0.3);
         color: #FFF;
     }

     /* ‚úÖ PLACEHOLDER STYLES */
     ::placeholder {
         color: #888;
         opacity: 1;
     }

     ::-moz-placeholder {
         color: #888;
         opacity: 1;
     }

     ::-webkit-input-placeholder {
         color: #888;
         opacity: 1;
     }

     ::-ms-input-placeholder {
         color: #888;
         opacity: 1;
     }
 </style>
</head>
<body>
 <!-- Language Switcher -->
 <div class="language-switcher">
     <button class="lang-btn active" onclick="switchLanguage('en')" data-lang="en">EN</button>
     <button class="lang-btn" onclick="switchLanguage('ru')" data-lang="ru">RU</button>
     <button class="lang-btn" onclick="switchLanguage('ua')" data-lang="ua">UA</button>
 </div>

 <!-- Mobile Toggle -->
 <div class="mobile-toggle" onclick="toggleSidebar()">
     <span id="mobileMenuText">‚ò∞</span>
 </div>

 <!-- Sidebar -->
 <div class="sidebar" id="sidebar">
     <div class="sidebar-header">
         <div class="logo" id="logoText">üéÅ CardGift</div>
         <div class="user-info">
             <div class="user-level" id="userLevel">GUEST</div>
             <div class="user-id" id="currentUserId">NOT_CONNECTED</div>
         </div>
     </div>

     <nav class="sidebar-menu">
         <div class="menu-item active" onclick="showSection('dashboard')" data-section="dashboard">
             <div class="menu-icon">üìä</div>
             <span id="menuDashboard">Dashboard</span>
         </div>

         <div class="menu-item locked" onclick="showSection('contacts')" data-section="contacts">
             <div class="menu-icon">üë•</div>
             <span id="menuContacts">Contacts</span>
             <div class="notification-badge hidden" id="contactsNotifications">0</div>
         </div>

         <div class="menu-item locked" onclick="showSection('archive')" data-section="archive">
             <div class="menu-icon">üìÅ</div>
             <span id="menuArchive">Archive</span>
             <div class="notification-badge hidden" id="archiveNotifications">0</div>
         </div>

         <div class="menu-item locked" onclick="showSection('referrals')" data-section="referrals">
             <div class="menu-icon">üåê</div>
             <span id="menuReferrals">Referrals</span>
             <div class="notification-badge hidden" id="referralsNotifications">0</div>
         </div>

         <div class="menu-item locked" onclick="showSection('crm')" data-section="crm">
             <div class="menu-icon">üéØ</div>
             <span id="menuCRM">CRM</span>
             <div class="notification-badge hidden" id="crmNotifications">0</div>
         </div>

         <div class="menu-item locked" onclick="showSection('surveys')" data-section="surveys">
             <div class="menu-icon">üìä</div>
             <span id="menuSurveys">Surveys</span>
             <div class="notification-badge hidden" id="surveysNotifications">0</div>
         </div>

         <div class="menu-item locked" onclick="showSection('blog')" data-section="blog">
             <div class="menu-icon">üìù</div>
             <span id="menuBlog">My Blog</span>
         </div>

         <div class="menu-item locked" onclick="showSection('mailings')" data-section="mailings">
             <div class="menu-icon">üìß</div>
             <span id="menuMailings">Mailings</span>
         </div>

         <div class="menu-item locked" onclick="showSection('analytics')" data-section="analytics">
             <div class="menu-icon">üìà</div>
             <span id="menuAnalytics">Analytics</span>
         </div>

         <div class="menu-item locked" onclick="showSection('mlm')" data-section="mlm">
             <div class="menu-icon">üí∞</div>
             <span id="menuMLM">Partner Program</span>
         </div>

         <div class="menu-item locked" onclick="showSection('coauthors')" data-section="coauthors">
             <div class="menu-icon">üëë</div>
             <span id="menuCoauthors">Co-authors</span>
         </div>

         <div class="menu-item" onclick="showSection('wallet')" data-section="wallet">
             <div class="menu-icon">üí≥</div>
             <span id="menuWallet">Wallet</span>
         </div>

         <div class="menu-item locked" onclick="showSection('settings')" data-section="settings">
             <div class="menu-icon">‚öôÔ∏è</div>
             <span id="menuSettings">Settings</span>
         </div>
     </nav>
 </div>

 <!-- Main Content -->
 <div class="main-content" id="mainContent">
     <!-- ‚úÖ DASHBOARD SECTION -->
     <div id="dashboard" class="content-section active">
         <div class="section-header">
             <h1 class="section-title" id="dashboardTitle">üìä Dashboard Overview</h1>
             <div id="currentTime"></div>
         </div>

         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üë•</div>
                 <div class="stat-number" id="totalReferrals">0</div>
                 <div class="stat-label" id="totalReferralsLabel">Total Team</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üéØ</div>
                 <div class="stat-number" id="activeReferrals">0</div>
                 <div class="stat-label" id="activeReferralsLabel">Active Users</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üí∞</div>
                 <div class="stat-number" id="totalEarnings">0.000</div>
                 <div class="stat-label" id="totalEarningsLabel">Earnings (opBNB)</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üìà</div>
                 <div class="stat-number" id="conversionRate">0%</div>
                 <div class="stat-label" id="conversionLabel">Conversion</div>
             </div>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="quickActionsTitle">üöÄ Quick Actions</h3>
             <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                 <button class="btn-primary" onclick="window.open('/generator.html', '_blank')">
                     üé® <span id="createCardBtn">Create Card</span>
                 </button>
                 <button class="btn-secondary" onclick="showSection('contacts')">
                     üë• <span id="manageContactsBtn">Manage Contacts</span>
                 </button>
                 <button class="btn-secondary" onclick="showSection('referrals')">
                     üåê <span id="viewTeamBtn">View Team</span>
                 </button>
                 <button class="btn-success" onclick="copyReferralLink()">
                     üìã <span id="copyLinkBtn">Copy Referral Link</span>
                 </button>
             </div>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="recentActivityTitle">üìä Recent Activity</h3>
             <div id="recentActivity" style="color: #CCC;">
                 <p id="noActivityText">No recent activity</p>
             </div>
         </div>
     </div>

     <!-- ‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ù–ê–Ø CONTACTS SECTION -->
     <div id="contacts" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="contactsTitle">üë• Contact Management</h1>
             <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                 <button class="btn-primary" onclick="addNewContact()">
                     ‚ûï <span id="addContactBtn">Add Contact</span>
                 </button>
                 <button class="btn-secondary" onclick="showImportExport()">
                     üì•üì§ <span id="importExportBtn">Import/Export</span>
                 </button>
             </div>
         </div>

         <!-- SEARCH FUNCTIONALITY -->
         <div class="contacts-search-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;">üîç <span id="searchContactsTitle">Search Contacts</span></h3>
             <div class="search-filters">
                 <select id="categoryFilter" class="search-select">
                     <option value="all" id="allCategoriesOption">All Categories</option>
                     <option value="telegram">üì± Telegram</option>
                     <option value="whatsapp">üí¨ WhatsApp</option>
                     <option value="email">üìß Email</option>
                     <option value="instagram">üì∑ Instagram</option>
                     <option value="viber">üíú Viber</option>
                     <option value="facebook">üë§ Facebook</option>
                     <option value="tiktok">üéµ TikTok</option>
                     <option value="twitter">üê¶ Twitter/X</option>
                 </select>
                 <input type="text" id="searchInput" placeholder="Search by name or contact..." class="search-input">
                 <button onclick="searchContacts()" class="search-btn" id="searchBtn">Search</button>
                 <button onclick="clearSearch()" class="clear-btn" id="clearBtn">Clear</button>
             </div>
         </div>

         <!-- CONTACT CATEGORIES -->
         <div class="contact-categories">
             <div class="category-card" onclick="filterContacts('telegram')">
                 <div class="category-icon">üì±</div>
                 <div class="category-name" id="telegramCategory">Telegram</div>
                 <div class="category-count" id="telegramCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('whatsapp')">
                 <div class="category-icon">üí¨</div>
                 <div class="category-name" id="whatsappCategory">WhatsApp</div>
                 <div class="category-count" id="whatsappCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('email')">
                 <div class="category-icon">üìß</div>
                 <div class="category-name" id="emailCategory">Email</div>
                 <div class="category-count" id="emailCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('phone')">
                 <div class="category-icon">üìû</div>
                 <div class="category-name" id="phoneCategory">Phone</div>
                 <div class="category-count" id="phoneCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('instagram')">
                 <div class="category-icon">üì∑</div>
                 <div class="category-name" id="instagramCategory">Instagram</div>
                 <div class="category-count" id="instagramCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('facebook')">
                 <div class="category-icon">üë§</div>
                 <div class="category-name" id="facebookCategory">Facebook</div>
                 <div class="category-count" id="facebookCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('tiktok')">
                 <div class="category-icon">üéµ</div>
                 <div class="category-name" id="tiktokCategory">TikTok</div>
                 <div class="category-count" id="tiktokCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('twitter')">
                 <div class="category-icon">üê¶</div>
                 <div class="category-name" id="twitterCategory">Twitter/X</div>
                 <div class="category-count" id="twitterCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('viber')">
                 <div class="category-icon">üíú</div>
                 <div class="category-name" id="viberCategory">Viber</div>
                 <div class="category-count" id="viberCount">0</div>
             </div>
             <div class="category-card" onclick="filterContacts('all')">
                 <div class="category-icon">üìã</div>
                 <div class="category-name" id="allCategory">All</div>
                 <div class="category-count" id="allCount">0</div>
             </div>
         </div>

         <!-- CONTACTS TABLE -->
         <div class="contacts-table-section">
             <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                 <h3 style="color: #FFD700; margin: 0;" id="contactListTitle">üìù Contact Database</h3>
                 <div style="display: flex; gap: 10px;">
                     <span class="archive-limits" id="contactsCount">
                         Total: <strong id="totalContactsCount">0</strong> contacts
                     </span>
                 </div>
             </div>
             <div class="contacts-table" id="contactsTable">
                 <table>
                     <thead>
                         <tr>
                             <th id="nameHeader">Name</th>
                             <th id="platformHeader">Platform</th>
                             <th id="contactHeader">Contact</th>
                             <th id="consentHeader">Push Consent</th>
                             <th id="sourceHeader">Source</th>
                             <th id="levelHeader">User Level</th>
                             <th id="dateHeader">Added Date</th>
                             <th id="actionsHeader">Actions</th>
                         </tr>
                     </thead>
                     <tbody id="contactsTableBody">
                         <tr>
                             <td colspan="8" style="text-align: center; color: #888; padding: 40px;" id="noContactsText">
                                 Connect wallet to manage contacts
                             </td>
                         </tr>
                     </tbody>
                 </table>
             </div>
         </div>

         <!-- API INTEGRATION SECTION -->
         <div class="api-integration-section" id="apiIntegrationSection" style="display: none;">
             <h3 style="color: #2196F3; margin-bottom: 20px;">üîó <span id="apiIntegrationTitle">API Integration</span></h3>
             <p style="color: #CCC; margin-bottom: 20px; font-size: 14px;" id="apiIntegrationDesc">
                 Connect your messenger APIs to send push notifications directly to your contacts.
             </p>

             <div class="api-card">
                 <h4>üì± <span id="telegramApiTitle">Telegram Bot API</span></h4>
                 <input type="password" id="telegramBotToken" class="api-input" placeholder="Enter Bot Token (e.g., 123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11)">
                 <div style="display: flex; gap: 10px; align-items: center;">
                     <button class="api-test-btn" onclick="testTelegramAPI()" id="testTelegramBtn">Test Connection</button>
                     <button class="api-save-btn" onclick="saveTelegramAPI()" id="saveTelegramBtn">Save</button>
                     <div class="api-status disconnected" id="telegramStatus">
                         <span>‚ùå</span> <span id="telegramStatusText">Not Connected</span>
                     </div>
                 </div>
             </div>

             <div class="api-card">
                 <h4>üí¨ <span id="whatsappApiTitle">WhatsApp Business API</span></h4>
                 <input type="password" id="whatsappToken" class="api-input" placeholder="Enter WhatsApp Business API Token">
                 <input type="text" id="whatsappPhoneId" class="api-input" placeholder="Enter Phone Number ID">
                 <div style="display: flex; gap: 10px; align-items: center;">
                     <button class="api-test-btn" onclick="testWhatsAppAPI()" id="testWhatsappBtn">Test Connection</button>
                     <button class="api-save-btn" onclick="saveWhatsAppAPI()" id="saveWhatsappBtn">Save</button>
                     <div class="api-status disconnected" id="whatsappStatus">
                         <span>‚ùå</span> <span id="whatsappStatusText">Not Connected</span>
                     </div>
                 </div>
             </div>

             <div class="api-card">
                 <h4>üìß <span id="emailApiTitle">Email SMTP</span></h4>
                 <input type="text" id="smtpHost" class="api-input" placeholder="SMTP Host (e.g., smtp.gmail.com)">
                 <input type="number" id="smtpPort" class="api-input" placeholder="Port (e.g., 587)">
                 <input type="email" id="smtpUser" class="api-input" placeholder="Email Address">
                 <input type="password" id="smtpPass" class="api-input" placeholder="Email Password or App Password">
                 <div style="display: flex; gap: 10px; align-items: center;">
                     <button class="api-test-btn" onclick="testEmailAPI()" id="testEmailBtn">Test Connection</button>
                     <button class="api-save-btn" onclick="saveEmailAPI()" id="saveEmailBtn">Save</button>
                     <div class="api-status disconnected" id="emailStatus">
                         <span>‚ùå</span> <span id="emailStatusText">Not Connected</span>
                     </div>
                 </div>
             </div>
         </div>

         <!-- PUSH NOTIFICATIONS SECTION -->
         <div class="push-section" id="pushSection" style="display: none;">
             <h3 style="color: #4CAF50; margin-bottom: 20px;">üì¢ <span id="pushNotificationsTitle">Push Notifications</span></h3>

             <!-- Push Limits Display -->
             <div class="push-limits" id="pushLimits">
                 <strong id="pushLimitsTitle">üìä Daily Limits:</strong>
                 <div id="pushLimitsText">Connect wallet to see your push notification limits</div>
             </div>

             <!-- Target Selection -->
             <h4 style="color: #4CAF50; margin-bottom: 15px;" id="selectTargetTitle">üéØ Select Target Audience</h4>
             <div class="target-selection" id="targetSelection">
                 <div class="target-card" onclick="selectTarget('all')" data-target="all">
                     <div class="target-icon">üë•</div>
                     <div class="target-name" id="targetAll">All Contacts</div>
                     <div class="target-count" id="targetAllCount">0 contacts</div>
                 </div>
                 
                 <div class="target-card" onclick="selectTarget('guests')" data-target="guests">
                     <div class="target-icon">üë§</div>
                     <div class="target-name" id="targetGuests">Guests Only</div>
                     <div class="target-count" id="targetGuestsCount">0 contacts</div>
                 </div>
                 
                 <div class="target-card" onclick="selectTarget('mini-admins')" data-target="mini-admins">
                     <div class="target-icon">‚ö°</div>
                     <div class="target-name" id="targetMiniAdmins">Mini Admins</div>
                     <div class="target-count" id="targetMiniAdminsCount">0 contacts</div>
                 </div>
                 
                 <div class="target-card" onclick="selectTarget('admins')" data-target="admins">
                     <div class="target-icon">üî•</div>
                     <div class="target-name" id="targetAdmins">Admins Only</div>
                     <div class="target-count" id="targetAdminsCount">0 contacts</div>
                 </div>
                 
                 <div class="target-card" onclick="selectTarget('super-admins')" data-target="super-admins">
                     <div class="target-icon">üöÄ</div>
                     <div class="target-name" id="targetSuperAdmins">Super Admins</div>
                     <div class="target-count" id="targetSuperAdminsCount">0 contacts</div>
                 </div>
                 
                 <div class="target-card" onclick="selectTarget('coauthors')" data-target="coauthors">
                     <div class="target-icon">üëë</div>
                     <div class="target-name" id="targetCoauthors">Co-authors</div>
                     <div class="target-count" id="targetCoauthorsCount">0 contacts</div>
                 </div>
             </div>

             <!-- Custom Groups -->
             <div class="custom-groups-section">
                 <h4 style="color: #4CAF50; margin-bottom: 15px;" id="customGroupsTitle">üìã Custom Groups</h4>
                 
                 <div class="group-create-form">
                     <input type="text" id="newGroupName" class="group-name-input" placeholder="Enter group name..." maxlength="50">
                     <button class="group-create-btn" onclick="createCustomGroup()" id="createGroupBtn">Create Group</button>
                 </div>
                 
                 <div class="custom-groups-list" id="customGroupsList">
                     <!-- Custom groups will be populated dynamically -->
                 </div>
             </div>

             <!-- Message Composer -->
             <div class="message-composer">
                 <h4 style="color: #4CAF50; margin-bottom: 15px;" id="composeMessageTitle">‚úçÔ∏è Compose Message</h4>
                 <textarea id="pushMessageText" class="message-textarea" placeholder="Enter your message..." maxlength="1000"></textarea>
                 <div class="message-char-count">
                     <span id="charCount">0</span>/1000 <span id="charactersText">characters</span>
                 </div>
             </div>

             <!-- Send Button -->
             <button class="send-push-btn" onclick="sendPushNotification()" id="sendPushBtn" disabled>
                 üì¢ <span id="sendPushText">SEND PUSH NOTIFICATION</span>
             </button>
         </div>

         <!-- IMPORT/EXPORT SECTION -->
         <div class="import-export-section" id="importExportSection" style="display: none;">
             <h3 style="color: #9C27B0; margin-bottom: 20px;">üì•üì§ <span id="importExportTitle">Import/Export Contacts</span></h3>
             
             <div class="import-export-grid">
                 <div class="import-card">
                     <div class="import-export-icon">üì•</div>
                     <h4 class="import-export-title" id="importTitle">Import Contacts</h4>
                     <p class="import-export-desc" id="importDesc">
                         Upload CSV, Excel, or text file with your contacts to add them to your database.
                     </p>
                     
                     <input type="file" id="contactsImportFile" class="file-input" accept=".csv,.xlsx,.xls,.txt" onchange="handleContactsImport(this)">
                     <label for="contactsImportFile" class="file-input-label" id="chooseFileBtn">
                         üìÅ Choose File
                     </label>
                     
                     <div class="supported-formats">
                         <span id="supportedFormatsText">Supported: CSV, Excel, TXT</span>
                     </div>
                 </div>
                 
                 <div class="export-card">
                     <div class="import-export-icon">üì§</div>
                     <h4 class="import-export-title" id="exportTitle">Export Contacts</h4>
                     <p class="import-export-desc" id="exportDesc">
                         Download your contacts database as CSV file for backup or use in other applications.
                     </p>
                     
                     <button class="export-btn" onclick="exportContacts()" id="exportContactsBtn">
                         üíæ Export All Contacts
                     </button>
                     
                     <div class="supported-formats">
                         <span id="exportFormatText">Format: CSV (Excel compatible)</span>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- ‚úÖ ARCHIVE SECTION -->
     <div id="archive" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="archiveTitle">üìÅ Card Archive</h1>
             <div class="archive-controls">
                 <div class="archive-limits">
                     <span id="archiveUsage">Used: <strong id="usedSlots">0</strong>/<strong id="totalSlots">20</strong></span>
                     <button class="upgrade-btn btn-success" onclick="showUpgradeOptions()" style="margin-left: 10px;">
                         üìà <span id="upgradeBtn">Upgrade</span>
                     </button>
                 </div>
                 <div class="archive-actions">
                     <button class="btn-primary" onclick="createNewCard()">
                         üé® <span id="createNewBtn">Create New</span>
                     </button>
                     <button class="btn-secondary" onclick="exportArchive()">
                         üì• <span id="exportArchiveBtn">Export</span>
                     </button>
                 </div>
             </div>
         </div>

         <!-- Archive Filters -->
         <div class="referral-section">
             <div style="display: flex; gap: 15px; flex-wrap: wrap; align-items: center;">
                 <input type="text" id="archiveSearch" placeholder="Search cards..." class="form-input" style="flex: 1; min-width: 200px;">
                 <select id="archiveFilter" class="form-select" style="min-width: 150px;">
                     <option value="all" id="filterAll">All Cards</option>
                     <option value="recent" id="filterRecent">Recent</option>
                     <option value="popular" id="filterPopular">Most Viewed</option>
                     <option value="clicked" id="filterClicked">Most Clicked</option>
                 </select>
                 <button class="btn-primary" onclick="searchArchive()">
                     üîç <span id="searchBtn">Search</span>
                 </button>
             </div>
         </div>

         <!-- Cards Grid -->
         <div class="cards-grid" id="cardsGrid">
             <!-- Cards will be populated dynamically -->
         </div>

         <!-- Empty State -->
         <div id="emptyArchive" style="text-align: center; color: #CCC; padding: 60px; display: none;">
             <div style="font-size: 64px; margin-bottom: 20px;">üìÅ</div>
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="emptyArchiveTitle">Your archive is empty</h3>
             <p id="emptyArchiveText">Create your first card to start building your collection!</p>
             <button class="btn-primary" onclick="createNewCard()" style="margin-top: 20px;">
                 üé® <span id="createFirstCardBtn">Create First Card</span>
             </button>
         </div>
     </div>

     <!-- ‚úÖ SURVEYS SECTION -->
     <div id="surveys" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="surveysTitle">üìä Surveys & Polls</h1>
             <div style="display: flex; gap: 10px;">
                 <button class="btn-primary" onclick="createNewSurvey()">
                     ‚ûï <span id="createSurveyBtn">Create Survey</span>
                 </button>
                 <button class="btn-secondary" onclick="viewSurveyTemplates()">
                     üìã <span id="templatesBtn">Templates</span>
                 </button>
             </div>
         </div>

         <!-- Survey Stats -->
         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üìä</div>
                 <div class="stat-number" id="totalSurveys">0</div>
                 <div class="stat-label" id="totalSurveysLabel">Total Surveys</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">‚úÖ</div>
                 <div class="stat-number" id="activeSurveys">0</div>
                 <div class="stat-label" id="activeSurveysLabel">Active</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üë•</div>
                 <div class="stat-number" id="surveyResponses">0</div>
                 <div class="stat-label" id="responsesLabel">Total Responses</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üìà</div>
                 <div class="stat-number" id="responseRate">0%</div>
                 <div class="stat-label" id="responseRateLabel">Response Rate</div>
             </div>
         </div>

         <!-- Survey Filters -->
         <div class="referral-section">
             <div style="display: flex; gap: 15px; flex-wrap: wrap; align-items: center; margin-bottom: 20px;">
                 <input type="text" id="surveySearch" placeholder="Search surveys..." class="form-input" style="flex: 1; min-width: 200px;">
                 <select id="surveyStatusFilter" class="form-select" style="min-width: 150px;">
                     <option value="all" id="statusAll">All Status</option>
                     <option value="active" id="statusActive">Active</option>
                     <option value="draft" id="statusDraft">Draft</option>
                     <option value="completed" id="statusCompleted">Completed</option>
                     <option value="archived" id="statusArchived">Archived</option>
                 </select>
                 <button class="btn-primary" onclick="filterSurveys()">
                     üîç <span id="filterSurveysBtn">Filter</span>
                 </button>
             </div>

             <!-- Survey List -->
             <div id="surveysList">
                 <!-- Surveys will be populated dynamically -->
             </div>

             <!-- Empty State -->
             <div id="emptySurveys" style="text-align: center; color: #CCC; padding: 60px; display: none;">
                 <div style="font-size: 64px; margin-bottom: 20px;">üìä</div>
                 <h3 style="color: #2196F3; margin-bottom: 15px;" id="emptySurveysTitle">No surveys yet</h3>
                 <p id="emptySurveysText">Create your first survey to start collecting feedback!</p>
                 <button class="btn-primary" onclick="createNewSurvey()" style="margin-top: 20px;">
                     üìä <span id="createFirstSurveyBtn">Create First Survey</span>
                 </button>
             </div>
         </div>
     </div>

     <!-- ‚úÖ BLOG SECTION -->
     <div id="blog" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="blogTitle">üìù My Blog</h1>
             <div class="blog-controls">
                 <button class="btn-success" onclick="createNewPost()">
                     ‚úçÔ∏è <span id="newPostBtn">New Post</span>
                 </button>
                 <button class="btn-secondary" onclick="editBlogSettings()">
                     ‚öôÔ∏è <span id="blogSettingsBtn">Settings</span>
                 </button>
                 <button class="btn-secondary" onclick="previewBlog()">
                     üëÅÔ∏è <span id="previewBlogBtn">Preview</span>
                 </button>
                 <button class="btn-primary" onclick="publishBlog()">
                     üöÄ <span id="publishBlogBtn">Publish</span>
                 </button>
             </div>
         </div>

         <!-- Blog Stats -->
         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üìù</div>
                 <div class="stat-number" id="totalPosts">0</div>
                 <div class="stat-label" id="totalPostsLabel">Posts</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üëÅÔ∏è</div>
                 <div class="stat-number" id="totalBlogViews">0</div>
                 <div class="stat-label" id="totalBlogViewsLabel">Views</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">‚ù§Ô∏è</div>
                 <div class="stat-number" id="totalLikes">0</div>
                 <div class="stat-label" id="totalLikesLabel">Likes</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üí¨</div>
                 <div class="stat-number" id="totalComments">0</div>
                 <div class="stat-label" id="totalCommentsLabel">Comments</div>
             </div>
         </div>

         <!-- Blog Info -->
         <div class="referral-section">
             <div style="display: flex; justify-content: space-between; align-items: center;">
                 <div>
                     <h3 style="color: #FFD700; margin-bottom: 5px;" id="blogTitleDisplay">My Blog</h3>
                     <p style="color: #CCC; margin-bottom: 10px;" id="blogDescription">Welcome to my blog</p>
                     <div style="color: #4CAF50; font-size: 14px;">
                         üåê <span id="blogUrl">https://my-blog.cardgift.bnb</span>
                     </div>
                 </div>
                 <div>
                     <div style="width: 60px; height: 60px; border-radius: 50%; background: rgba(255,215,0,0.2); display: flex; align-items: center; justify-content: center;">
                         <span style="font-size: 24px;" id="blogLogo">üìù</span>
                     </div>
                 </div>
             </div>
         </div>

         <!-- Posts Section -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="recentPostsTitle">Recent Posts</h3>
             <div id="postsList">
                 <!-- Posts will be populated dynamically -->
             </div>

             <!-- Empty State -->
             <div id="emptyBlog" style="text-align: center; color: #CCC; padding: 60px; display: none;">
                 <div style="font-size: 64px; margin-bottom: 20px;">üìù</div>
                 <h3 style="color: #FFD700; margin-bottom: 15px;" id="emptyBlogTitle">Start your blog journey</h3>
                 <p id="emptyBlogText">Create your first post and share your thoughts with the world!</p>
                 <button class="btn-success" onclick="createNewPost()" style="margin-top: 20px;">
                     ‚úçÔ∏è <span id="writeFirstPostBtn">Write First Post</span>
                 </button>
             </div>
         </div>
     </div>

     <!-- ‚úÖ MLM SECTION -->
     <div id="mlm" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="mlmTitle">üí∞ Partner Program</h1>
             <div style="color: #CCC;" id="mlmSubtitle">Manage your multi-level marketing campaigns</div>
         </div>

         <div id="mlmContent">
             <!-- MLM Stats -->
             <div class="stats-grid">
                 <div class="stat-card">
                     <div class="stat-icon">üë•</div>
                     <div class="stat-number" id="totalPartners">0</div>
                     <div class="stat-label" id="totalPartnersLabel">Total Partners</div>
                 </div>
                 <div class="stat-card">
                     <div class="stat-icon">üí∞</div>
                     <div class="stat-number" id="totalCommissions">0.000</div>
                     <div class="stat-label" id="totalCommissionsLabel">Total Commissions (opBNB)</div>
                 </div>
                 <div class="stat-card">
                     <div class="stat-icon">üìà</div>
                     <div class="stat-number" id="monthlyEarnings">0.000</div>
                     <div class="stat-label" id="monthlyEarningsLabel">This Month</div>
                 </div>
                 <div class="stat-card">
                     <div class="stat-icon">üéØ</div>
                     <div class="stat-number" id="mlmConversionRate">0%</div>
                     <div class="stat-label" id="mlmConversionLabel">Conversion Rate</div>
                 </div>
             </div>

             <!-- MLM Configuration -->
             <div class="referral-section">
                 <h3 style="color: #FFD700; margin-bottom: 15px;" id="mlmConfigTitle">‚öôÔ∏è MLM Configuration</h3>
                 
                 <h4 style="color: #FFD700; margin-bottom: 20px;" id="commissionStructureTitle">Commission Structure (9 Levels):</h4>
                 
                 <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 1:</label>
                         <input type="number" id="level1Percent" value="10" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 2:</label>
                         <input type="number" id="level2Percent" value="7" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 3:</label>
                         <input type="number" id="level3Percent" value="5" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 4:</label>
                         <input type="number" id="level4Percent" value="3" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 5:</label>
                         <input type="number" id="level5Percent" value="2" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 6:</label>
                         <input type="number" id="level6Percent" value="1" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 7:</label>
                         <input type="number" id="level7Percent" value="1" min="0" max="50" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 8:</label>
                         <input type="number" id="level8Percent" value="0.5" min="0" max="50" step="0.5" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                     <div style="text-align: center;">
                         <label style="color: #CCC; display: block; margin-bottom: 5px;">Level 9:</label>
                         <input type="number" id="level9Percent" value="0.5" min="0" max="50" step="0.5" class="form-input" style="width: 60px; text-align: center;">
                         <span style="color: #FFD700;">%</span>
                     </div>
                 </div>
                 
                 <div style="text-align: center; margin-bottom: 20px;">
                     <button class="btn-success" onclick="saveMLMSettings()" style="margin-right: 10px;">
                         üíæ <span id="saveConfigBtn">Save Configuration</span>
                     </button>
                     <button class="btn-danger" onclick="resetMLMSettings()">
                         üîÑ <span id="resetConfigBtn">Reset to Default</span>
                     </button>
                 </div>
                 
                 <div id="mlmPreview" style="background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px;">
                     <h4 style="color: #FFD700; margin-bottom: 10px;" id="commissionPreviewTitle">üí° Commission Preview:</h4>
                     <div style="color: #CCC; font-size: 14px;" id="commissionPreview">
                         Configure your commission structure above to see the preview.
                     </div>
                 </div>
             </div>

             <!-- Partner Campaigns -->
             <div class="referral-section">
                 <h3 style="color: #FFD700; margin-bottom: 15px;" id="activeCampaignsTitle">üöÄ Active Campaigns</h3>
                 <div id="activeCampaigns">
                     <div style="text-align: center; color: #CCC; padding: 40px;">
                         <div style="font-size: 48px; margin-bottom: 15px;">üì¢</div>
                         <h4 style="color: #FFD700;" id="noCampaignsTitle">No active campaigns</h4>
                         <p id="noCampaignsText">Create your first marketing campaign to start earning commissions.</p>
                         <button class="btn-primary" onclick="createCampaign()" style="margin-top: 15px;">
                             üéØ <span id="createCampaignBtn">Create Campaign</span>
                         </button>
                     </div>
                 </div>
             </div>
         </div>

         <!-- MLM Access Denied -->
         <div id="mlmAccessDenied" style="display: none; text-align: center; color: #CCC; padding: 60px;">
             <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="mlmAccessTitle">MLM Access Restricted</h3>
             <p id="mlmAccessText">Partner program is available starting from Super Admin level.</p>
             <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">
                 üöÄ <span id="upgradeToSuperBtn">Upgrade to Super Admin</span>
             </button>
         </div>
     </div>

     <!-- ‚úÖ REFERRALS SECTION -->
     <div id="referrals" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="referralsTitle">üåê Referral Network</h1>
             <button class="btn-primary" onclick="copyReferralLink()">
                 üìã <span id="copyReferralBtn">Copy Referral Link</span>
             </button>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="referralLinkTitle">üîó Your Referral Link</h3>
             <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                 <input type="text" id="referralLink" readonly class="form-input" style="flex: 1; min-width: 300px;" value="https://cardgift.bnb/registration.html?ref=YOUR_ID">
                 <button class="btn-secondary" onclick="copyReferralLink()">
                     üìã <span id="copyLinkText">Copy</span>
                 </button>
                 <button class="btn-secondary" onclick="shareReferralLink()">
                     üì§ <span id="shareText">Share</span>
                 </button>
             </div>
         </div>

         <div class="level-buttons" id="levelButtons">
             <div class="level-btn active" onclick="showLevel(1)" data-level="1">1</div>
             <div class="level-btn" onclick="showLevel(2)" data-level="2">2</div>
             <div class="level-btn" onclick="showLevel(3)" data-level="3">3</div>
             <div class="level-btn" onclick="showLevel(4)" data-level="4">4</div>
             <div class="level-btn" onclick="showLevel(5)" data-level="5">5</div>
             <div class="level-btn" onclick="showLevel(6)" data-level="6">6</div>
             <div class="level-btn" onclick="showLevel(7)" data-level="7">7</div>
             <div class="level-btn" onclick="showLevel(8)" data-level="8">8</div>
             <div class="level-btn" onclick="showLevel(9)" data-level="9">9</div>
         </div>

         <div id="levelContents">
             <div class="level-content active" id="level1Content">
                 <div class="level-header">
                     <div class="level-title" id="level1Title">Level 1 - Direct Referrals</div>
                     <div class="level-count" id="level1Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <thead>
                             <tr>
                                 <th id="userIdHeader">User ID</th>
                                 <th id="walletHeader">Wallet</th>
                                 <th id="statusHeader">Status</th>
                                 <th id="joinedHeader">Joined</th>
                                 <th id="actionsHeader">Actions</th>
                             </tr>
                         </thead>
                         <tbody id="level1Table">
                             <tr>
                                 <td colspan="5" style="text-align: center; color: #888; padding: 40px;" id="noReferralsText">No referrals yet</td>
                             </tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <!-- Levels 2-9 similar structure -->
             <div class="level-content" id="level2Content">
                 <div class="level-header">
                     <div class="level-title" id="level2Title">Level 2 - Second Line</div>
                     <div class="level-count" id="level2Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <thead>
                             <tr>
                                 <th id="userIdHeader2">User ID</th>
                                 <th id="sponsorHeader2">Sponsor</th>
                                 <th id="walletHeader2">Wallet</th>
                                 <th id="statusHeader2">Status</th>
                                 <th id="joinedHeader2">Joined</th>
                                 <th id="actionsHeader2">Actions</th>
                             </tr>
                         </thead>
                         <tbody id="level2Table">
                             <tr>
                                 <td colspan="6" style="text-align: center; color: #888; padding: 40px;" id="noLevel2Text">No second line referrals yet</td>
                             </tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <!-- Levels 3-9 with similar structure -->
             <div class="level-content" id="level3Content">
                 <div class="level-header">
                     <div class="level-title">Level 3</div>
                     <div class="level-count" id="level3Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level3Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 3 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level4Content">
                 <div class="level-header">
                     <div class="level-title">Level 4</div>
                     <div class="level-count" id="level4Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level4Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 4 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level5Content">
                 <div class="level-header">
                     <div class="level-title">Level 5</div>
                     <div class="level-count" id="level5Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level5Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 5 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level6Content">
                 <div class="level-header">
                     <div class="level-title">Level 6</div>
                     <div class="level-count" id="level6Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level6Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 6 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level7Content">
                 <div class="level-header">
                     <div class="level-title">Level 7</div>
                     <div class="level-count" id="level7Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level7Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 7 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level8Content">
                 <div class="level-header">
                     <div class="level-title">Level 8</div>
                     <div class="level-count" id="level8Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level8Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 8 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>

             <div class="level-content" id="level9Content">
                 <div class="level-header">
                     <div class="level-title">Level 9</div>
                     <div class="level-count" id="level9Count">0 users</div>
                 </div>
                 <div class="team-table">
                     <table>
                         <tbody id="level9Table">
                             <tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level 9 referrals yet</td></tr>
                         </tbody>
                     </table>
                 </div>
             </div>
         </div>
     </div>

     <!-- ‚úÖ CRM SECTION -->
     <div id="crm" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="crmTitle">üéØ CRM System</h1>
             <button class="btn-primary" onclick="importContacts()">
                 üì• <span id="importContactsBtn">Import Contacts</span>
             </button>
         </div>

         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üë•</div>
                 <div class="stat-number" id="totalCrmContacts">0</div>
                 <div class="stat-label" id="totalContactsLabel">Total Contacts</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">‚úÖ</div>
                 <div class="stat-number" id="activeContacts">0</div>
                 <div class="stat-label" id="activeContactsLabel">Active</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üìß</div>
                 <div class="stat-number" id="emailsSent">0</div>
                 <div class="stat-label" id="emailsSentLabel">Emails Sent</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üìà</div>
                 <div class="stat-number" id="crmConversion">0%</div>
                 <div class="stat-label" id="crmConversionLabel">Conversion</div>
             </div>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="contactManagementTitle">üìã Contact Management</h3>
             <div id="crmContactsList">
                 <p style="color: #CCC; text-align: center; padding: 40px;" id="noCrmContactsText">No CRM contacts yet. Import or add contacts to get started!</p>
             </div>
         </div>
     </div>

     <!-- ‚úÖ MAILINGS SECTION -->
     <div id="mailings" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="mailingsTitle">üìß Email Campaigns</h1>
             <div style="display: flex; gap: 10px;">
                 <button class="btn-primary" onclick="createNewCampaign()">
                     ‚ûï <span id="newCampaignBtn">New Campaign</span>
                 </button>
                 <button class="btn-secondary" onclick="viewCampaignTemplates()">
                     üìã <span id="campaignTemplatesBtn">Templates</span>
                 </button>
             </div>
         </div>

         <!-- Mailing Stats -->
         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üìß</div>
                 <div class="stat-number" id="totalCampaigns">0</div>
                 <div class="stat-label" id="totalCampaignsLabel">Total Campaigns</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üì§</div>
                 <div class="stat-number" id="emailsSentTotal">0</div>
                 <div class="stat-label" id="emailsSentTotalLabel">Emails Sent</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üìä</div>
                 <div class="stat-number" id="openRate">0%</div>
                 <div class="stat-label" id="openRateLabel">Open Rate</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üñ±Ô∏è</div>
                 <div class="stat-number" id="clickRate">0%</div>
                 <div class="stat-label" id="clickRateLabel">Click Rate</div>
             </div>
         </div>

         <!-- Campaign List -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="campaignListTitle">üìã Recent Campaigns</h3>
             <div id="campaignsList">
                 <div style="text-align: center; color: #CCC; padding: 40px;">
                     <div style="font-size: 48px; margin-bottom: 15px;">üìß</div>
                     <h4 style="color: #FFD700;" id="noCampaignsTitle2">No campaigns yet</h4>
                     <p id="noCampaignsText2">Create your first email campaign to start engaging with your audience!</p>
                     <button class="btn-primary" onclick="createNewCampaign()" style="margin-top: 15px;">
                         üìß <span id="createFirstCampaignBtn">Create First Campaign</span>
                     </button>
                 </div>
             </div>
         </div>
     </div>

     <!-- ‚úÖ ANALYTICS SECTION -->
     <div id="analytics" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="analyticsTitle">üìà Analytics Dashboard</h1>
             <div style="display: flex; gap: 10px;">
                 <button class="btn-secondary" onclick="exportAnalytics()">
                     üì• <span id="exportAnalyticsBtn">Export Data</span>
                 </button>
                 <button class="btn-secondary" onclick="refreshAnalytics()">
                     üîÑ <span id="refreshAnalyticsBtn">Refresh</span>
                 </button>
             </div>
         </div>

         <!-- Analytics Stats -->
         <div class="stats-grid">
             <div class="stat-card">
                 <div class="stat-icon">üë•</div>
                 <div class="stat-number" id="totalUsers">0</div>
                 <div class="stat-label" id="totalUsersLabel">Total Users</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üé®</div>
                 <div class="stat-number" id="cardsCreated">0</div>
                 <div class="stat-label" id="cardsCreatedLabel">Cards Created</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üëÅÔ∏è</div>
                 <div class="stat-number" id="totalViews">0</div>
                 <div class="stat-label" id="totalViewsLabel">Total Views</div>
             </div>
             <div class="stat-card">
                 <div class="stat-icon">üí∞</div>
                 <div class="stat-number" id="totalRevenue">0.000</div>
                 <div class="stat-label" id="totalRevenueLabel">Revenue (opBNB)</div>
             </div>
         </div>

         <!-- Charts Section -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="performanceTitle">üìä Performance Overview</h3>
             <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; text-align: center; color: #CCC;">
                 <div style="font-size: 48px; margin-bottom: 15px;">üìà</div>
                 <h4 style="color: #FFD700;" id="analyticsComingSoonTitle">Advanced Analytics Coming Soon</h4>
                 <p id="analyticsComingSoonText">Detailed charts and reports will be available in the next update!</p>
             </div>
         </div>
     </div>

     <!-- ‚úÖ CO-AUTHORS SECTION -->
     <div id="coauthors" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="coauthorsTitle">üëë Co-Authors Management</h1>
             <button class="btn-primary" onclick="addCoauthor()">
                 ‚ûï <span id="addCoauthorBtn">Add Co-Author</span>
             </button>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="foundersTitle">üèÜ Project Founders</h3>
             <div id="foundersList">
                 <div style="background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px; padding: 20px;">
                     <div style="display: flex; align-items: center; gap: 15px;">
                         <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(45deg, #FFD700, #FFA500); display: flex; align-items: center; justify-content: center; font-size: 24px;">üëë</div>
                         <div>
                             <div style="color: #FFD700; font-weight: bold; font-size: 18px;" id="founderName">CardGift Founder</div>
                             <div style="color: #CCC; font-size: 14px;" id="founderStatus">Project Creator & Lead Developer</div>
                         </div>
                     </div>
                 </div>
             </div>
         </div>

         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="coauthorListTitle">ü§ù Active Co-Authors</h3>
             <div id="coauthorsList">
                 <p style="color: #CCC; text-align: center; padding: 40px;" id="noCoauthorsText">No co-authors assigned yet.</p>
             </div>
         </div>
     </div>

     <!-- ‚úÖ WALLET SECTION -->
     <div id="wallet" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="walletTitle">üí≥ Wallet & Activation</h1>
             <div id="connectionStatus" style="color: #FF6B6B;">Not Connected</div>
         </div>

         <!-- Wallet Connection -->
         <div class="wallet-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="walletConnectionTitle">üîó Wallet Connection</h3>
             <div style="display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 20px;">
                 <button class="wallet-connect-btn" onclick="connectSafePal()" id="safePalBtn">
                     üõ°Ô∏è Connect SafePal
                 </button>
                 <button class="wallet-connect-btn" onclick="connectMetaMask()" id="metaMaskBtn">
                     ü¶ä Connect MetaMask
                 </button>
                 <button class="wallet-connect-btn" onclick="connectWalletConnect()" id="walletConnectBtn">
                     üîó WalletConnect
                 </button>
                 <!-- –¢–û–õ–¨–ö–û –û–î–ù–ê –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ -->
                 <button class="wallet-connect-btn" onclick="disconnectWallet()" id="disconnectBtn" 
                         style="background: #FF4444; display: none;">
                     üö™ Disconnect Wallet
                 </button>
             </div>
             <div id="walletInfo" style="display: none;">
                 <p><span id="walletAddressLabel">Address:</span> <span id="walletAddress"></span></p>
                 <p><span id="walletBalanceLabel">Balance:</span> <span id="walletBalance">0.000</span> opBNB</p>
             </div>
         </div>

         <!-- Account Activation -->
         <div class="wallet-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="activationTitle">üöÄ Account Activation</h3>
             
             <div class="activation-buttons" id="activationButtonsContainer">
                 <button class="activation-btn" onclick="activateUser(1)" id="activateUserBtn">
                     üîê <span id="candidateLevel">–ö–∞–Ω–¥–∏–¥–∞—Ç (User)</span><br>
                     <small>0.0025 opBNB</small>
                 </button>
                 <button class="activation-btn mini-admin" onclick="activateUser(2)" id="miniAdminBtn">
                     ‚ö° <span id="miniAdminLevel">Mini Admin</span><br>
                     <small>0.05 opBNB</small>
                 </button>
                 <button class="activation-btn" onclick="activateUser(3)" id="adminBtn">
                     üî• <span id="adminLevel">Admin</span><br>
                     <small>0.15 opBNB</small>
                 </button>
                 <button class="activation-btn super-admin" onclick="activateUser(4)" id="superAdminBtn">
                     üöÄ <span id="superAdminLevel">Super Admin</span><br>
                     <small>0.2145 opBNB</small>
                 </button>
             </div>
             
             <div style="margin-top: 20px; padding: 15px; background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); border-radius: 12px;">
                 <h4 style="color: #FFD700; margin-bottom: 10px;" id="benefitsTitle">üí° Activation Benefits:</h4>
                 <div style="color: #CCC; font-size: 14px; line-height: 1.6;">
                     <div><strong>üîê User:</strong> <span id="userBenefits">Archive (20 cards), Contact management, Basic stats</span></div>
                     <div><strong>‚ö° Mini Admin:</strong> <span id="miniAdminBenefits">+ CRM system, Referral tracking (100 cards)</span></div>
                     <div><strong>üî• Admin:</strong> <span id="adminBenefits">+ Blog creation, Mass mailings, Surveys (200 cards)</span></div>
                     <div><strong>üöÄ Super Admin:</strong> <span id="superAdminBenefits">+ Partner program, Custom domain (500 cards)</span></div>
                 </div>
             </div>
             
             <div style="margin-top: 15px; text-align: center;">
                 <button class="btn-secondary" onclick="showGlobalWayInfo()">
                     üåç <span id="globalWayBtn">GlobalWay Integration</span>
                 </button>
             </div>
         </div>

         <!-- Network Information -->
         <div class="wallet-section">
             <h3 style="color: #FFD700; margin-bottom: 15px;" id="networkInfoTitle">üåê Network Information</h3>
             <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px;">
                 <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                     <div>
                         <div style="color: #CCC; font-size: 12px;" id="networkLabel">Network:</div>
                         <div style="color: #FFD700; font-weight: bold;">opBNB Mainnet</div>
                     </div>
                     <div>
                         <div style="color: #CCC; font-size: 12px;" id="chainIdLabel">Chain ID:</div>
                         <div style="color: #FFD700; font-weight: bold;">204</div>
                     </div>
                     <div>
                         <div style="color: #CCC; font-size: 12px;" id="rpcLabel">RPC URL:</div>
                         <div style="color: #4CAF50; font-size: 12px; word-break: break-all;">https://opbnb-mainnet-rpc.bnbchain.org</div>
                     </div>
                     <div>
                         <div style="color: #CCC; font-size: 12px;" id="explorerLabel">Explorer:</div>
                         <div style="color: #2196F3; font-size: 12px;">
                             <a href="https://opbnbscan.com" target="_blank" style="color: #2196F3; text-decoration: none;">opbnbscan.com</a>
                         </div>
                     </div>
                 </div>
             </div>
         </div>
     </div>

     <!-- ‚úÖ SETTINGS SECTION -->
     <div id="settings" class="content-section">
         <div class="section-header">
             <h1 class="section-title" id="settingsTitle">‚öôÔ∏è Settings</h1>
             <button class="btn-success" onclick="saveAllSettings()">
                 üíæ <span id="saveSettingsBtn">Save All Settings</span>
             </button>
         </div>

         <!-- Profile Settings -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="profileSettingsTitle">üë§ Profile Settings</h3>
             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                 <div class="form-group">
                     <label class="form-label" id="displayNameLabel">Display Name:</label>
                     <input type="text" id="displayName" class="form-input" placeholder="Enter your display name">
                 </div>
                 <div class="form-group">
                     <label class="form-label" id="emailLabel">Email:</label>
                     <input type="email" id="userEmail" class="form-input" placeholder="your@email.com">
                 </div>
                 <div class="form-group">
                     <label class="form-label" id="telegramLabel">Telegram:</label>
                     <input type="text" id="userTelegram" class="form-input" placeholder="@username">
                 </div>
                 <div class="form-group">
                     <label class="form-label" id="timezoneLabel">Timezone:</label>
                     <select id="userTimezone" class="form-select">
                         <option value="UTC">UTC</option>
                         <option value="Europe/Kiev">Europe/Kiev</option>
                         <option value="Europe/Moscow">Europe/Moscow</option>
                         <option value="America/New_York">America/New_York</option>
                     </select>
                 </div>
             </div>
         </div>

         <!-- Notification Settings -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="notificationSettingsTitle">üîî Notification Settings</h3>
             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                 <div class="form-checkbox">
                     <input type="checkbox" id="emailNotifications" checked>
                     <label id="emailNotificationsLabel">Email Notifications</label>
                 </div>
                 <div class="form-checkbox">
                     <input type="checkbox" id="referralNotifications" checked>
                     <label id="referralNotificationsLabel">New Referral Alerts</label>
                 </div>
                 <div class="form-checkbox">
                     <input type="checkbox" id="systemNotifications" checked>
                     <label id="systemNotificationsLabel">System Updates</label>
                 </div>
                 <div class="form-checkbox">
                     <input type="checkbox" id="marketingNotifications">
                     <label id="marketingNotificationsLabel">Marketing Communications</label>
                 </div>
             </div>
         </div>

         <!-- Interface Settings -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="interfaceSettingsTitle">üé® Interface Settings</h3>
             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                 <div class="form-group">
                     <label class="form-label" id="themeLabel">Theme:</label>
                     <select id="themeSelect" class="form-select">
                         <option value="dark" id="darkTheme">Dark (Default)</option>
                         <option value="light" id="lightTheme">Light</option>
                         <option value="auto" id="autoTheme">Auto</option>
                     </select>
                 </div>
                 <div class="form-group">
                     <label class="form-label" id="languageLabel">Language:</label>
                     <select id="languageSelect" class="form-select">
                         <option value="en">English</option>
                         <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                         <option value="ua">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                     </select>
                 </div>
                 <div class="form-checkbox">
                     <input type="checkbox" id="reducedMotion">
                     <label id="reducedMotionLabel">Reduce Animations</label>
                 </div>
                 <div class="form-checkbox">
                     <input type="checkbox" id="autoSave" checked>
                     <label id="autoSaveLabel">Auto-save Settings</label>
                 </div>
             </div>
         </div>

         <!-- Security Settings -->
         <div class="referral-section">
             <h3 style="color: #FFD700; margin-bottom: 20px;" id="securitySettingsTitle">üîê Security Settings</h3>
             <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                 <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px;">
                     <h4 style="color: #FFD700; margin-bottom: 15px;" id="walletSecurityTitle">Wallet Security</h4>
                     <div class="form-checkbox">
                         <input type="checkbox" id="autoDisconnect" checked>
                         <label id="autoDisconnectLabel">Auto-disconnect after 30 minutes</label>
                     </div>
                     <div class="form-checkbox">
                         <input type="checkbox" id="requireConfirmation" checked>
                         <label id="requireConfirmationLabel">Require confirmation for transactions</label>
                     </div>
                 </div>
                 <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px;">
                     <h4 style="color: #FFD700; margin-bottom: 15px;" id="dataSecurityTitle">Data Security</h4>
                     <button class="btn-secondary" onclick="exportUserData()" style="width: 100%; margin-bottom: 10px;">
                         üì• <span id="exportDataBtn">Export My Data</span>
                     </button>
                     <button class="btn-danger" onclick="clearAllData()" style="width: 100%;">
                         üóëÔ∏è <span id="clearDataBtn">Clear All Data</span>
                     </button>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <!-- ‚úÖ CRM MODAL -->
 <div class="crm-modal" id="crmModal">
     <div class="crm-modal-content">
         <div class="crm-header">
             <h2 class="crm-title" id="crmModalTitle">CRM Contact Details</h2>
             <button class="close-btn" onclick="closeCRMModal()">√ó</button>
         </div>
         
         <div class="crm-tabs">
             <button class="crm-tab active" onclick="switchCRMTab('info')" data-tab="info" id="infoTab">üìã Info</button>
             <button class="crm-tab" onclick="switchCRMTab('notes')" data-tab="notes" id="notesTab">üìù Notes</button>
             <button class="crm-tab" onclick="switchCRMTab('history')" data-tab="history" id="historyTab">üìä History</button>
             <button class="crm-tab" onclick="switchCRMTab('chat')" data-tab="chat" id="chatTab">üí¨ Chat</button>
         </div>
         
         <div class="crm-content active" id="infoContent">
             <div id="contactInfo">
                 <p><strong id="contactNameLabel">Name:</strong> <span id="contactName">-</span></p>
                 <p><strong id="contactPlatformLabel">Platform:</strong> <span id="contactPlatform">-</span></p>
                 <p><strong id="contactDetailsLabel">Contact:</strong> <span id="contactDetails">-</span></p>
                 <p><strong id="contactSourceLabel">Source:</strong> <span id="contactSource">-</span></p>
                 <p><strong id="contactStatusLabel">Status:</strong> <span id="contactStatus">-</span></p>
             </div>
         </div>
         
         <div class="crm-content" id="notesContent">
             <textarea class="notes-textarea" id="contactNotes" placeholder="Add your notes about this contact..."></textarea>
             <button class="save-btn" onclick="saveContactNotes()">
                 üíæ <span id="saveNotesBtn">Save Notes</span>
             </button>
         </div>
         
         <div class="crm-content" id="historyContent">
             <div id="contactHistory">
                 <p style="color: #888; text-align: center; padding: 20px;" id="noHistoryText">No interaction history yet.</p>
             </div>
         </div>
         
         <div class="crm-content" id="chatContent">
             <div class="chat-container">
                 <div class="chat-messages" id="chatMessages">
                     <p style="color: #888; text-align: center; padding: 20px;" id="noChatText">No messages yet. Start a conversation!</p>
                 </div>
                 <div class="chat-input-area">
                     <input type="text" class="chat-input" id="chatInput" placeholder="Type your message...">
                     <button class="chat-send-btn" onclick="sendChatMessage()">
                         üì§ <span id="sendBtn">Send</span>
                     </button>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <!-- ‚úÖ SURVEY CREATOR MODAL -->
 <div class="crm-modal" id="surveyModal" style="display: none;">
     <div class="crm-modal-content" style="max-width: 800px;">
         <div class="crm-header">
             <h2 class="crm-title" id="surveyModalTitle">üìä Create New Survey</h2>
             <button class="close-btn" onclick="closeSurveyModal()">√ó</button>
         </div>
         
         <div style="margin-bottom: 20px;">
             <div class="form-group">
                 <label class="form-label" id="surveyTitleLabel">Survey Title:</label>
                 <input type="text" id="surveyTitle" class="form-input" placeholder="Enter survey title...">
             </div>
             <div class="form-group">
                 <label class="form-label" id="surveyDescLabel">Description:</label>
                 <textarea id="surveyDescription" class="form-textarea" placeholder="Survey description..."></textarea>
             </div>
         </div>
         
         <div style="margin-bottom: 20px;">
             <h4 style="color: #FFD700; margin-bottom: 15px;" id="questionsTitle">Questions:</h4>
             <div id="questionsList">
                 <!-- Questions will be added dynamically -->
             </div>
             <button class="btn-secondary" onclick="addQuestion()" style="margin-top: 10px;">
                 ‚ûï <span id="addQuestionBtn">Add Question</span>
             </button>
         </div>
         
         <div style="text-align: center; padding-top: 20px; border-top: 1px solid rgba(255,215,0,0.3);">
             <button class="btn-success" onclick="saveSurvey()" style="margin-right: 10px;">
                 üíæ <span id="saveSurveyBtn">Save Survey</span>
             </button>
             <button class="btn-primary" onclick="publishSurvey()">
                 üöÄ <span id="publishSurveyBtn">Publish Survey</span>
             </button>
         </div>
     </div>
 </div>

 <!-- ‚úÖ POST EDITOR MODAL -->
 <div class="crm-modal" id="postEditor" style="display: none;">
     <div class="crm-modal-content" style="max-width: 800px;">
         <div class="crm-header">
             <h2 class="crm-title" id="postEditorTitle">‚úçÔ∏è Post Editor</h2>
             <div style="display: flex; gap: 10px;">
                 <button class="btn-success" onclick="savePost()">üíæ <span id="savePostBtn">Save</span></button>
                 <button class="btn-primary" onclick="publishPost()">üöÄ <span id="publishPostBtn">Publish</span></button>
                 <button class="close-btn" onclick="closeEditor()">√ó</button>
             </div>
         </div>
         
         <div>
             <div class="form-group">
                 <input type="text" id="postTitle" class="form-input" placeholder="Enter post title..." style="font-size: 18px; font-weight: bold;">
             </div>
             
             <!-- Toolbar -->
             <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,215,0,0.2); border-radius: 10px; padding: 10px; margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                 <button class="btn-secondary" onclick="formatText('bold')" style="padding: 8px 12px; font-weight: bold;">B</button>
                 <button class="btn-secondary" onclick="formatText('italic')" style="padding: 8px 12px; font-style: italic;">I</button>
                 <button class="btn-secondary" onclick="formatText('underline')" style="padding: 8px 12px; text-decoration: underline;">U</button>
                 <button class="btn-secondary" onclick="addImage()">üñºÔ∏è Image</button>
                 <button class="btn-secondary" onclick="addVideo()">üé• Video</button>
                 <button class="btn-secondary" onclick="addLink()">üîó Link</button>
             </div>
             
             <!-- Editor Area -->
             <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: 400px;">
                 <div>
                     <h4 style="color: #FFD700; margin-bottom: 10px;" id="editorLabel">üìù Editor</h4>
                     <textarea id="postContent" class="form-textarea" placeholder="Write your post content here..." style="height: 350px; resize: none; font-family: inherit; font-size: 14px; line-height: 1.5;"></textarea>
                 </div>
                 <div>
                     <h4 style="color: #FFD700; margin-bottom: 10px;" id="previewLabel">üëÅÔ∏è Preview</h4>
                     <div id="postPreview" style="height: 350px; background: rgba(255,255,255,0.05); border: 2px solid rgba(255,215,0,0.2); border-radius: 12px; padding: 15px; color: #FFF; overflow-y: auto; font-size: 14px; line-height: 1.5;">
                         <p style="color: #888;" id="previewPlaceholder">Preview will appear here...</p>
                     </div>
                 </div>
             </div>
             
             <!-- Metadata -->
             <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,215,0,0.2);">
                 <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                     <div class="form-group">
                         <label class="form-label" id="tagsLabel">Tags (comma separated):</label>
                         <input type="text" id="postTags" class="form-input" placeholder="marketing, business, tips">
                     </div>
                     <div class="form-group">
                         <label class="form-label" id="statusLabel">Status:</label>
                         <select id="postStatus" class="form-select">
                             <option value="draft" id="draftOption">Draft</option>
                             <option value="published" id="publishedOption">Published</option>
                         </select>
                     </div>
                 </div>
             </div>
         </div>
     </div>
 </div>

 <!-- ‚úÖ BLOG SETTINGS MODAL -->
 <div class="crm-modal" id="blogSettings" style="display: none;">
     <div class="crm-modal-content">
         <div class="crm-header">
             <h2 class="crm-title" id="blogSettingsTitle">‚öôÔ∏è Blog Settings</h2>
             <button class="close-btn" onclick="closeBlogSettings()">√ó</button>
         </div>
         
         <div class="crm-tabs">
             <button class="crm-tab active" onclick="switchSettingsTab('general')" data-tab="general" id="generalTab">General</button>
             <button class="crm-tab" onclick="switchSettingsTab('design')" data-tab="design" id="designTab">Design</button>
             <button class="crm-tab" onclick="switchSettingsTab('domain')" data-tab="domain" id="domainTab">Domain</button>
         </div>
         
         <!-- General Settings -->
         <div class="crm-content active" id="generalSettings">
             <div class="form-group">
                 <label class="form-label" id="blogTitleLabel">Blog Title:</label>
                 <input type="text" id="blogTitleInput" class="form-input" placeholder="My Awesome Blog">
             </div>
             
             <div class="form-group">
                 <label class="form-label" id="blogDescriptionLabel">Description:</label>
                 <textarea id="blogDescriptionInput" class="form-textarea" placeholder="Tell people what your blog is about..."></textarea>
             </div>
             
             <div class="form-group">
                 <label class="form-label" id="logoLabel">Logo:</label>
                 <div style="display: flex; gap: 15px; align-items: center;">
                     <input type="file" id="logoUpload" accept="image/*" style="display: none;">
                     <button class="btn-secondary" onclick="document.getElementById('logoUpload').click()">
                         üìÅ <span id="uploadLogoBtn">Upload Logo</span>
                     </button>
                     <div id="logoPreview" style="width: 50px; height: 50px; border-radius: 50%; background: rgba(255,215,0,0.2); display: flex; align-items: center; justify-content: center; font-size: 20px;">üìù</div>
                 </div>
             </div>
         </div>
         
         <!-- Design Settings -->
         <div class="crm-content" id="designSettings" style="display: none;">
             <div style="margin-bottom: 25px;">
                 <h4 style="color: #FFD700; margin-bottom: 15px;" id="chooseThemeTitle">Choose Theme:</h4>
                 <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                     <div class="theme-option" data-theme="classic" onclick="selectTheme('classic')" style="background: linear-gradient(45deg, #4A90E2, #357ABD); border: 2px solid transparent; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; color: white;">
                         <div style="font-size: 24px; margin-bottom: 8px;">üé®</div>
                         <div id="classicTheme">Classic</div>
                     </div>
                     <div class="theme-option" data-theme="modern" onclick="selectTheme('modern')" style="background: linear-gradient(45deg, #667eea, #764ba2); border: 2px solid transparent; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; color: white;">
                         <div style="font-size: 24px; margin-bottom: 8px;">‚ú®</div>
                         <div id="modernTheme">Modern</div>
                     </div>
                     <div class="theme-option" data-theme="dark" onclick="selectTheme('dark')" style="background: linear-gradient(45deg, #2c3e50, #34495e); border: 2px solid transparent; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; color: white;">
                         <div style="font-size: 24px; margin-bottom: 8px;">üåô</div>
                         <div id="darkThemeOption">Dark</div>
                     </div>
                     <div class="theme-option" data-theme="gradient" onclick="selectTheme('gradient')" style="background: linear-gradient(45deg, #ff9a9e, #fecfef, #fecfef); border: 2px solid transparent; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; color: white;">
                         <div style="font-size: 24px; margin-bottom: 8px;">üåà</div>
                         <div id="gradientTheme">Gradient</div>
                     </div>
                 </div>
             </div>
             
             <div style="margin-bottom: 20px;">
                 <h4 style="color: #FFD700; margin-bottom: 15px;" id="colorsTitle">Colors:</h4>
                 <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                     <div class="form-group">
                         <label class="form-label" id="primaryColorLabel">Primary Color:</label>
                         <input type="color" id="primaryColorPicker" value="#FFD700" style="width: 100%; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                     </div>
                     <div class="form-group">
                         <label class="form-label" id="secondaryColorLabel">Secondary Color:</label>
                         <input type="color" id="secondaryColorPicker" value="#FFA500" style="width: 100%; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                     </div>
                 </div>
             </div>
         </div>
         
         <!-- Domain Settings -->
         <div class="crm-content" id="domainSettings" style="display: none;">
             <div style="margin-bottom: 25px;">
                 <h4 style="color: #FFD700; margin-bottom: 15px;" id="blogAddressTitle">Blog Address:</h4>
                 <div style="display: flex; align-items: center; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,215,0,0.3); border-radius: 8px; padding: 12px;">
                     <span style="color: #CCC;">https://</span>
                     <input type="text" id="subdomainInput" placeholder="my-blog" class="form-input" style="background: transparent; border: none; color: #FFF; flex: 1; outline: none; padding: 0 8px;">
                     <span style="color: #CCC;">.cardgift.bnb</span>
                 </div>
                 <div id="domainStatus" style="margin-top: 8px; color: #4CAF50; font-size: 12px;">‚úÖ <span id="availableText">Available</span></div>
             </div>
             
             <div id="customDomainSection" style="margin-bottom: 20px; opacity: 0.5;">
                 <h4 style="color: #FFD700; margin-bottom: 15px;" id="customDomainTitle">Custom Domain (Super Admin+):</h4>
                 <input type="text" id="customDomainInput" placeholder="myblog.com" disabled class="form-input">
                 <div style="margin-top: 8px; color: #888; font-size: 12px;" id="upgradeCustomDomainText">Upgrade to Super Admin to use custom domains</div>
             </div>
         </div>
         
         <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,215,0,0.2); text-align: center;">
             <button class="btn-success" onclick="saveBlogSettings()" style="margin-right: 10px;">
                 üíæ <span id="saveBlogSettingsBtn">Save Settings</span>
             </button>
             <button class="btn-danger" onclick="closeBlogSettings()">
                 <span id="cancelBtn">Cancel</span>
             </button>
         </div>
     </div>
 </div>

 <!-- Notification Container -->
 <div id="notificationContainer"></div>

 <script>
     // ‚úÖ –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
     let web3;
     let contract;
     let userWalletAddress = null;
     let isWeb3Connected = false;
     let currentSection = 'dashboard';
     let currentLanguage = 'en';
     let notificationCount = 0;

     // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ö–û–ù–°–¢–ê–ù–¢–´ –£–†–û–í–ù–ï–ô
     const USER_LEVELS = {
         0: 'GUEST',        // –ù–µ–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π - 3 –æ—Ç–∫—Ä—ã—Ç–∫–∏
         1: 'USER',         // –ö–∞–Ω–¥–∏–¥–∞—Ç - 0.0015 opBNB - 20 –æ—Ç–∫—Ä—ã—Ç–æ–∫
         2: 'MINI_ADMIN',   // –ú–∏–Ω–∏ –ê–¥–º–∏–Ω - 0.0225 opBNB - 100 –æ—Ç–∫—Ä—ã—Ç–æ–∫  
         3: 'ADMIN',        // –ê–¥–º–∏–Ω - 0.2145 opBNB - 200 –æ—Ç–∫—Ä—ã—Ç–æ–∫
         4: 'SUPER_ADMIN',  // –°—É–ø–µ—Ä –ê–¥–º–∏–Ω - 0.2145 opBNB - 500 –æ—Ç–∫—Ä—ã—Ç–æ–∫
         5: 'MANAGER',      // –£–ø—Ä–∞–≤–ª—è—é—â–∏–π - –ù–∞–∑–Ω–∞—á–∞–µ—Ç –ê–≤—Ç–æ—Ä
         6: 'AUTHOR'        // –ê–≤—Ç–æ—Ä - –ë–µ–∑–ª–∏–º–∏—Ç
     };

     const ARCHIVE_LIMITS = {
         GUEST: 3,
         USER: 20,
         MINI_ADMIN: 100,
         ADMIN: 200,
         SUPER_ADMIN: 500,
         MANAGER: 1000,
         AUTHOR: -1 // –ë–µ–∑–ª–∏–º–∏—Ç
     };

     const ACTIVATION_PRICES = {
         USER: '0.0015',
         MINI_ADMIN: '0.0225',
         ADMIN: '0.2145',
         SUPER_ADMIN: '0.2145'
     };

     // ‚úÖ PUSH NOTIFICATION LIMITS
     const PUSH_LIMITS = {
         GUEST: { daily: 0, platforms: [] },
         USER: { daily: 0, platforms: [] },
         MINI_ADMIN: { daily: 0, platforms: [] }, // –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
         ADMIN: { daily: 1, platforms: ['single'] }, // 1 —Ä–∞–∑ –≤ –¥–µ–Ω—å –Ω–∞ 1 –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
         SUPER_ADMIN: { daily: 2, platforms: ['multiple'] }, // 2 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
         MANAGER: { daily: 10, platforms: ['all'] }, // –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
         AUTHOR: { daily: -1, platforms: ['all'] } // –ë–µ–∑–ª–∏–º–∏—Ç
     };

     // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ê–î–†–ï–°–ê –û–°–ù–û–í–ê–¢–ï–õ–ï–ô
     const FOUNDERS_ADDRESSES = [
         '0x742B27A4E99C9c48Eb26aE88c04F1f52E1735b78',
         '0x2A4E99C9C48eb26ae88C04f1F52e1735B78742b2'
     ];

     // ‚úÖ –î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
     let currentUser = {
         userId: 'NOT_CONNECTED',
         level: 0,
         isActive: false,
         walletAddress: null
     };

     // ‚úÖ –ö–û–ù–¢–ê–ö–¢–´ –ò CRM –î–ê–ù–ù–´–ï
     let contactsData = {
         all: [],
         filtered: [],
         searchTerm: '',
         selectedCategory: 'all',
         customGroups: []
     };

     let apiIntegrations = {
         telegram: { token: '', connected: false },
         whatsapp: { token: '', phoneId: '', connected: false },
         email: { host: '', port: '', user: '', pass: '', connected: false }
     };

     // ‚úÖ –†–ï–§–ï–†–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï
     let referralData = {
         levels: { 1: [], 2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [] },
         users: {}
     };

     // ‚úÖ –°–ò–°–¢–ï–ú–´ –ê–†–•–ò–í–ê, –ë–õ–û–ì–ê, MLM, –û–ü–†–û–°–û–í
     let archiveData = { cards: [], contacts: [] };
     let blogData = { posts: [], settings: {} };
     let mlmSettings = { levels: {1: 10, 2: 7, 3: 5, 4: 3, 5: 2, 6: 1, 7: 1, 8: 0.5, 9: 0.5}, isActive: false };
     let surveyData = { surveys: [], responses: {} };

     // ‚úÖ –ü–ï–†–ï–í–û–î–´ (–†–ê–°–®–ò–†–ï–ù–ù–´–ï –î–õ–ò –ö–û–ù–¢–ê–ö–¢–û–í)
     const translations = {
         en: {
             // Dashboard
             dashboardTitle: "üìä Dashboard Overview",
             totalReferralsLabel: "Total Team",
             activeReferralsLabel: "Active Users", 
             totalEarningsLabel: "Earnings (opBNB)",
             conversionLabel: "Conversion",
             quickActionsTitle: "üöÄ Quick Actions",
             createCardBtn: "Create Card",
             manageContactsBtn: "Manage Contacts",
             viewTeamBtn: "View Team",
             copyLinkBtn: "Copy Referral Link",
             recentActivityTitle: "üìä Recent Activity",
             noActivityText: "No recent activity",

             // Contacts System
             contactsTitle: "üë• Contact Management",
             addContactBtn: "Add Contact",
             importExportBtn: "Import/Export",
             searchContactsTitle: "Search Contacts",
             allCategoriesOption: "All Categories",
             telegramCategory: "Telegram",
             whatsappCategory: "WhatsApp",
             emailCategory: "Email",
             phoneCategory: "Phone",
             instagramCategory: "Instagram",
             facebookCategory: "Facebook",
             tiktokCategory: "TikTok",
             twitterCategory: "Twitter/X",
             viberCategory: "Viber",
             allCategory: "All",
             contactListTitle: "Contact Database",
             nameHeader: "Name",
             platformHeader: "Platform",
             contactHeader: "Contact",
             consentHeader: "Push Consent",
             sourceHeader: "Source",
             levelHeader: "User Level",
             dateHeader: "Added Date",
             actionsHeader: "Actions",
             noContactsText: "Connect wallet to manage contacts",
             
             // API Integration
             apiIntegrationTitle: "API Integration",
             apiIntegrationDesc: "Connect your messenger APIs to send push notifications directly to your contacts.",
             telegramApiTitle: "Telegram Bot API",
             whatsappApiTitle: "WhatsApp Business API",
             emailApiTitle: "Email SMTP",
             testTelegramBtn: "Test Connection",
             saveTelegramBtn: "Save",
             telegramStatusText: "Not Connected",
             testWhatsappBtn: "Test Connection",
             saveWhatsappBtn: "Save",
             whatsappStatusText: "Not Connected",
             testEmailBtn: "Test Connection",
             saveEmailBtn: "Save",
             emailStatusText: "Not Connected",
             
             // Push Notifications
             pushNotificationsTitle: "Push Notifications",
             pushLimitsTitle: "Daily Limits:",
             selectTargetTitle: "Select Target Audience",
             targetAll: "All Contacts",
             targetGuests: "Guests Only",
             targetMiniAdmins: "Mini Admins",
             targetAdmins: "Admins Only",
             targetSuperAdmins: "Super Admins",
             targetCoauthors: "Co-authors",
             customGroupsTitle: "Custom Groups",
             createGroupBtn: "Create Group",
             composeMessageTitle: "Compose Message",
             charactersText: "characters",
             sendPushText: "SEND PUSH NOTIFICATION",
             
             // Import/Export
             importExportTitle: "Import/Export Contacts",
             importTitle: "Import Contacts",
             importDesc: "Upload CSV, Excel, or text file with your contacts to add them to your database.",
             chooseFileBtn: "Choose File",
             supportedFormatsText: "Supported: CSV, Excel, TXT",
             exportTitle: "Export Contacts",
             exportDesc: "Download your contacts database as CSV file for backup or use in other applications.",
             exportContactsBtn: "Export All Contacts",
             exportFormatText: "Format: CSV (Excel compatible)",

             // Menu Items
             menuDashboard: "Dashboard",
             menuContacts: "Contacts",
             menuArchive: "Archive",
             menuReferrals: "Referrals",
             menuCRM: "CRM",
             menuSurveys: "Surveys",
             menuBlog: "My Blog",
             menuMailings: "Mailings",
             menuAnalytics: "Analytics",
             menuMLM: "Partner Program",
             menuCoauthors: "Co-authors",
             menuWallet: "Wallet",
             menuSettings: "Settings",

             // Archive
             archiveTitle: "üìÅ Card Archive",
             archiveUsage: "Used:",
             upgradeBtn: "Upgrade",
             createNewBtn: "Create New",
             exportArchiveBtn: "Export",
             filterAll: "All Cards",
             filterRecent: "Recent",
             filterPopular: "Most Viewed",
             filterClicked: "Most Clicked",
             searchBtn: "Search",
             emptyArchiveTitle: "Your archive is empty",
             emptyArchiveText: "Create your first card to start building your collection!",
             createFirstCardBtn: "Create First Card",

             // Surveys
             surveysTitle: "üìä Surveys & Polls",
             createSurveyBtn: "Create Survey",
             templatesBtn: "Templates",
             totalSurveysLabel: "Total Surveys",
             activeSurveysLabel: "Active",
             responsesLabel: "Total Responses", 
             responseRateLabel: "Response Rate",
             statusAll: "All Status",
             statusActive: "Active",
             statusDraft: "Draft",
             statusCompleted: "Completed",
             statusArchived: "Archived",
             filterSurveysBtn: "Filter",
             emptySurveysTitle: "No surveys yet",
             emptySurveysText: "Create your first survey to start collecting feedback!",
             createFirstSurveyBtn: "Create First Survey",

             // Blog
             blogTitle: "üìù My Blog",
             newPostBtn: "New Post",
             blogSettingsBtn: "Settings",
             previewBlogBtn: "Preview",
             publishBlogBtn: "Publish",
             totalPostsLabel: "Posts",
             totalBlogViewsLabel: "Views",
             totalLikesLabel: "Likes",
             totalCommentsLabel: "Comments",
             recentPostsTitle: "Recent Posts",
             emptyBlogTitle: "Start your blog journey",
             emptyBlogText: "Create your first post and share your thoughts with the world!",
             writeFirstPostBtn: "Write First Post",

             // MLM
             mlmTitle: "üí∞ Partner Program",
             mlmSubtitle: "Manage your multi-level marketing campaigns",
             totalPartnersLabel: "Total Partners",
             totalCommissionsLabel: "Total Commissions (opBNB)",
             monthlyEarningsLabel: "This Month",
             mlmConversionLabel: "Conversion Rate",
             mlmConfigTitle: "‚öôÔ∏è MLM Configuration",
             commissionStructureTitle: "Commission Structure (9 Levels):",
             saveConfigBtn: "Save Configuration",
             resetConfigBtn: "Reset to Default",
             commissionPreviewTitle: "üí° Commission Preview:",
             activeCampaignsTitle: "üöÄ Active Campaigns",
             noCampaignsTitle: "No active campaigns",
             noCampaignsText: "Create your first marketing campaign to start earning commissions.",
             createCampaignBtn: "Create Campaign",
             mlmAccessTitle: "MLM Access Restricted",
             mlmAccessText: "Partner program is available starting from Super Admin level.",
             upgradeToSuperBtn: "Upgrade to Super Admin",

             // Wallet
             walletTitle: "üí≥ Wallet & Activation",
             walletConnectionTitle: "üîó Wallet Connection",
             activationTitle: "üöÄ Account Activation",
             candidateLevel: "–ö–∞–Ω–¥–∏–¥–∞—Ç (User)",
             miniAdminLevel: "Mini Admin",
             adminLevel: "Admin", 
             superAdminLevel: "Super Admin",
             benefitsTitle: "üí° Activation Benefits:",
             userBenefits: "Archive (20 cards), Contact management, Basic stats",
             miniAdminBenefits: "+ CRM system, Referral tracking (100 cards)",
             adminBenefits: "+ Blog creation, Mass mailings, Surveys (200 cards)",
             superAdminBenefits: "+ Partner program, Custom domain (500 cards)",
             globalWayBtn: "GlobalWay Integration",
             networkInfoTitle: "üåê Network Information",
             networkLabel: "Network:",
             chainIdLabel: "Chain ID:",
             rpcLabel: "RPC URL:",
             explorerLabel: "Explorer:",

             // Settings
             settingsTitle: "‚öôÔ∏è Settings",
             saveSettingsBtn: "Save All Settings",
             profileSettingsTitle: "üë§ Profile Settings",
             displayNameLabel: "Display Name:",
             emailLabel: "Email:",
             telegramLabel: "Telegram:",
             timezoneLabel: "Timezone:",
             notificationSettingsTitle: "üîî Notification Settings",
             emailNotificationsLabel: "Email Notifications",
             referralNotificationsLabel: "New Referral Alerts",
             systemNotificationsLabel: "System Updates",
             marketingNotificationsLabel: "Marketing Communications",
             interfaceSettingsTitle: "üé® Interface Settings",
             themeLabel: "Theme:",
             darkTheme: "Dark (Default)",
             lightTheme: "Light",
             autoTheme: "Auto",
             languageLabel: "Language:",
             reducedMotionLabel: "Reduce Animations",
             autoSaveLabel: "Auto-save Settings",
             securitySettingsTitle: "üîê Security Settings",
             walletSecurityTitle: "Wallet Security",
             autoDisconnectLabel: "Auto-disconnect after 30 minutes",
             requireConfirmationLabel: "Require confirmation for transactions",
             dataSecurityTitle: "Data Security",
             exportDataBtn: "Export My Data",
             clearDataBtn: "Clear All Data",

             // Common
             saveBtn: "Save",
             cancelBtn: "Cancel",
             closeBtn: "Close",
             loadingText: "Loading...",
             successText: "Success!",
             errorText: "Error",
             warningText: "Warning",
             infoText: "Information"
         },

         ru: {
             // Dashboard
             dashboardTitle: "üìä –û–±–∑–æ—Ä –ø–∞–Ω–µ–ª–∏",
             totalReferralsLabel: "–í—Å–µ–≥–æ –≤ –∫–æ–º–∞–Ω–¥–µ",
             activeReferralsLabel: "–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",
             totalEarningsLabel: "–î–æ—Ö–æ–¥—ã (opBNB)",
             conversionLabel: "–ö–æ–Ω–≤–µ—Ä—Å–∏—è",
             quickActionsTitle: "üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è",
             createCardBtn: "–°–æ–∑–¥–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∫—É",
             manageContactsBtn: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",
             viewTeamBtn: "–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã",
             copyLinkBtn: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ. —Å—Å—ã–ª–∫—É",
             recentActivityTitle: "üìä –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
             noActivityText: "–ù–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",

             // Contacts System
             contactsTitle: "üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",
             addContactBtn: "–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç",
             importExportBtn: "–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç",
             searchContactsTitle: "–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
             allCategoriesOption: "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",
             telegramCategory: "Telegram",
             whatsappCategory: "WhatsApp",
             emailCategory: "Email",
             phoneCategory: "–¢–µ–ª–µ—Ñ–æ–Ω",
             instagramCategory: "Instagram",
             facebookCategory: "Facebook",
             tiktokCategory: "TikTok",
             twitterCategory: "Twitter/X",
             viberCategory: "Viber",
             allCategory: "–í—Å–µ",
             contactListTitle: "–ë–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
             nameHeader: "–ò–º—è",
             platformHeader: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞",
             contactHeader: "–ö–æ–Ω—Ç–∞–∫—Ç",
             consentHeader: "–°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –ø—É—à",
             sourceHeader: "–ò—Å—Ç–æ—á–Ω–∏–∫",
             levelHeader: "–£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
             dateHeader: "–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è",
             actionsHeader: "–î–µ–π—Å—Ç–≤–∏—è",
             noContactsText: "–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",

             // API Integration
             apiIntegrationTitle: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API",
             apiIntegrationDesc: "–ü–æ–¥–∫–ª—é—á–∏—Ç–µ API –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤–∞—à–∏–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º.",
             telegramApiTitle: "Telegram Bot API",
             whatsappApiTitle: "WhatsApp Business API",
             emailApiTitle: "Email SMTP",
             testTelegramBtn: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ",
             saveTelegramBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
             telegramStatusText: "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω",
             testWhatsappBtn: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ",
             saveWhatsappBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
             whatsappStatusText: "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω",
             testEmailBtn: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ",
             saveEmailBtn: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
             emailStatusText: "–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω",

             // Push Notifications
             pushNotificationsTitle: "–ü—É—à —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è",
             pushLimitsTitle: "–î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã:",
             selectTargetTitle: "–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é",
             targetAll: "–í—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã",
             targetGuests: "–¢–æ–ª—å–∫–æ –≥–æ—Å—Ç–∏",
             targetMiniAdmins: "–ú–∏–Ω–∏ –∞–¥–º–∏–Ω—ã",
             targetAdmins: "–¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã",
             targetSuperAdmins: "–°—É–ø–µ—Ä –∞–¥–º–∏–Ω—ã",
             targetCoauthors: "–°–æ–∞–≤—Ç–æ—Ä—ã",
             customGroupsTitle: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã",
             createGroupBtn: "–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É",
             composeMessageTitle: "–°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ",
             charactersText: "—Å–∏–º–≤–æ–ª–æ–≤",
             sendPushText: "–û–¢–ü–†–ê–í–ò–¢–¨ –ü–£–® –£–í–ï–î–û–ú–õ–ï–ù–ò–ï",
             
             // Import/Export
             importExportTitle: "–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
             importTitle: "–ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
             importDesc: "–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV, Excel –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.",
             chooseFileBtn: "–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª",
             supportedFormatsText: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: CSV, Excel, TXT",
             exportTitle: "–≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤",
             exportDesc: "–°–∫–∞—á–∞–π—Ç–µ –±–∞–∑—É –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ –≤–∏–¥–µ CSV —Ñ–∞–π–ª–∞ –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.",
             exportContactsBtn: "–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã",
             exportFormatText: "–§–æ—Ä–º–∞—Ç: CSV (—Å–æ–≤–º–µ—Å—Ç–∏–º —Å Excel)",

             // Menu Items
             menuDashboard: "–ü–∞–Ω–µ–ª—å",
             menuContacts: "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
             menuArchive: "–ê—Ä—Ö–∏–≤",
             menuReferrals: "–†–µ—Ñ–µ—Ä–∞–ª—ã",
             menuCRM: "CRM",
             menuSurveys: "–û–ø—Ä–æ—Å—ã",
             menuBlog: "–ú–æ–π –±–ª–æ–≥",
             menuMailings: "–†–∞—Å—Å—ã–ª–∫–∏",
             menuAnalytics: "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞",
             menuMLM: "–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞",
             menuCoauthors: "–°–æ–∞–≤—Ç–æ—Ä—ã",
             menuWallet: "–ö–æ—à–µ–ª–µ–∫",
             menuSettings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",

             // Archive
             archiveTitle: "üìÅ –ê—Ä—Ö–∏–≤ –æ—Ç–∫—Ä—ã—Ç–æ–∫",
             archiveUsage: "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:",
             upgradeBtn: "–ü–æ–≤—ã—Å–∏—Ç—å",
             createNewBtn: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é",
             exportArchiveBtn: "–≠–∫—Å–ø–æ—Ä—Ç",
             filterAll: "–í—Å–µ –æ—Ç–∫—Ä—ã—Ç–∫–∏",
             filterRecent: "–ù–µ–¥–∞–≤–Ω–∏–µ",
             filterPopular: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ",
             filterClicked: "–ß–∞—Å—Ç–æ –∫–ª–∏–∫–∞–µ–º—ã–µ",
             searchBtn: "–ü–æ–∏—Å–∫",
             emptyArchiveTitle: "–í–∞—à –∞—Ä—Ö–∏–≤ –ø—É—Å—Ç",
             emptyArchiveText: "–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é!",
             createFirstCardBtn: "–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –æ—Ç–∫—Ä—ã—Ç–∫—É",

             // –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤...
             // (–°–æ–∫—Ä–∞—â–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –í–°–ï –ø–µ—Ä–µ–≤–æ–¥—ã)
         },

         ua: {
             // Dashboard
             dashboardTitle: "üìä –û–≥–ª—è–¥ –ø–∞–Ω–µ–ª—ñ",
             totalReferralsLabel: "–í—Å—å–æ–≥–æ –≤ –∫–æ–º–∞–Ω–¥—ñ",
             activeReferralsLabel: "–ê–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
             totalEarningsLabel: "–î–æ—Ö–æ–¥–∏ (opBNB)",
             conversionLabel: "–ö–æ–Ω–≤–µ—Ä—Å—ñ—è",
             quickActionsTitle: "üöÄ –®–≤–∏–¥–∫—ñ –¥—ñ—ó",
             createCardBtn: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –ª–∏—Å—Ç—ñ–≤–∫—É",
             manageContactsBtn: "–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",
             viewTeamBtn: "–ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–º–∞–Ω–¥–∏",
             copyLinkBtn: "–ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ—Ñ. –ø–æ—Å–∏–ª–∞–Ω–Ω—è",
             recentActivityTitle: "üìä –û—Å—Ç–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å",
             noActivityText: "–ù–µ–º–∞—î –æ—Å—Ç–∞–Ω–Ω—å–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ",

             // Contacts System
             contactsTitle: "üë• –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",
             addContactBtn: "–î–æ–¥–∞—Ç–∏ –∫–æ–Ω—Ç–∞–∫—Ç",
             importExportBtn: "–Ü–º–ø–æ—Ä—Ç/–ï–∫—Å–ø–æ—Ä—Ç",
             searchContactsTitle: "–ü–æ—à—É–∫ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
             allCategoriesOption: "–í—Å—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",
             telegramCategory: "Telegram",
             whatsappCategory: "WhatsApp",
             emailCategory: "Email",
             phoneCategory: "–¢–µ–ª–µ—Ñ–æ–Ω",
             instagramCategory: "Instagram",
             facebookCategory: "Facebook",
             tiktokCategory: "TikTok",
             twitterCategory: "Twitter/X",
             viberCategory: "Viber",
             allCategory: "–í—Å—ñ",
             contactListTitle: "–ë–∞–∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
             nameHeader: "–Ü–º'—è",
             platformHeader: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞",
             contactHeader: "–ö–æ–Ω—Ç–∞–∫—Ç",
             consentHeader: "–ó–≥–æ–¥–∞ –Ω–∞ –ø—É—à",
             sourceHeader: "–î–∂–µ—Ä–µ–ª–æ",
             levelHeader: "–†—ñ–≤–µ–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
             dateHeader: "–î–∞—Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è",
             actionsHeader: "–î—ñ—ó",
             noContactsText: "–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≥–∞–º–∞–Ω–µ—Ü—å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏",

             // API Integration
             apiIntegrationTitle: "–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è API",
             apiIntegrationDesc: "–ü—ñ–¥–∫–ª—é—á—ñ—Ç–µ API –º–µ—Å–µ–Ω–¥–∂–µ—Ä—ñ–≤ –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø—É—à-—Å–ø–æ–≤—ñ—â–µ–Ω—å –≤–∞—à–∏–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º.",
             telegramApiTitle: "Telegram Bot API",
             whatsappApiTitle: "WhatsApp Business API",
             emailApiTitle: "Email SMTP",
             testTelegramBtn: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è",
             saveTelegramBtn: "–ó–±–µ—Ä–µ–≥—Ç–∏",
             telegramStatusText: "–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ",
             testWhatsappBtn: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è",
             saveWhatsappBtn: "–ó–±–µ—Ä–µ–≥—Ç–∏",
             whatsappStatusText: "–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ",
             testEmailBtn: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è",
             saveEmailBtn: "–ó–±–µ—Ä–µ–≥—Ç–∏",
             emailStatusText: "–ù–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ",

             // Push Notifications
             pushNotificationsTitle: "–ü—É—à —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è",
             pushLimitsTitle: "–î–µ–Ω–Ω—ñ –ª—ñ–º—ñ—Ç–∏:",
             selectTargetTitle: "–û–±–µ—Ä—ñ—Ç—å —Ü—ñ–ª—å–æ–≤—É –∞—É–¥–∏—Ç–æ—Ä—ñ—é",
             targetAll: "–í—Å—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏",
             targetGuests: "–¢—ñ–ª—å–∫–∏ –≥–æ—Å—Ç—ñ",
             targetMiniAdmins: "–ú—ñ–Ω—ñ –∞–¥–º—ñ–Ω–∏",
             targetAdmins: "–¢—ñ–ª—å–∫–∏ –∞–¥–º—ñ–Ω–∏",
             targetSuperAdmins: "–°—É–ø–µ—Ä –∞–¥–º—ñ–Ω–∏",
             targetCoauthors: "–°–ø—ñ–≤–∞–≤—Ç–æ—Ä–∏",
             customGroupsTitle: "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –≥—Ä—É–ø–∏",
             createGroupBtn: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—Ä—É–ø—É",
             composeMessageTitle: "–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è",
             charactersText: "—Å–∏–º–≤–æ–ª—ñ–≤",
             sendPushText: "–í–Ü–î–ü–†–ê–í–ò–¢–ò –ü–£–® –°–ü–û–í–Ü–©–ï–ù–ù–Ø",

             // Import/Export
             importExportTitle: "–Ü–º–ø–æ—Ä—Ç/–ï–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
             importTitle: "–Ü–º–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
             importDesc: "–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ CSV, Excel –∞–±–æ —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª –∑ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.",
             chooseFileBtn: "–í–∏–±—Ä–∞—Ç–∏ —Ñ–∞–π–ª",
             supportedFormatsText: "–ü—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è: CSV, Excel, TXT",
             exportTitle: "–ï–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤",
             exportDesc: "–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –±–∞–∑—É –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ —É –≤–∏–≥–ª—è–¥—ñ CSV —Ñ–∞–π–ª—É –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö –¥–æ–¥–∞—Ç–∫–∞—Ö.",
             exportContactsBtn: "–ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç–∞–∫—Ç–∏",
             exportFormatText: "–§–æ—Ä–º–∞—Ç: CSV (—Å—É–º—ñ—Å–Ω–∏–π –∑ Excel)",

             // –ò —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞...
             // (–°–æ–∫—Ä–∞—â–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞)
         }
     };

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò
     window.onload = async function() {
         console.log('üöÄ CardGift Web3 Dashboard initializing...');

// ‚úÖ –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –ö–û–®–ï–õ–ï–ö
const savedWallet = walletState.load();
if (savedWallet && !userWalletAddress) {
    console.log('üîÑ Restoring wallet from previous session...');
    userWalletAddress = savedWallet.address;
    currentUser = {
        userId: savedWallet.userId,
        level: savedWallet.level,
        isActive: savedWallet.isActive,
        walletAddress: savedWallet.address
    };
}
         
         await initWeb3();
         loadSavedLanguage();
         
         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
         if (!referralData || !referralData.levels) {
             referralData = {
                 levels: { 1: [], 2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [] },
                 users: {}
             };
         }
         
         // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
         if (isWeb3Connected && userWalletAddress) {
             await checkUserAccess();

// ‚úÖ –°–û–•–†–ê–ù–Ø–ï–ú –°–û–°–¢–û–Ø–ù–ò–ï –ö–û–®–ï–õ–¨–ö–ê
if (currentUser.level > 0) {
    walletState.save({
        address: userWalletAddress,
        userId: currentUser.userId,
        level: currentUser.level,
        isActive: currentUser.isActive
    });
}
         } else {
             currentUser = {
                 userId: 'NOT_CONNECTED',
                 level: 0,
                 isActive: false,
                 walletAddress: null
             };
         }

         localStorage.setItem('currentUser', JSON.stringify(currentUser));
         
         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
         updateUserInterface();
         loadDashboardData();
         updateTime();
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
         if (currentUser.level >= 1) {
             updateArchiveLimits();
             loadUserArchive();
             loadContactsData();
         }
         
         if (currentUser.level >= 3) {
             loadBlogData();
             loadSurveyData();
         }

         if (currentUser.level >= 4) {
             loadMLMSettings();
         }
         
         console.log('‚úÖ Web3 Dashboard initialized');
         console.log('üìä Current user level:', currentUser.level);
         console.log('üìÅ Archive access:', currentUser.level >= 1 ? 'Yes' : 'No');
         console.log('üë• Contacts access:', currentUser.level >= 1 ? 'Yes' : 'No');
         console.log('üìä Survey access:', currentUser.level >= 3 ? 'Yes' : 'No');
         console.log('üìù Blog access:', currentUser.level >= 3 ? 'Yes' : 'No');
         console.log('üí∞ MLM access:', currentUser.level >= 4 ? 'Yes' : 'No');
     };

     // ‚úÖ –§–£–ù–ö–¶–ò–ò WEB3
     async function initWeb3() {
    try {
        console.log('üîç Checking for wallets...');
        
        // –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º SafePal (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
        if (window.safepal || window.safePal) {
            console.log('üõ°Ô∏è SafePal detected');
            const safepalProvider = window.safepal || window.safePal;
            if (safepalProvider.ethereum) {
                web3 = new Web3(safepalProvider.ethereum);
                isWeb3Connected = true;
                console.log('‚úÖ SafePal Web3 ready');
                return;
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—ã—á–Ω—ã–π ethereum (–º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç SafePal)
        if (window.ethereum) {
            console.log('üîó Ethereum provider detected');
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —ç—Ç–æ SafePal –∏–ª–∏ –Ω–µ—Ç
            if (window.ethereum.isSafePal) {
                console.log('üõ°Ô∏è SafePal via ethereum detected');
            } else {
                console.log('ü¶ä Other wallet (MetaMask?) detected');
            }
            web3 = new Web3(window.ethereum);
            isWeb3Connected = true;
            return;
        }
        
        console.log('‚ö†Ô∏è No Web3 wallet detected');
        isWeb3Connected = false;
    } catch (error) {
        console.error('‚ùå Web3 initialization error:', error);
        isWeb3Connected = false;
    }
}

    async function connectSafePal() {
    try {
        console.log('üõ°Ô∏è Attempting SafePal connection...');
        
        let provider = null;
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã SafePal
        if (window.safepal && window.safepal.ethereum) {
            provider = window.safepal.ethereum;
            console.log('‚úÖ Found window.safepal.ethereum');
        } else if (window.safePal && window.safePal.ethereum) {
            provider = window.safePal.ethereum;
            console.log('‚úÖ Found window.safePal.ethereum');
        } else if (window.ethereum && window.ethereum.isSafePal) {
            provider = window.ethereum;
            console.log('‚úÖ Found SafePal via window.ethereum');
        } else if (window.ethereum) {
            provider = window.ethereum;
            console.log('‚ö†Ô∏è Using fallback ethereum provider');
        }
        
        if (!provider) {
            showNotification('SafePal wallet not detected. Please refresh the page and try again.', 'error');
            return;
        }
        
        showNotification('Connecting to SafePal...', 'info');
        
        const accounts = await provider.request({ method: 'eth_requestAccounts' });
        userWalletAddress = accounts[0];
        web3 = new Web3(provider);
        
        await checkUserAccess();
        updateUserInterface();
        
        showNotification('SafePal connected successfully!', 'success');
        console.log('‚úÖ SafePal connected:', userWalletAddress);
        
    } catch (error) {
        console.error('‚ùå SafePal connection error:', error);
        showNotification('Wallet connection failed: ' + error.message, 'error');
    }
}
     async function connectMetaMask() {
         try {
             if (!window.ethereum) {
                 showNotification('MetaMask not found. Please install MetaMask extension.', 'error');
                 return;
             }

             showNotification('Connecting to MetaMask...', 'info');
             
             const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
             userWalletAddress = accounts[0];
             web3 = new Web3(window.ethereum);
             
             await checkUserAccess();
             updateUserInterface();
             
             showNotification('MetaMask connected successfully!', 'success');
             console.log('‚úÖ MetaMask connected:', userWalletAddress);
             
         } catch (error) {
             console.error('‚ùå MetaMask connection error:', error);
             showNotification('MetaMask connection failed: ' + error.message, 'error');
         }
     }

     async function connectWalletConnect() {
    try {
        showNotification('Connecting via WalletConnect...', 'info');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Web3
        if (typeof window.ethereum !== 'undefined') {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            userWalletAddress = accounts[0];
            web3 = new Web3(window.ethereum);
            
            await checkUserAccess();
            updateUserInterface();
            
            showNotification('Wallet connected successfully!', 'success');
            console.log('‚úÖ Wallet connected:', userWalletAddress);
        } else {
            showNotification('No Web3 wallet found. Please install MetaMask or SafePal.', 'error');
        }
        
    } catch (error) {
        console.error('‚ùå WalletConnect error:', error);
        showNotification('Wallet connection failed: ' + error.message, 'error');
    }
}

     async function checkUserAccess() {
    try {
        if (!userWalletAddress) return;
        
        // ‚úÖ –°–ü–ò–°–û–ö –í–°–ï–• 8 –ê–î–†–ï–°–û–í
        const FOUNDER_ADDRESSES = [
            '0x0099188030174E381E7A7ee36D2783ECC31B6728', // –í–∞—à –∞–¥—Ä–µ—Å (–ê–í–¢–û–†)
            '0xAB17aDbe29c4E1d695C239206682B02ebdB3f707', // –°–æ–∞–≤—Ç–æ—Ä 1
            '0xB5986B808dad481ad86D63DF152cC0ad7B473e48', // –°–æ–∞–≤—Ç–æ—Ä 2
            '0xa3496caCC8523421Dd151f1d92A456c2daFa28c2', // –°–æ–∞–≤—Ç–æ—Ä 3
            '0x8af1BC6B4a5aACED37889CC06bed4569A6B64044', // –°–æ–∞–≤—Ç–æ—Ä 4
            '0x0AB97e3934b1Afc9F1F6447CCF676E4f1D8B9639', // –°–æ–∞–≤—Ç–æ—Ä 5
            '0x03284A899147f5a07F82C622F34DF92198671635', // –°–æ–∞–≤—Ç–æ—Ä 6
            '0xb0E256cA055937a8FD9CA1F5e3D8A6bD44146d50'  // –°–æ–∞–≤—Ç–æ—Ä 7
        ];
        
        let userLevel = 0;
        let userId = generateUserIdFromAddress(userWalletAddress);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –í–ê–® –∞–¥—Ä–µ—Å (–ê–í–¢–û–†)
        if (userWalletAddress.toLowerCase() === '0x0099188030174E381E7A7ee36D2783ECC31B6728'.toLowerCase()) {
            userLevel = 6; // AUTHOR - –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞
            userId = 'AUTHOR_' + userWalletAddress.substring(2, 8).toUpperCase();
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ 7 –∞–¥—Ä–µ—Å–æ–≤ (–°–û–ê–í–¢–û–†–´)
        else if (FOUNDER_ADDRESSES.some(addr => addr.toLowerCase() === userWalletAddress.toLowerCase())) {
            userLevel = 5; // MANAGER - –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –±–µ–∑ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–∞–≤—Ç–æ—Ä–∞–º–∏
            const index = FOUNDER_ADDRESSES.findIndex(addr => addr.toLowerCase() === userWalletAddress.toLowerCase());
            userId = 'COAUTHOR_' + index + '_' + userWalletAddress.substring(2, 6).toUpperCase();
        }
        
        currentUser = {
            userId: userId,
            level: userLevel,
            isActive: userLevel > 0,
            walletAddress: userWalletAddress
        };
        
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        
    } catch (error) {
        console.error('‚ùå User access check error:', error);
    }
}

     function generateUserIdFromAddress(address) {
         return 'CG' + address.substring(2, 8).toUpperCase();
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê
     function updateUserInterface() {
         const levelNames = {
             0: 'GUEST',
             1: 'USER', 
             2: 'MINI ADMIN',
             3: 'ADMIN',
             4: 'SUPER ADMIN',
             5: 'MANAGER',
             6: 'AUTHOR'
         };
         
         document.getElementById('userLevel').textContent = levelNames[currentUser.level] || 'UNKNOWN';
         document.getElementById('currentUserId').textContent = currentUser.userId || 'Not Connected';
         
         if (userWalletAddress) {
             const shortAddress = `${userWalletAddress.substring(0, 6)}...${userWalletAddress.substring(userWalletAddress.length - 4)}`;
             document.getElementById('currentUserId').textContent = `${currentUser.userId} (${shortAddress})`;
             
             // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
             if (currentUser.userId !== 'NOT_CONNECTED') {
                 const referralLinkInput = document.getElementById('referralLink');
                 if (referralLinkInput) {
                     referralLinkInput.value = `https://cardgift.bnb/registration.html?ref=${currentUser.userId}`;
                 }
             }
         }
         
         updateMenuAccess();
         updateActivationButtons();
         updateConnectionStatus();
     }

     function updateMenuAccess() {
    const menuItems = document.querySelectorAll('.menu-item');
    
    menuItems.forEach(item => {
        const section = item.getAttribute('data-section');
        
        // ‚úÖ –ü–û–õ–ù–´–ô –î–û–°–¢–£–ü –î–õ–Ø –ê–í–¢–û–†–ê –ò –°–û–ê–í–¢–û–†–û–í
        if (currentUser.level >= 5) { // MANAGER –∏ AUTHOR
            item.classList.remove('locked');
            return;
        }
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        if (currentUser.level === 0) {
            if (section !== 'wallet' && section !== 'dashboard') {
                item.classList.add('locked');
            } else {
                item.classList.remove('locked');
            }
        }
        
        // USER (1) - –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        if (currentUser.level >= 1) {
            if (['dashboard', 'contacts', 'wallet', 'settings', 'archive'].includes(section)) {
                item.classList.remove('locked');
            }
        }
        
        // MINI_ADMIN (2) - –¥–æ–±–∞–≤–ª—è–µ–º CRM –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã
        if (currentUser.level >= 2) {
            if (['referrals', 'crm'].includes(section)) {
                item.classList.remove('locked');
            }
        }
        
        // ADMIN (3) - –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–≥, —Ä–∞—Å—Å—ã–ª–∫–∏, –æ–ø—Ä–æ—Å—ã
        if (currentUser.level >= 3) {
            if (['blog', 'mailings', 'analytics', 'surveys'].includes(section)) {
                item.classList.remove('locked');
            }
        }
        
        // SUPER_ADMIN (4) - –ø–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
        if (currentUser.level >= 4) {
            if (section === 'mlm') {
                item.classList.remove('locked');
            }
        }
        
        // ‚úÖ –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–û–ê–í–¢–û–†–ê–ú–ò –¢–û–õ–¨–ö–û –î–õ–Ø –ê–í–¢–û–†–ê
        if (section === 'coauthors') {
            if (currentUser.level === 6) { // –¢–æ–ª—å–∫–æ AUTHOR
                item.classList.remove('locked');
            } else {
                item.classList.add('locked');
            }
        }
    });
}

     function updateActivationButtons() {
         const buttons = document.querySelectorAll('.activation-btn');
         
         buttons.forEach(button => {
             const level = parseInt(button.getAttribute('onclick').match(/\d+/)[0]);
             
             if (currentUser.level >= level) {
                 button.disabled = true;
                 button.style.opacity = '0.5';
                 button.innerHTML = button.innerHTML.replace(/üîê|‚ö°|üî•|üöÄ/, '‚úÖ');
             } else {
                 button.disabled = false;
                 button.style.opacity = '1';
             }
         });
     }

     function updateConnectionStatus() {
         const statusElement = document.getElementById('connectionStatus');
         const walletInfo = document.getElementById('walletInfo');
         
         if (userWalletAddress) {
             statusElement.textContent = 'Connected';
             statusElement.style.color = '#4CAF50';
             
             if (walletInfo) {
                 walletInfo.style.display = 'block';
                 document.getElementById('walletAddress').textContent = 
                     `${userWalletAddress.substring(0, 6)}...${userWalletAddress.substring(userWalletAddress.length - 4)}`;
             }
         } else {
             statusElement.textContent = 'Not Connected';
             statusElement.style.color = '#FF6B6B';
             
             if (walletInfo) {
                 walletInfo.style.display = 'none';
             }
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–ê–ö–¢–ê–ú–ò
     function loadContactsData() {
         if (currentUser.level < 1) {
             showContactsAccessDenied();
             return;
         }
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         const savedContacts = localStorage.getItem(`contacts_${currentUser.userId}`);
         let userContacts = savedContacts ? JSON.parse(savedContacts) : [];
         
         // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ê–≤—Ç–æ—Ä, –∑–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã
         if (currentUser.level === 6) {
             const allContacts = getAllSystemContacts();
             userContacts = allContacts;
         }
         // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –°–æ–∞–≤—Ç–æ—Ä/–£–ø—Ä–∞–≤–ª—è—é—â–∏–π, –∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã
         else if (currentUser.level >= 5) {
             const teamContacts = getTeamContacts();
             userContacts = [...userContacts, ...teamContacts];
         }
         // –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
         
         contactsData.all = userContacts;
         contactsData.filtered = userContacts;
         
         updateContactsStats();
         displayContactsTable();
         updateContactsInterface();
     }

     function getAllSystemContacts() {
         // –°–æ–±–∏—Ä–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –ê–≤—Ç–æ—Ä–∞)
         const allContacts = [];
         for (let i = 0; i < localStorage.length; i++) {
             const key = localStorage.key(i);
             if (key && key.startsWith('contacts_')) {
                 try {
                     const contacts = JSON.parse(localStorage.getItem(key));
                     allContacts.push(...contacts);
                 } catch (error) {
                     console.error('Error loading contacts from', key, error);
                 }
             }
         }
         
         // –§–∏–ª—å—Ç—Ä—É–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç—É + –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
         return filterDuplicateContacts(allContacts);
     }

     function getTeamContacts() {
         // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         const teamContacts = [];
         // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –±–ª–æ–∫—á–µ–π–Ω—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
         return teamContacts;
     }

     function filterDuplicateContacts(contacts) {
         const unique = new Map();
         
         contacts.forEach(contact => {
             const key = `${contact.platform}_${contact.contact.toLowerCase()}`;
             if (!unique.has(key)) {
                 unique.set(key, contact);
             }
         });
         
         return Array.from(unique.values());
     }

     function showContactsAccessDenied() {
         const contactsTableBody = document.getElementById('contactsTableBody');
         if (contactsTableBody) {
             contactsTableBody.innerHTML = `
                 <tr>
                     <td colspan="8" style="text-align: center; color: #CCC; padding: 60px;">
                         <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                         <h3 style="color: #FFD700; margin-bottom: 15px;">Contacts Access Restricted</h3>
                         <p>Contact management requires User level or higher.</p>
                         <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">üöÄ Activate Account</button>
                     </td>
                 </tr>
             `;
         }
     }

     function updateContactsStats() {
         const stats = {
             telegram: contactsData.all.filter(c => c.platform === 'telegram').length,
             whatsapp: contactsData.all.filter(c => c.platform === 'whatsapp').length,
             email: contactsData.all.filter(c => c.platform === 'email').length,
             phone: contactsData.all.filter(c => c.platform === 'phone').length,
             instagram: contactsData.all.filter(c => c.platform === 'instagram').length,
             facebook: contactsData.all.filter(c => c.platform === 'facebook').length,
             tiktok: contactsData.all.filter(c => c.platform === 'tiktok').length,
             twitter: contactsData.all.filter(c => c.platform === 'twitter').length,
             viber: contactsData.all.filter(c => c.platform === 'viber').length,
             all: contactsData.all.length
         };
         
         Object.keys(stats).forEach(key => {
             const element = document.getElementById(`${key}Count`);
             if (element) element.textContent = stats[key];
         });
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â–∏–π —Å—á–µ—Ç—á–∏–∫
         const totalElement = document.getElementById('totalContactsCount');
         if (totalElement) totalElement.textContent = stats.all;
     }

     function displayContactsTable() {
         const tableBody = document.getElementById('contactsTableBody');
         if (!tableBody) return;
         
         if (contactsData.filtered.length === 0) {
             tableBody.innerHTML = `
                 <tr>
                     <td colspan="8" style="text-align: center; color: #888; padding: 40px;">
                         ${contactsData.searchTerm || contactsData.selectedCategory !== 'all' ? 'No contacts found for current filter' : 'No contacts yet. Add your first contact!'}
                     </td>
                 </tr>
             `;
             return;
         }
         
         let tableHTML = '';
         
         contactsData.filtered.forEach(contact => {
             const platformBadge = getPlatformBadge(contact.platform);
             const consentBadge = getConsentBadge(contact.pushConsent);
             const userLevel = getUserLevelBadge(contact.userLevel || 'guest');
             
             tableHTML += `
                 <tr>
                     <td>${contact.name || 'Unknown'}</td>
                     <td>${platformBadge}</td>
                     <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis;">${contact.contact}</td>
                     <td>${consentBadge}</td>
                     <td>${contact.source || 'manual'}</td>
                     <td>${userLevel}</td>
                     <td>${new Date(contact.createdAt).toLocaleDateString()}</td>
                     <td>
                         <button class="contact-action-btn chat" onclick="openCRMModal('${contact.id}')" title="Open CRM">üí¨</button>
                         ${currentUser.level >= 3 ? `<button class="contact-action-btn push" onclick="sendSinglePush('${contact.id}')" title="Send Push">üì¢</button>` : ''}
                         <button class="contact-action-btn delete" onclick="deleteContact('${contact.id}')" title="Delete">üóëÔ∏è</button>
                     </td>
                 </tr>
             `;
         });
         
         tableBody.innerHTML = tableHTML;
     }

     function getPlatformBadge(platform) {
         const badges = {
             telegram: `<span class="contact-platform-badge telegram">üì± Telegram</span>`,
             whatsapp: `<span class="contact-platform-badge whatsapp">üí¨ WhatsApp</span>`,
             email: `<span class="contact-platform-badge email">üìß Email</span>`,
             instagram: `<span class="contact-platform-badge instagram">üì∑ Instagram</span>`,
             facebook: `<span class="contact-platform-badge facebook">üë§ Facebook</span>`,
             tiktok: `<span class="contact-platform-badge tiktok">üéµ TikTok</span>`,
             twitter: `<span class="contact-platform-badge twitter">üê¶ Twitter</span>`,
             viber: `<span class="contact-platform-badge viber">üíú Viber</span>`,
             phone: `<span class="contact-platform-badge">üìû Phone</span>`
         };
         
         return badges[platform] || `<span class="contact-platform-badge">${platform}</span>`;
     }

     function getConsentBadge(consent) {
         return consent 
             ? `<span class="contact-consent-badge consent-yes">‚úÖ Yes</span>`
             : `<span class="contact-consent-badge consent-no">‚ùå No</span>`;
     }

     function getUserLevelBadge(level) {
         const badges = {
             guest: `<span class="status-badge status-basic">üë§ Guest</span>`,
             user: `<span class="status-badge status-basic">üîê User</span>`,
             mini_admin: `<span class="status-badge status-mini">‚ö° Mini Admin</span>`,
             admin: `<span class="status-badge status-basic">üî• Admin</span>`,
             super_admin: `<span class="status-badge status-super">üöÄ Super Admin</span>`,
             manager: `<span class="status-badge status-coauthor">üëî Manager</span>`,
             author: `<span class="status-badge status-coauthor">üëë Author</span>`
         };
         
         return badges[level] || badges.guest;
     }

     function updateContactsInterface() {
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è
         const apiSection = document.getElementById('apiIntegrationSection');
         const pushSection = document.getElementById('pushSection');
         const importExportSection = document.getElementById('importExportSection');
         
         if (currentUser.level >= 3) {
             if (apiSection) apiSection.style.display = 'block';
             if (pushSection) pushSection.style.display = 'block';
             updatePushLimits();
         } else {
             if (apiSection) apiSection.style.display = 'none';
             if (pushSection) pushSection.style.display = 'none';
         }
         
         if (currentUser.level >= 2) {
             if (importExportSection) importExportSection.style.display = 'block';
         } else {
             if (importExportSection) importExportSection.style.display = 'none';
         }
     }

     function updatePushLimits() {
         const limits = PUSH_LIMITS[USER_LEVELS[currentUser.level]] || PUSH_LIMITS.GUEST;
         const limitsElement = document.getElementById('pushLimitsText');
         
         if (limitsElement) {
             if (limits.daily === 0) {
                 limitsElement.innerHTML = 'Push notifications not available for your level';
             } else if (limits.daily === -1) {
                 limitsElement.innerHTML = 'Unlimited push notifications';
             } else {
                 limitsElement.innerHTML = `${limits.daily} notifications per day`;
             }
         }
         
         // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
         updateTargetCounts();
     }

     function updateTargetCounts() {
         const targetCounts = {
             all: contactsData.all.length,
             guests: contactsData.all.filter(c => !c.userLevel || c.userLevel === 'guest').length,
             'mini-admins': contactsData.all.filter(c => c.userLevel === 'mini_admin').length,
             admins: contactsData.all.filter(c => c.userLevel === 'admin').length,
             'super-admins': contactsData.all.filter(c => c.userLevel === 'super_admin').length,
             coauthors: contactsData.all.filter(c => ['manager', 'author'].includes(c.userLevel)).length
         };
         
         Object.keys(targetCounts).forEach(target => {
             const element = document.getElementById(`target${target.charAt(0).toUpperCase() + target.slice(1).replace('-', '')}Count`);
             if (element) {
                 element.textContent = `${targetCounts[target]} contacts`;
             }
         });
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ü–û–ò–°–ö–ê –ò –§–ò–õ–¨–¢–†–ê–¶–ò–ò –ö–û–ù–¢–ê–ö–¢–û–í
     function searchContacts() {
         const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
         const category = document.getElementById('categoryFilter').value;
         
         contactsData.searchTerm = searchTerm;
         contactsData.selectedCategory = category;
         
         applyContactsFilter();
     }

     function clearSearch() {
         document.getElementById('searchInput').value = '';
         document.getElementById('categoryFilter').value = 'all';
         
         contactsData.searchTerm = '';
         contactsData.selectedCategory = 'all';
         
         applyContactsFilter();
     }

     function filterContacts(category) {
         contactsData.selectedCategory = category;
         document.getElementById('categoryFilter').value = category;
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
         document.querySelectorAll('.category-card').forEach(card => {
             card.classList.remove('selected');
         });
         
         event.target.closest('.category-card').classList.add('selected');
         
         applyContactsFilter();
     }

     function applyContactsFilter() {
         let filtered = [...contactsData.all];
         
         // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
         if (contactsData.selectedCategory !== 'all') {
             filtered = filtered.filter(contact => contact.platform === contactsData.selectedCategory);
         }
         
         // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É
         if (contactsData.searchTerm) {
             filtered = filtered.filter(contact => 
                 contact.name.toLowerCase().includes(contactsData.searchTerm) ||
                 contact.contact.toLowerCase().includes(contactsData.searchTerm) ||
                 contact.platform.toLowerCase().includes(contactsData.searchTerm)
             );
         }
         
         contactsData.filtered = filtered;
         displayContactsTable();
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–ê–ö–¢–û–í
     function addNewContact() {
         if (currentUser.level < 1) {
             showNotification('Contact management requires User level or higher', 'error');
             return;
         }
         
         const name = prompt('Enter contact name:');
         if (!name) return;
         
         const platform = prompt('Enter platform (telegram/whatsapp/email/phone/instagram/facebook/tiktok/twitter/viber):');
         if (!platform) return;
         
         const contact = prompt('Enter contact details:');
         if (!contact) return;
         
         const pushConsent = confirm('Does this contact consent to receive push notifications?');
         
         const newContact = {
             id: 'contact_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
             name: name.trim(),
             platform: platform.toLowerCase().trim(),
             contact: contact.trim(),
             pushConsent: pushConsent,
             source: 'manual',
             userLevel: 'guest',
             createdAt: Date.now(),
             addedBy: currentUser.userId
         };
         
         addContactToDatabase(newContact);
         showNotification('Contact added successfully!', 'success');
     }

     function addContactToDatabase(contact) {
         // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         const savedContacts = localStorage.getItem(`contacts_${currentUser.userId}`);
         const contacts = savedContacts ? JSON.parse(savedContacts) : [];
         
         // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
         const exists = contacts.find(c => c.platform === contact.platform && c.contact.toLowerCase() === contact.contact.toLowerCase());
         if (exists) {
             showNotification('Contact already exists!', 'warning');
             return;
         }
         
         contacts.unshift(contact);
         localStorage.setItem(`contacts_${currentUser.userId}`, JSON.stringify(contacts));
         
         // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ê–≤—Ç–æ—Ä, –¥–æ–±–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –±–∞–∑—É
         if (currentUser.level === 6) {
             const globalContacts = localStorage.getItem('global_contacts');
             const global = globalContacts ? JSON.parse(globalContacts) : [];
             global.unshift(contact);
             localStorage.setItem('global_contacts', JSON.stringify(global));
         }
         
         // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
         loadContactsData();
     }

     function deleteContact(contactId) {
         if (!confirm('Are you sure you want to delete this contact?')) return;
         
         // –£–¥–∞–ª—è–µ–º –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         const savedContacts = localStorage.getItem(`contacts_${currentUser.userId}`);
         let contacts = savedContacts ? JSON.parse(savedContacts) : [];
         
         contacts = contacts.filter(c => c.id !== contactId);
         localStorage.setItem(`contacts_${currentUser.userId}`, JSON.stringify(contacts));
         
         // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
         loadContactsData();
         showNotification('Contact deleted successfully!', 'success');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò API –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
     function testTelegramAPI() {
         const token = document.getElementById('telegramBotToken').value.trim();
         if (!token) {
             showNotification('Please enter Telegram Bot Token', 'error');
             return;
         }
         
         // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API
         showNotification('Testing Telegram API...', 'info');
         
         setTimeout(() => {
             // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API
             const success = Math.random() > 0.3; // 70% —É—Å–ø–µ—Ö–∞ –¥–ª—è –¥–µ–º–æ
             
             if (success) {
                 apiIntegrations.telegram.connected = true;
                 updateAPIStatus('telegram', true);
                 showNotification('Telegram API connected successfully!', 'success');
             } else {
                 apiIntegrations.telegram.connected = false;
                 updateAPIStatus('telegram', false);
                 showNotification('Telegram API connection failed', 'error');
             }
         }, 2000);
     }

     function saveTelegramAPI() {
         const token = document.getElementById('telegramBotToken').value.trim();
         if (!token) {
             showNotification('Please enter Telegram Bot Token', 'error');
             return;
         }
         
         apiIntegrations.telegram.token = token;
         localStorage.setItem(`api_integrations_${currentUser.userId}`, JSON.stringify(apiIntegrations));
         
         showNotification('Telegram API settings saved!', 'success');
     }

     function testWhatsAppAPI() {
         const token = document.getElementById('whatsappToken').value.trim();
         const phoneId = document.getElementById('whatsappPhoneId').value.trim();
         
         if (!token || !phoneId) {
             showNotification('Please enter WhatsApp API Token and Phone ID', 'error');
             return;
         }
         
         showNotification('Testing WhatsApp API...', 'info');
         
         setTimeout(() => {
             const success = Math.random() > 0.4; // 60% —É—Å–ø–µ—Ö–∞ –¥–ª—è –¥–µ–º–æ
             
             if (success) {
                 apiIntegrations.whatsapp.connected = true;
                 updateAPIStatus('whatsapp', true);
                 showNotification('WhatsApp API connected successfully!', 'success');
             } else {
                 apiIntegrations.whatsapp.connected = false;
                 updateAPIStatus('whatsapp', false);
                 showNotification('WhatsApp API connection failed', 'error');
             }
         }, 2000);
     }

     function saveWhatsAppAPI() {
         const token = document.getElementById('whatsappToken').value.trim();
         const phoneId = document.getElementById('whatsappPhoneId').value.trim();
         
         if (!token || !phoneId) {
             showNotification('Please enter WhatsApp API Token and Phone ID', 'error');
             return;
         }
         
         apiIntegrations.whatsapp.token = token;
         apiIntegrations.whatsapp.phoneId = phoneId;
         localStorage.setItem(`api_integrations_${currentUser.userId}`, JSON.stringify(apiIntegrations));
         
         showNotification('WhatsApp API settings saved!', 'success');
     }

     function testEmailAPI() {
         const host = document.getElementById('smtpHost').value.trim();
         const port = document.getElementById('smtpPort').value.trim();
         const user = document.getElementById('smtpUser').value.trim();
         const pass = document.getElementById('smtpPass').value.trim();
         
         if (!host || !port || !user || !pass) {
             showNotification('Please fill all Email SMTP fields', 'error');
             return;
         }
         
         showNotification('Testing Email SMTP...', 'info');
         
         setTimeout(() => {
             const success = Math.random() > 0.3; // 70% —É—Å–ø–µ—Ö–∞ –¥–ª—è –¥–µ–º–æ
             
             if (success) {
                 apiIntegrations.email.connected = true;
                 updateAPIStatus('email', true);
                 showNotification('Email SMTP connected successfully!', 'success');
             } else {
                 apiIntegrations.email.connected = false;
                 updateAPIStatus('email', false);
                 showNotification('Email SMTP connection failed', 'error');
             }
         }, 2000);
     }

     function saveEmailAPI() {
         const host = document.getElementById('smtpHost').value.trim();
         const port = document.getElementById('smtpPort').value.trim();
         const user = document.getElementById('smtpUser').value.trim();
         const pass = document.getElementById('smtpPass').value.trim();
         
         if (!host || !port || !user || !pass) {
             showNotification('Please fill all Email SMTP fields', 'error');
             return;
         }
         
         apiIntegrations.email = { host, port, user, pass, connected: apiIntegrations.email.connected };
         localStorage.setItem(`api_integrations_${currentUser.userId}`, JSON.stringify(apiIntegrations));
         
         showNotification('Email SMTP settings saved!', 'success');
     }

     function updateAPIStatus(platform, connected) {
         const statusElement = document.getElementById(`${platform}Status`);
         const statusTextElement = document.getElementById(`${platform}StatusText`);
         
         if (statusElement && statusTextElement) {
             if (connected) {
                 statusElement.className = 'api-status connected';
                 statusElement.innerHTML = '<span>‚úÖ</span> <span>Connected</span>';
             } else {
                 statusElement.className = 'api-status disconnected';
                 statusElement.innerHTML = '<span>‚ùå</span> <span>Not Connected</span>';
             }
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò PUSH-–£–í–ï–î–û–ú–õ–ï–ù–ò–ô
     let selectedTargets = [];
     let selectedCustomGroups = [];

     function selectTarget(target) {
         const limits = PUSH_LIMITS[USER_LEVELS[currentUser.level]] || PUSH_LIMITS.GUEST;
         
         if (limits.daily === 0) {
             showNotification('Push notifications not available for your level', 'error');
             return;
         }
         
         const targetCard = document.querySelector(`[data-target="${target}"]`);
         
         if (selectedTargets.includes(target)) {
             selectedTargets = selectedTargets.filter(t => t !== target);
             targetCard.classList.remove('selected');
         } else {
             selectedTargets.push(target);
             targetCard.classList.add('selected');
         }
         
         updateSendButton();
     }

     function createCustomGroup() {
         const groupName = document.getElementById('newGroupName').value.trim();
         
         if (!groupName) {
             showNotification('Please enter group name', 'error');
             return;
         }
         
         if (groupName.length > 50) {
             showNotification('Group name too long (max 50 characters)', 'error');
             return;
         }
         
         const newGroup = {
             id: 'group_' + Date.now(),
             name: groupName,
             contacts: [],
             createdAt: Date.now()
         };
         
         contactsData.customGroups.push(newGroup);
         localStorage.setItem(`custom_groups_${currentUser.userId}`, JSON.stringify(contactsData.customGroups));
         
         document.getElementById('newGroupName').value = '';
         displayCustomGroups();
         
         showNotification(`Group "${groupName}" created successfully!`, 'success');
     }

     function displayCustomGroups() {
         const container = document.getElementById('customGroupsList');
         if (!container) return;
         
         if (contactsData.customGroups.length === 0) {
             container.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No custom groups yet</p>';
             return;
         }
         
         let groupsHTML = '';
         
         contactsData.customGroups.forEach(group => {
             const isSelected = selectedCustomGroups.includes(group.id);
             
             groupsHTML += `
                 <div class="custom-group-card ${isSelected ? 'selected' : ''}" onclick="selectCustomGroup('${group.id}')">
                     <div class="group-header">
                         <div class="group-name">${group.name}</div>
                         <button class="group-delete-btn" onclick="event.stopPropagation(); deleteCustomGroup('${group.id}')">üóëÔ∏è</button>
                     </div>
                     <div style="color: #CCC; font-size: 12px;">${group.contacts.length} contacts</div>
                 </div>
             `;
         });
         
         container.innerHTML = groupsHTML;
     }

     function selectCustomGroup(groupId) {
         const groupCard = document.querySelector(`[onclick*="${groupId}"]`);
         
         if (selectedCustomGroups.includes(groupId)) {
             selectedCustomGroups = selectedCustomGroups.filter(id => id !== groupId);
             groupCard.classList.remove('selected');
         } else {
             selectedCustomGroups.push(groupId);
             groupCard.classList.add('selected');
         }
         
         updateSendButton();
     }

     function deleteCustomGroup(groupId) {
         if (!confirm('Delete this custom group?')) return;
         
         contactsData.customGroups = contactsData.customGroups.filter(g => g.id !== groupId);
         localStorage.setItem(`custom_groups_${currentUser.userId}`, JSON.stringify(contactsData.customGroups));
         
         displayCustomGroups();
         showNotification('Custom group deleted', 'success');
     }

     function updateSendButton() {
         const sendBtn = document.getElementById('sendPushBtn');
         const message = document.getElementById('pushMessageText').value.trim();
         
         const hasTargets = selectedTargets.length > 0 || selectedCustomGroups.length > 0;
         const hasMessage = message.length > 0;
         
         if (sendBtn) {
             sendBtn.disabled = !hasTargets || !hasMessage;
         }
     }

     function sendPushNotification() {
         const limits = PUSH_LIMITS[USER_LEVELS[currentUser.level]] || PUSH_LIMITS.GUEST;
         
         if (limits.daily === 0) {
             showNotification('Push notifications not available for your level', 'error');
             return;
         }
         
         const message = document.getElementById('pushMessageText').value.trim();
         
         if (!message) {
             showNotification('Please enter message text', 'error');
             return;
         }
         
         if (selectedTargets.length === 0 && selectedCustomGroups.length === 0) {
             showNotification('Please select target audience', 'error');
             return;
         }
         
         // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
         const today = new Date().toDateString();
         const sentToday = parseInt(localStorage.getItem(`push_sent_${currentUser.userId}_${today}`) || '0');
         
         if (limits.daily !== -1 && sentToday >= limits.daily) {
             showNotification(`Daily limit reached (${limits.daily} notifications per day)`, 'error');
             return;
         }
         
         // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
         const recipients = getNotificationRecipients();
         
         if (recipients.length === 0) {
             showNotification('No recipients found for selected targets', 'warning');
             return;
         }
         
         // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π —Å —Å–æ–≥–ª–∞—Å–∏–µ–º –Ω–∞ –ø—É—à-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
         const consentedRecipients = recipients.filter(r => r.pushConsent);
         
         if (consentedRecipients.length === 0) {
             showNotification('No recipients with push notification consent found', 'warning');
             return;
         }
         
         // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
         sendPushToRecipients(consentedRecipients, message);
         
         // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö
         localStorage.setItem(`push_sent_${currentUser.userId}_${today}`, (sentToday + 1).toString());
         
         // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
         clearPushForm();
         
         showNotification(`Push notification sent to ${consentedRecipients.length} recipients`, 'success');
     }

     function getNotificationRecipients() {
         let recipients = [];
         
         // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ü–µ–ª–µ–≤—ã–º –≥—Ä—É–ø–ø–∞–º
         selectedTargets.forEach(target => {
             switch (target) {
                 case 'all':
                     recipients.push(...contactsData.all);
                     break;
                 case 'guests':
                     recipients.push(...contactsData.all.filter(c => !c.userLevel || c.userLevel === 'guest'));
                     break;
                 case 'mini-admins':
                     recipients.push(...contactsData.all.filter(c => c.userLevel === 'mini_admin'));
                     break;
                 case 'admins':
                     recipients.push(...contactsData.all.filter(c => c.userLevel === 'admin'));
                     break;
                 case 'super-admins':
                     recipients.push(...contactsData.all.filter(c => c.userLevel === 'super_admin'));
                     break;
                 case 'coauthors':
                     recipients.push(...contactsData.all.filter(c => ['manager', 'author'].includes(c.userLevel)));
                     break;
             }
         });
         
         // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≥—Ä—É–ø–ø
         selectedCustomGroups.forEach(groupId => {
             const group = contactsData.customGroups.find(g => g.id === groupId);
             if (group) {
                 recipients.push(...group.contacts);
             }
         });
         
         // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
         const unique = new Map();
         recipients.forEach(r => {
             const key = `${r.platform}_${r.contact}`;
             unique.set(key, r);
         });
         
         return Array.from(unique.values());
     }

     function sendPushToRecipients(recipients, message) {
         // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
         recipients.forEach(recipient => {
             console.log(`Sending push to ${recipient.platform}: ${recipient.contact} - ${message}`);
             
             // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
             switch (recipient.platform) {
                 case 'telegram':
                     if (apiIntegrations.telegram.connected) {
                         // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Telegram Bot API
                         console.log('Sending via Telegram Bot API');
                     }
                     break;
                 case 'whatsapp':
                     if (apiIntegrations.whatsapp.connected) {
                         // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ WhatsApp Business API
                         console.log('Sending via WhatsApp Business API');
                     }
                     break;
                 case 'email':
                     if (apiIntegrations.email.connected) {
                         // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ SMTP
                         console.log('Sending via Email SMTP');
                     }
                     break;
             }
         });
         
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–ø—Ä–∞–≤–æ–∫
         const pushHistory = JSON.parse(localStorage.getItem(`push_history_${currentUser.userId}`) || '[]');
         pushHistory.unshift({
             message,
             recipients: recipients.length,
             targets: [...selectedTargets],
             customGroups: [...selectedCustomGroups],
             sentAt: Date.now()
         });
         
         // –•—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 –æ—Ç–ø—Ä–∞–≤–æ–∫
         if (pushHistory.length > 50) {
             pushHistory.splice(50);
         }
         
         localStorage.setItem(`push_history_${currentUser.userId}`, JSON.stringify(pushHistory));
     }

     function sendSinglePush(contactId) {
         const contact = contactsData.all.find(c => c.id === contactId);
         if (!contact) return;
         
         if (!contact.pushConsent) {
             showNotification('This contact has not consented to push notifications', 'warning');
             return;
         }
         
         const message = prompt('Enter message for this contact:');
         if (!message) return;
         
         sendPushToRecipients([contact], message);
         showNotification('Push notification sent!', 'success');
     }

     function clearPushForm() {
         document.getElementById('pushMessageText').value = '';
         selectedTargets = [];
         selectedCustomGroups = [];
         
         document.querySelectorAll('.target-card').forEach(card => {
             card.classList.remove('selected');
         });
         
         document.querySelectorAll('.custom-group-card').forEach(card => {
             card.classList.remove('selected');
         });
         
         updateSendButton();
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ò–ú–ü–û–†–¢–ê/–≠–ö–°–ü–û–†–¢–ê
     function showImportExport() {
         const section = document.getElementById('importExportSection');
         if (section) {
             section.style.display = section.style.display === 'none' ? 'block' : 'none';
         }
     }

     function handleContactsImport(fileInput) {
         const file = fileInput.files[0];
         if (!file) return;
         
         if (currentUser.level < 2) {
             showNotification('Contact import requires Mini Admin level or higher', 'error');
             return;
         }
         
         const maxSize = 5 * 1024 * 1024; // 5MB
         if (file.size > maxSize) {
             showNotification('File too large. Maximum size is 5MB.', 'error');
             return;
         }
         
         const allowedTypes = [
             'text/csv',
             'application/vnd.ms-excel',
             'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
             'text/plain'
         ];
         
         if (!allowedTypes.includes(file.type) && !file.name.match(/\.(csv|xlsx?|txt)$/i)) {
             showNotification('Unsupported file format. Please use CSV, Excel, or TXT files.', 'error');
             return;
         }
         
         showNotification('Processing import file...', 'info');
         
         const reader = new FileReader();
         reader.onload = function(e) {
             try {
                 processImportData(e.target.result, file.name);
             } catch (error) {
                 console.error('Import error:', error);
                 showNotification('Error processing import file', 'error');
             }
         };
         
         reader.readAsText(file);
     }

     function processImportData(data, filename) {
         const lines = data.split('\n').filter(line => line.trim());
         
         if (lines.length < 2) {
             showNotification('Import file must contain at least a header and one data row', 'error');
             return;
         }
         
         const importedContacts = [];
         let errors = [];
         
         // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å (–∑–∞–ø—è—Ç–∞—è, —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –∏–ª–∏ —Ç–∞–±—É–ª—è—Ü–∏—è)
         const firstLine = lines[0];
         let separator = ',';
         if (firstLine.includes(';')) separator = ';';
         else if (firstLine.includes('\t')) separator = '\t';
         
         const headers = lines[0].toLowerCase().split(separator).map(h => h.trim());
         
         // –ò—â–µ–º –Ω—É–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
         const nameIndex = headers.findIndex(h => h.includes('name') || h.includes('–∏–º—è') || h.includes('—ñ–º\'—è'));
         const contactIndex = headers.findIndex(h => h.includes('contact') || h.includes('–∫–æ–Ω—Ç–∞–∫—Ç') || h.includes('phone') || h.includes('email') || h.includes('telegram'));
         const platformIndex = headers.findIndex(h => h.includes('platform') || h.includes('–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞') || h.includes('messenger'));
         
         if (nameIndex === -1 || contactIndex === -1) {
             showNotification('Import file must contain "Name" and "Contact" columns', 'error');
             return;
         }
         
         // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
         for (let i = 1; i < lines.length; i++) {
             const values = lines[i].split(separator).map(v => v.trim().replace(/"/g, ''));
             
             if (values.length < 2) continue;
             
             const name = values[nameIndex];
             const contact = values[contactIndex];
             let platform = platformIndex !== -1 ? values[platformIndex] : 'email';
             
             if (!name || !contact) {
                 errors.push(`Row ${i + 1}: Missing name or contact`);
                 continue;
             }
             
             // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç—É
             if (platformIndex === -1) {
                 if (contact.includes('@') && contact.includes('.')) {
                     platform = 'email';
                 } else if (contact.startsWith('@')) {
                     platform = 'telegram';
                 } else if (contact.match(/^\+?[\d\s\-\(\)]+$/)) {
                     platform = 'phone';
                 } else {
                     platform = 'other';
                 }
             }
             
             const newContact = {
                 id: 'imported_' + Date.now() + '_' + i,
                 name: name,
                 platform: platform.toLowerCase(),
                 contact: contact,
                 pushConsent: false, // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è
                 source: 'imported',
                 userLevel: 'guest',
                 createdAt: Date.now(),
                 addedBy: currentUser.userId
             };
             
             importedContacts.push(newContact);
         }
         
         if (importedContacts.length === 0) {
             showNotification('No valid contacts found in import file', 'warning');
             return;
         }
         
         // –§–∏–ª—å—Ç—Ä—É–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
         const existingContacts = JSON.parse(localStorage.getItem(`contacts_${currentUser.userId}`) || '[]');
         const uniqueContacts = [];
         
         importedContacts.forEach(newContact => {
             const exists = existingContacts.find(existing => 
                 existing.platform === newContact.platform && 
                 existing.contact.toLowerCase() === newContact.contact.toLowerCase()
             );
             
             if (!exists) {
                 uniqueContacts.push(newContact);
             }
         });
         
         if (uniqueContacts.length === 0) {
             showNotification('All contacts from import file already exist', 'warning');
             return;
         }
         
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
         const allContacts = [...existingContacts, ...uniqueContacts];
         localStorage.setItem(`contacts_${currentUser.userId}`, JSON.stringify(allContacts));
         
         // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
         loadContactsData();
         
         let message = `Successfully imported ${uniqueContacts.length} contacts`;
         if (errors.length > 0) {
             message += ` (${errors.length} errors)`;
         }
         
         showNotification(message, 'success');
         
         // –û—á–∏—â–∞–µ–º input
         document.getElementById('contactsImportFile').value = '';
     }

     function exportContacts() {
         if (currentUser.level < 2) {
             showNotification('Contact export requires Mini Admin level or higher', 'error');
             return;
         }
         
         if (contactsData.all.length === 0) {
             showNotification('No contacts to export', 'warning');
             return;
         }
         
         // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
         const csvHeaders = ['Name', 'Platform', 'Contact', 'Push Consent', 'Source', 'User Level', 'Added Date'];
         const csvRows = [csvHeaders.join(',')];
         
         contactsData.all.forEach(contact => {
             const row = [
                 `"${contact.name || ''}"`,
                 `"${contact.platform || ''}"`,
                 `"${contact.contact || ''}"`,
                 `"${contact.pushConsent ? 'Yes' : 'No'}"`,
                 `"${contact.source || ''}"`,
                 `"${contact.userLevel || 'guest'}"`,
                 `"${new Date(contact.createdAt).toLocaleDateString()}"`
             ];
             csvRows.push(row.join(','));
         });
         
         const csvContent = csvRows.join('\n');
         const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
         
         const link = document.createElement('a');
         const url = URL.createObjectURL(blob);
         link.setAttribute('href', url);
         link.setAttribute('download', `contacts_${currentUser.userId}_${Date.now()}.csv`);
         link.style.visibility = 'hidden';
         document.body.appendChild(link);
         link.click();
         document.body.removeChild(link);
         
         showNotification(`Exported ${contactsData.all.length} contacts to CSV file`, 'success');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ê–ö–¢–ò–í–ê–¶–ò–ò
     async function activateUser(level) {
         try {
             showNotification('Preparing activation...', 'info');
             
             if (!contract || !userWalletAddress) {
                 throw new Error('Wallet not connected');
             }
             
             let txResult;
             let price;
             let methodName;
             
             switch(level) {
                 case 1:
                     // USER (–ö–∞–Ω–¥–∏–¥–∞—Ç) - 0.0015 opBNB
                     price = '1500000000000000'; // 0.0015 BNB –≤ wei
                     methodName = 'activateUser';
                     break;
                     
                 case 2: 
                     // MINI_ADMIN - 0.0225 opBNB
                     price = '22500000000000000'; // 0.0225 BNB –≤ wei
                     methodName = 'activateMiniAdmin';
                     break;
                     
                 case 3:
                     // ADMIN - 0.2145 opBNB
                     price = '214500000000000000'; // 0.2145 BNB –≤ wei
                     methodName = 'activateAdmin';
                     break;
                     
                 case 4:
                     // SUPER_ADMIN - 0.2145 opBNB (—Ç–∞ –∂–µ —Ü–µ–Ω–∞ —á—Ç–æ Admin)
                     price = '214500000000000000'; // 0.2145 BNB –≤ wei
                     methodName = 'activateSuperAdmin';
                     break;
                     
                 default:
                     throw new Error('Unknown activation level');
             }
             
             // –°–∏–º—É–ª—è—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ
             showNotification(`Activating level ${level}...`, 'info');
             
             // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç:
             // txResult = await contract.methods[methodName]().send({ 
             //     from: userWalletAddress,
             //     value: price,
             //     gas: 250000
             // });
             
             // –°–∏–º—É–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
             await new Promise(resolve => setTimeout(resolve, 2000));
             
             showNotification(`Level ${level} activation successful!`, 'success');
             
             // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
             currentUser.level = level;
             localStorage.setItem('currentUser', JSON.stringify(currentUser));
             
             updateUserInterface();
             
             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
             setTimeout(() => {
                 if (level >= 1) {
                     showNotification('Archive and Contacts unlocked! Start managing your network.', 'info');
                     loadContactsData();
                 }
                 if (level >= 3) {
                     showNotification('Blog, Surveys and Push Notifications unlocked! Start creating content.', 'info');
                 }
                 if (level >= 4) {
                     showNotification('MLM Partner Program unlocked!', 'info');
                 }
             }, 2000);
             
         } catch (error) {
             console.error('Activation failed:', error);
             showNotification(`Activation error: ${error.message}`, 'error');
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ù–ê–í–ò–ì–ê–¶–ò–ò
     function showSection(sectionId) {
         // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
         document.querySelectorAll('.content-section').forEach(section => {
             section.classList.remove('active');
         });
         
         // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –º–µ–Ω—é
         document.querySelectorAll('.menu-item').forEach(item => {
             item.classList.remove('active');
         });
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
         const targetSection = document.getElementById(sectionId);
         if (targetSection) {
             targetSection.classList.add('active');
             currentSection = sectionId;
         }
         
         // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—É–Ω–∫—Ç –º–µ–Ω—é
         const menuItem = document.querySelector(`[data-section="${sectionId}"]`);
         if (menuItem) {
             menuItem.classList.add('active');
         }
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Å–µ–∫—Ü–∏–∏
         switch(sectionId) {
             case 'contacts':
                 if (currentUser.level >= 1) {
                     loadContactsData();
                 }
                 break;
             case 'archive':
                 if (currentUser.level >= 1) {
                     updateArchiveLimits();
                     loadUserArchive();
                 }
                 break;
             case 'surveys':
                 if (currentUser.level >= 3) {
                     loadSurveyData();
                 }
                 break;
             case 'blog':
                 if (currentUser.level >= 3) {
                     loadBlogData();
                     loadBlogPosts();
                 }
                 break;
             case 'mlm':
                 if (currentUser.level >= 4) {
                     loadMLMSection();
                 }
                 break;
             case 'referrals':
                 loadReferralData();
                 break;
             case 'crm':
                 loadCRMData();
                 break;
         }
         
         // –ó–∞–∫—Ä—ã–≤–∞–µ–º sidebar –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
         if (window.innerWidth <= 768) {
             toggleSidebar();
         }
     }

     function toggleSidebar() {
         const sidebar = document.getElementById('sidebar');
         const mainContent = document.getElementById('mainContent');
         
         sidebar.classList.toggle('mobile-show');
         
         if (sidebar.classList.contains('mobile-show')) {
             mainContent.classList.add('sidebar-open');
         } else {
             mainContent.classList.remove('sidebar-open');
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
     function showNotification(message, type = 'info', duration = 5000) {
         const container = document.getElementById('notificationContainer') || createNotificationContainer();
         
         const notification = document.createElement('div');
         notification.className = `notification ${type}`;
         notification.innerHTML = `
             <div style="display: flex; align-items: center; gap: 10px;">
                 <span style="font-size: 18px;">${getNotificationIcon(type)}</span>
                 <span>${message}</span>
             </div>
         `;
         
         container.appendChild(notification);
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
         setTimeout(() => notification.classList.add('show'), 100);
         
         // –°–∫—Ä—ã–≤–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º
         setTimeout(() => {
             notification.classList.remove('show');
             setTimeout(() => {
                 if (notification.parentNode) {
                     notification.parentNode.removeChild(notification);
                 }
             }, 300);
         }, duration);
     }

     function createNotificationContainer() {
         const container = document.createElement('div');
         container.id = 'notificationContainer';
         container.style.cssText = `
             position: fixed;
             top: 20px;
             right: 20px;
             z-index: 10000;
             pointer-events: none;
         `;
         document.body.appendChild(container);
         return container;
     }

     function getNotificationIcon(type) {
         const icons = {
             success: '‚úÖ',
             error: '‚ùå',
             warning: '‚ö†Ô∏è',
             info: '‚ÑπÔ∏è'
         };
         return icons[type] || '‚ÑπÔ∏è';
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ê–†–•–ò–í–ê
     function updateArchiveLimits() {
         const limits = {0: 3, 1: 20, 2: 100, 3: 200, 4: 500, 5: 1000, 6: -1};
         const userLimit = limits[currentUser.level] || 3;
         
         const totalSlotsElement = document.getElementById('totalSlots');
         if (totalSlotsElement) {
             totalSlotsElement.textContent = userLimit === -1 ? '‚àû' : userLimit;
         }
         
         loadUserArchive();
     }

     async function loadUserArchive() {
         if (currentUser.level === 0) {
             showEmptyArchive();
             return;
         }
         
         try {
             // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
             const savedArchive = localStorage.getItem(`archive_${currentUser.userId}`);
             const archive = savedArchive ? JSON.parse(savedArchive) : { cards: [], contacts: [] };
             
             displayArchiveCards(archive.cards || []);
             
             const usedSlotsElement = document.getElementById('usedSlots');
             if (usedSlotsElement) {
                 usedSlotsElement.textContent = archive.cards.length;
             }
             
         } catch (error) {
             console.error('Error loading archive:', error);
             showEmptyArchive();
         }
     }

     function displayArchiveCards(cards) {
         const cardsGrid = document.getElementById('cardsGrid');
         const emptyArchive = document.getElementById('emptyArchive');
         
         if (!cardsGrid) return;
         
         if (cards.length === 0) {
             cardsGrid.style.display = 'none';
             if (emptyArchive) emptyArchive.style.display = 'block';
             return;
         }
         
         cardsGrid.style.display = 'grid';
         if (emptyArchive) emptyArchive.style.display = 'none';
         
         let cardsHTML = '';
         
         cards.forEach((card, index) => {
             cardsHTML += `
                 <div class="archive-card" onclick="previewCard('${card.id || index}')">
                     <div class="card-preview">
                         <img src="${card.preview || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI4MCAxNjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyODAiIGhlaWdodD0iMTYwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjE0MCIgeT0iODAiIGZpbGw9IiM2NjYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIwLjNlbSI+8J+HvyBObyBQcmV2aWV3PC90ZXh0Pgo8L3N2Zz4='}" alt="Card preview">
                         <div class="card-overlay">
                             <div class="card-stats">
                                 <span>üëÅ ${card.views || 0}</span>
                                 <span>üñ± ${card.clicks || 0}</span>
                             </div>
                         </div>
                     </div>
                     <div class="card-info">
                         <h4 class="card-title">${card.title || 'Untitled Card'}</h4>
                         <div class="card-actions">
                             <button class="card-action-btn" onclick="event.stopPropagation(); shareCard('${card.id || index}')">üì§</button>
                             <button class="card-action-btn" onclick="event.stopPropagation(); editCard('${card.id || index}')">‚úèÔ∏è</button>
                             <button class="card-action-btn" onclick="event.stopPropagation(); duplicateCard('${card.id || index}')">üìã</button>
                             <button class="card-action-btn" onclick="event.stopPropagation(); deleteCard('${card.id || index}')">üóëÔ∏è</button>
                         </div>
                     </div>
                 </div>
             `;
         });
         
         cardsGrid.innerHTML = cardsHTML;
     }

     function showEmptyArchive() {
         const cardsGrid = document.getElementById('cardsGrid');
         const emptyArchive = document.getElementById('emptyArchive');
         
         if (cardsGrid) cardsGrid.style.display = 'none';
         if (emptyArchive) emptyArchive.style.display = 'block';
         
         const usedSlotsElement = document.getElementById('usedSlots');
         if (usedSlotsElement) usedSlotsElement.textContent = '0';
     }

     function createNewCard() {
         window.open('/generator.html', '_blank');
     }

     function previewCard(cardId) {
         window.open(`/card-viewer.html?id=${cardId}`, '_blank');
     }

     function shareCard(cardId) {
         const shortLink = `https://cardgift.bnb/c/${cardId}`;
         
         if (navigator.share) {
             navigator.share({
                 title: 'Beautiful Greeting Card',
                 text: 'Check out this amazing card created with CardGift!',
                 url: shortLink
             });
         } else {
             navigator.clipboard.writeText(shortLink).then(() => {
                 showNotification('Link copied to clipboard!', 'success');
             });
         }
     }

     function editCard(cardId) {
         showNotification('Card editing feature coming soon!', 'info');
     }

     function duplicateCard(cardId) {
         showNotification('Card duplication feature coming soon!', 'info');
     }

     function deleteCard(cardId) {
         if (confirm('Are you sure you want to delete this card?')) {
             showNotification('Card deleted successfully!', 'success');
             loadUserArchive();
         }
     }

     function searchArchive() {
         const searchTerm = document.getElementById('archiveSearch')?.value.toLowerCase() || '';
         const filter = document.getElementById('archiveFilter')?.value || 'all';
         
         showNotification('Search functionality coming soon!', 'info');
     }

     function exportArchive() {
         if (currentUser.level === 0) {
             showNotification('Archive access requires activation', 'error');
             return;
         }
         
         showNotification('Archive export feature coming soon!', 'info');
     }

     function showUpgradeOptions() {
         const currentLimits = {0: 3, 1: 20, 2: 100, 3: 200, 4: 500, 5: 1000, 6: -1};
         const nextLevel = currentUser.level + 1;
         const nextLimit = currentLimits[nextLevel];
         
         if (nextLevel > 6) {
             showNotification('You already have the maximum level!', 'info');
             return;
         }
         
         const upgradeMessage = `Upgrade to level ${nextLevel} for ${nextLimit === -1 ? 'unlimited' : nextLimit} cards in archive!`;
         
         if (confirm(upgradeMessage + '\n\nGo to activation section?')) {
             showSection('wallet');
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –û–ü–†–û–°–û–í
     function loadSurveyData() {
         if (currentUser.level < 3) {
             showSurveyAccessDenied();
             return;
         }
         
         const savedSurveys = localStorage.getItem(`surveys_${currentUser.userId}`);
         const surveys = savedSurveys ? JSON.parse(savedSurveys) : [];
         
         updateSurveyStats(surveys);
         displaySurveys(surveys);
     }

     function showSurveyAccessDenied() {
         const surveysList = document.getElementById('surveysList');
         if (surveysList) {
             surveysList.innerHTML = `
                 <div style="text-align: center; color: #CCC; padding: 60px;">
                     <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                     <h3 style="color: #2196F3; margin-bottom: 15px;">Survey Access Restricted</h3>
                     <p>Survey feature is available starting from Admin level.</p>
                     <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">üöÄ Upgrade Now</button>
                 </div>
             `;
         }
     }

     function updateSurveyStats(surveys) {
         const totalSurveys = surveys.length;
         const activeSurveys = surveys.filter(s => s.status === 'active').length;
         const totalResponses = surveys.reduce((sum, s) => sum + (s.responses || 0), 0);
         const responseRate = totalSurveys > 0 ? Math.round((totalResponses / totalSurveys) * 100) / 100 : 0;
         
         const elements = {
             totalSurveys: document.getElementById('totalSurveys'),
             activeSurveys: document.getElementById('activeSurveys'),
             surveyResponses: document.getElementById('surveyResponses'),
             responseRate: document.getElementById('responseRate')
         };
         
         if (elements.totalSurveys) elements.totalSurveys.textContent = totalSurveys;
         if (elements.activeSurveys) elements.activeSurveys.textContent = activeSurveys;
         if (elements.surveyResponses) elements.surveyResponses.textContent = totalResponses;
         if (elements.responseRate) elements.responseRate.textContent = responseRate + '%';
     }

     function displaySurveys(surveys) {
         const surveysList = document.getElementById('surveysList');
         const emptySurveys = document.getElementById('emptySurveys');
         
         if (!surveysList) return;
         
         if (surveys.length === 0) {
             surveysList.style.display = 'none';
             if (emptySurveys) emptySurveys.style.display = 'block';
             return;
         }
         
         surveysList.style.display = 'block';
         if (emptySurveys) emptySurveys.style.display = 'none';
         
         let surveysHTML = '';
         
         surveys.forEach(survey => {
             const statusColor = survey.status === 'active' ? '#4CAF50' : 
                               survey.status === 'draft' ? '#FF9800' : '#888';
             
             surveysHTML += `
                 <div class="survey-card" onclick="editSurvey('${survey.id}')">
                     <div class="survey-title">${survey.title}</div>
                     <p style="color: #CCC; margin-bottom: 10px;">${survey.description}</p>
                     <div style="display: flex; justify-content: space-between; align-items: center;">
                         <div class="survey-stats">
                             <span>üìä ${survey.questions?.length || 0} questions</span>
                             <span>üë• ${survey.responses || 0} responses</span>
                             <span style="background: ${statusColor}; color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px;">${survey.status}</span>
                         </div>
                         <div>
                             <button class="btn-secondary" onclick="event.stopPropagation(); previewSurvey('${survey.id}')" style="margin-right: 5px; padding: 5px 10px; font-size: 12px;">üëÅÔ∏è</button>
                             <button class="btn-danger" onclick="event.stopPropagation(); deleteSurvey('${survey.id}')" style="padding: 5px 10px; font-size: 12px;">üóëÔ∏è</button>
                         </div>
                     </div>
                 </div>
             `;
         });
         
         surveysList.innerHTML = surveysHTML;
     }

     function createNewSurvey() {
         if (currentUser.level < 3) {
             showNotification('Survey creation requires Admin level or higher', 'error');
             return;
         }
         
         // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
         document.getElementById('surveyTitle').value = '';
         document.getElementById('surveyDescription').value = '';
         document.getElementById('questionsList').innerHTML = '';
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
         document.getElementById('surveyModal').style.display = 'flex';
     }

     function closeSurveyModal() {
         document.getElementById('surveyModal').style.display = 'none';
     }

     function addQuestion() {
         const questionsList = document.getElementById('questionsList');
         const questionCount = questionsList.children.length + 1;
         
         const questionHTML = `
             <div class="form-group" style="background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px;">
                 <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                     <h5 style="color: #2196F3;">Question ${questionCount}</h5>
                     <button class="btn-danger" onclick="removeQuestion(this)" style="padding: 5px 10px; font-size: 12px;">Remove</button>
                 </div>
                 <div class="form-group">
                     <input type="text" placeholder="Enter your question..." class="form-input question-text">
                 </div>
                 <div class="form-group">
                     <select class="form-select question-type" onchange="updateQuestionOptions(this)">
                         <option value="single">Single Choice</option>
                         <option value="multiple">Multiple Choice</option>
                         <option value="text">Text Answer</option>
                         <option value="rating">Rating Scale</option>
                     </select>
                 </div>
                 <div class="question-options">
                     <input type="text" placeholder="Option 1" class="form-input" style="margin-bottom: 5px;">
                     <input type="text" placeholder="Option 2" class="form-input" style="margin-bottom: 5px;">
                     <button class="btn-secondary" onclick="addOption(this)" style="padding: 5px 10px; font-size: 12px;">+ Add Option</button>
                 </div>
             </div>
         `;
         
         questionsList.insertAdjacentHTML('beforeend', questionHTML);
     }

     function removeQuestion(button) {
         button.closest('.form-group').remove();
         updateQuestionNumbers();
     }

     function updateQuestionNumbers() {
         const questions = document.querySelectorAll('#questionsList .form-group h5');
         questions.forEach((h5, index) => {
             h5.textContent = `Question ${index + 1}`;
         });
     }

     function addOption(button) {
         const optionsContainer = button.parentElement;
         const optionCount = optionsContainer.querySelectorAll('input').length + 1;
         
         const optionHTML = `<input type="text" placeholder="Option ${optionCount}" class="form-input" style="margin-bottom: 5px;">`;
         button.insertAdjacentHTML('beforebegin', optionHTML);
     }

     function updateQuestionOptions(select) {
         const optionsContainer = select.parentElement.nextElementSibling;
         const type = select.value;
         
         if (type === 'text') {
             optionsContainer.innerHTML = '<p style="color: #888; font-size: 12px;">Text answers don\'t require options.</p>';
         } else if (type === 'rating') {
             optionsContainer.innerHTML = `
                 <div style="display: flex; gap: 10px; align-items: center;">
                     <span style="color: #CCC; font-size: 12px;">Scale:</span>
                     <select class="form-select" style="width: 100px;">
                         <option value="5">1-5</option>
                         <option value="10">1-10</option>
                     </select>
                 </div>
             `;
         } else if (optionsContainer.innerHTML.includes('Text answers')) {
             optionsContainer.innerHTML = `
                 <input type="text" placeholder="Option 1" class="form-input" style="margin-bottom: 5px;">
                 <input type="text" placeholder="Option 2" class="form-input" style="margin-bottom: 5px;">
                 <button class="btn-secondary" onclick="addOption(this)" style="padding: 5px 10px; font-size: 12px;">+ Add Option</button>
             `;
         }
     }

     function saveSurvey() {
         const title = document.getElementById('surveyTitle').value.trim();
         const description = document.getElementById('surveyDescription').value.trim();
         
         if (!title) {
             showNotification('Please enter survey title', 'error');
             return;
         }
         
         // –°–æ–±–∏—Ä–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã
         const questions = [];
         const questionElements = document.querySelectorAll('#questionsList .form-group');
         
         questionElements.forEach(element => {
             const questionText = element.querySelector('.question-text').value.trim();
             const questionType = element.querySelector('.question-type').value;
             
             if (questionText) {
                 const options = [];
                 const optionInputs = element.querySelectorAll('.question-options input');
                 optionInputs.forEach(input => {
                     if (input.value.trim()) {
                         options.push(input.value.trim());
                     }
                 });
                 
                 questions.push({
                     text: questionText,
                     type: questionType,
                     options: options
                 });
             }
         });
         
         if (questions.length === 0) {
             showNotification('Please add at least one question', 'error');
             return;
         }
         
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–ø—Ä–æ—Å
         const survey = {
             id: 'survey_' + Date.now(),
             title: title,
             description: description,
             questions: questions,
             status: 'draft',
             createdAt: Date.now(),
             responses: 0
         };
         
         const savedSurveys = localStorage.getItem(`surveys_${currentUser.userId}`);
         const surveys = savedSurveys ? JSON.parse(savedSurveys) : [];
         surveys.unshift(survey);
         
         localStorage.setItem(`surveys_${currentUser.userId}`, JSON.stringify(surveys));
         
         showNotification('Survey saved successfully!', 'success');
         closeSurveyModal();
         loadSurveyData();
     }

     function publishSurvey() {
         saveSurvey();
         showNotification('Survey published successfully!', 'success');
     }

     function editSurvey(surveyId) {
         showNotification('Survey editing feature coming soon!', 'info');
     }

     function previewSurvey(surveyId) {
         showNotification('Survey preview feature coming soon!', 'info');
     }

     function deleteSurvey(surveyId) {
         if (confirm('Are you sure you want to delete this survey?')) {
             const savedSurveys = localStorage.getItem(`surveys_${currentUser.userId}`);
             let surveys = savedSurveys ? JSON.parse(savedSurveys) : [];
             
             surveys = surveys.filter(s => s.id !== surveyId);
             localStorage.setItem(`surveys_${currentUser.userId}`, JSON.stringify(surveys));
             
             showNotification('Survey deleted successfully!', 'success');
             loadSurveyData();
         }
     }

     function filterSurveys() {
         const searchTerm = document.getElementById('surveySearch')?.value.toLowerCase() || '';
         const statusFilter = document.getElementById('surveyStatusFilter')?.value || 'all';
         
         showNotification('Survey filtering feature coming soon!', 'info');
     }

     function viewSurveyTemplates() {
         showNotification('Survey templates feature coming soon!', 'info');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ë–õ–û–ì–ê
     let currentPost = {
         id: null,
         title: '',
         content: '',
         tags: [],
         status: 'draft'
     };

     let blogSettings = {
         title: 'My Blog',
         description: 'Welcome to my blog',
         logo: 'üìù',
         subdomain: 'my-blog',
         theme: 'classic',
         primaryColor: '#FFD700',
         secondaryColor: '#FFA500'
     };

     function loadBlogData() {
         if (currentUser.level < 3) {
             showBlogAccessDenied();
             return;
         }
         
         const savedBlog = localStorage.getItem(`blog_${currentUser.userId}`);
         if (savedBlog) {
             blogSettings = { ...blogSettings, ...JSON.parse(savedBlog) };
         }
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
         const elements = {
             blogTitleDisplay: document.getElementById('blogTitleDisplay'),
             blogDescription: document.getElementById('blogDescription'),
             blogUrl: document.getElementById('blogUrl'),
             blogLogo: document.getElementById('blogLogo')
         };
         
         if (elements.blogTitleDisplay) elements.blogTitleDisplay.textContent = blogSettings.title;
         if (elements.blogDescription) elements.blogDescription.textContent = blogSettings.description;
         if (elements.blogUrl) elements.blogUrl.textContent = `https://${blogSettings.subdomain}.cardgift.bnb`;
         if (elements.blogLogo) elements.blogLogo.textContent = blogSettings.logo;
     }

     function showBlogAccessDenied() {
         const postsList = document.getElementById('postsList');
         if (postsList) {
             postsList.innerHTML = `
                 <div style="text-align: center; color: #CCC; padding: 60px;">
                     <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                     <h3 style="color: #FFD700; margin-bottom: 15px;">Blog Access Restricted</h3>
                     <p>Mini-blog feature is available starting from Admin level.</p>
                     <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">üöÄ Upgrade Now</button>
                 </div>
             `;
         }
     }

     function loadBlogPosts() {
         const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
         const posts = savedPosts ? JSON.parse(savedPosts) : [];
         
         // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
         const elements = {
             totalPosts: document.getElementById('totalPosts'),
             totalBlogViews: document.getElementById('totalBlogViews'),
             totalLikes: document.getElementById('totalLikes'),
             totalComments: document.getElementById('totalComments')
         };
         
         if (elements.totalPosts) elements.totalPosts.textContent = posts.length;
         if (elements.totalBlogViews) elements.totalBlogViews.textContent = posts.reduce((sum, post) => sum + (post.views || 0), 0);
         if (elements.totalLikes) elements.totalLikes.textContent = posts.reduce((sum, post) => sum + (post.likes || 0), 0);
         if (elements.totalComments) elements.totalComments.textContent = posts.reduce((sum, post) => sum + (post.comments || 0), 0);
         
         displayBlogPosts(posts);
     }

     function displayBlogPosts(posts) {
         const postsList = document.getElementById('postsList');
         const emptyBlog = document.getElementById('emptyBlog');
         
         if (!postsList) return;
         
         if (posts.length === 0) {
             postsList.style.display = 'none';
             if (emptyBlog) emptyBlog.style.display = 'block';
             return;
         }
         
         postsList.style.display = 'block';
         if (emptyBlog) emptyBlog.style.display = 'none';
         
         let postsHTML = '';
         
         posts.forEach(post => {
             const statusColor = post.status === 'published' ? '#4CAF50' : '#FF9800';
             const statusText = post.status === 'published' ? 'Published' : 'Draft';
             
             postsHTML += `
                 <div class="post-item">
                     <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                         <div style="flex: 1;">
                             <h4 style="color: #FFD700; margin-bottom: 8px; cursor: pointer;" onclick="editPost('${post.id}')">${post.title}</h4>
                             <p style="color: #CCC; margin-bottom: 10px; line-height: 1.4;">${post.content.substring(0, 150)}${post.content.length > 150 ? '...' : ''}</p>
                             <div style="display: flex; gap: 15px; align-items: center; font-size: 12px; color: #888;">
                                 <span>üìÖ ${new Date(post.createdAt).toLocaleDateString()}</span>
                                 <span>üëÅ ${post.views || 0} views</span>
                                 <span>‚ù§Ô∏è ${post.likes || 0} likes</span>
                                 <span style="background: ${statusColor}; color: white; padding: 2px 8px; border-radius: 10px;">${statusText}</span>
                             </div>
                         </div>
                         <div style="display: flex; gap: 8px; margin-left: 15px;">
                             <button class="btn-secondary" onclick="editPost('${post.id}')" style="padding: 6px 10px; font-size: 12px;">‚úèÔ∏è Edit</button>
                             <button class="btn-secondary" onclick="duplicatePost('${post.id}')" style="padding: 6px 10px; font-size: 12px;">üìã Copy</button>
                             <button class="btn-danger" onclick="deletePost('${post.id}')" style="padding: 6px 10px; font-size: 12px;">üóëÔ∏è Delete</button>
                         </div>
                     </div>
                     
                     ${post.tags && post.tags.length > 0 ? `
                         <div style="margin-top: 10px;">
                             ${post.tags.map(tag => `<span style="background: rgba(255,215,0,0.2); color: #FFD700; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-right: 5px;">#${tag}</span>`).join('')}
                         </div>
                     ` : ''}
                 </div>
             `;
         });
         
         postsList.innerHTML = postsHTML;
     }

     function createNewPost() {
         if (currentUser.level < 3) {
             showNotification('Blog access requires Admin level or higher', 'error');
             return;
         }
         
         currentPost = {
             id: null,
             title: '',
             content: '',
             tags: [],
             status: 'draft'
         };
         
         // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
         document.getElementById('postTitle').value = '';
         document.getElementById('postContent').value = '';
         document.getElementById('postTags').value = '';
         document.getElementById('postStatus').value = 'draft';
         document.getElementById('postPreview').innerHTML = '<p style="color: #888;">Preview will appear here...</p>';
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä
         document.getElementById('postEditor').style.display = 'flex';
         document.getElementById('postTitle').focus();
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é –ø—Ä–∏ –≤–≤–æ–¥–µ
         const contentTextarea = document.getElementById('postContent');
         contentTextarea.addEventListener('input', updatePostPreview);
     }

     function editPost(postId) {
         const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
         const posts = savedPosts ? JSON.parse(savedPosts) : [];
         const post = posts.find(p => p.id === postId);
         
         if (post) {
             currentPost = { ...post };
             
             // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
             document.getElementById('postTitle').value = post.title;
             document.getElementById('postContent').value = post.content;
             document.getElementById('postTags').value = post.tags ? post.tags.join(', ') : '';
             document.getElementById('postStatus').value = post.status;
             
             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä
             document.getElementById('postEditor').style.display = 'flex';
             updatePostPreview();
         }
     }

     function updatePostPreview() {
         const content = document.getElementById('postContent').value;
         const preview = document.getElementById('postPreview');
         
         if (content.trim() === '') {
             preview.innerHTML = '<p style="color: #888;">Preview will appear here...</p>';
             return;
         }
         
         // –ü—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ markdown-–ø–æ–¥–æ–±–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
         let formattedContent = content
             .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
             .replace(/\*(.*?)\*/g, '<em>$1</em>')
             .replace(/\n\n/g, '</p><p>')
             .replace(/\n/g, '<br>');
         
         preview.innerHTML = `<p>${formattedContent}</p>`;
     }

     function savePost() {
         const title = document.getElementById('postTitle').value.trim();
         const content = document.getElementById('postContent').value.trim();
         const tagsInput = document.getElementById('postTags').value.trim();
         const status = document.getElementById('postStatus').value;
         
         if (!title || !content) {
             showNotification('Please fill in title and content', 'error');
             return;
         }
         
         const tags = tagsInput ? tagsInput.split(',').map(tag => tag.trim()) : [];
         
         const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
         let posts = savedPosts ? JSON.parse(savedPosts) : [];
         
         if (currentPost.id) {
             // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ—Å—Ç–∞
             const postIndex = posts.findIndex(p => p.id === currentPost.id);
             if (postIndex !== -1) {
                 posts[postIndex] = {
                     ...posts[postIndex],
                     title,
                     content,
                     tags,
                     status,
                     updatedAt: Date.now()
                 };
             }
         } else {
             // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ—Å—Ç–∞
             const newPost = {
                 id: `post_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                 title,
                 content,
                 tags,
                 status,
                 createdAt: Date.now(),
                 updatedAt: Date.now(),
                 views: 0,
                 likes: 0,
                 comments: 0
             };
             posts.unshift(newPost);
         }
         
         localStorage.setItem(`blog_posts_${currentUser.userId}`, JSON.stringify(posts));
         
         showNotification('Post saved successfully!', 'success');
         loadBlogPosts();
     }

     function publishPost() {
         document.getElementById('postStatus').value = 'published';
         savePost();
         showNotification('Post published successfully!', 'success');
     }

     function closeEditor() {
         document.getElementById('postEditor').style.display = 'none';
     }

     function duplicatePost(postId) {
         const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
         const posts = savedPosts ? JSON.parse(savedPosts) : [];
         const post = posts.find(p => p.id === postId);
         
         if (post) {
             const duplicatedPost = {
                 ...post,
                 id: `post_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                 title: `${post.title} (Copy)`,
                 status: 'draft',
                 createdAt: Date.now(),
                 updatedAt: Date.now(),
                 views: 0,
                 likes: 0,
                 comments: 0
             };
             
             posts.unshift(duplicatedPost);
             localStorage.setItem(`blog_posts_${currentUser.userId}`, JSON.stringify(posts));
             
             showNotification('Post duplicated successfully!', 'success');
             loadBlogPosts();
         }
     }

     function deletePost(postId) {
         if (confirm('Are you sure you want to delete this post?')) {
             const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
             let posts = savedPosts ? JSON.parse(savedPosts) : [];
             
             posts = posts.filter(p => p.id !== postId);
             localStorage.setItem(`blog_posts_${currentUser.userId}`, JSON.stringify(posts));
             
             showNotification('Post deleted successfully!', 'success');
             loadBlogPosts();
         }
     }

     function formatText(format) {
         const textarea = document.getElementById('postContent');
         const start = textarea.selectionStart;
         const end = textarea.selectionEnd;
         const selectedText = textarea.value.substring(start, end);
         
         if (selectedText) {
             let formattedText = '';
             switch (format) {
                 case 'bold':
                     formattedText = `**${selectedText}**`;
                     break;
                 case 'italic':
                     formattedText = `*${selectedText}*`;
                     break;
                 case 'underline':
                     formattedText = `__${selectedText}__`;
                     break;
             }
             
             textarea.setRangeText(formattedText, start, end, 'end');
             updatePostPreview();
         }
     }

     function addImage() {
         const input = document.createElement('input');
         input.type = 'file';
         input.accept = 'image/*';
         
         input.onchange = function(e) {
             const file = e.target.files[0];
             if (file) {
                 const reader = new FileReader();
                 reader.onload = function(e) {
                     const imageMarkdown = `![Image](${e.target.result})`;
                     insertAtCursor('postContent', imageMarkdown);
                     updatePostPreview();
                 };
                 reader.readAsDataURL(file);
             }
         };
         
         input.click();
     }

     function addVideo() {
         const url = prompt('Enter video URL (YouTube, Vimeo, etc.):');
         if (url) {
             const videoMarkdown = `[Video](${url})`;
             insertAtCursor('postContent', videoMarkdown);
             updatePostPreview();
         }
     }

     function addLink() {
         const selectedText = getSelectedText('postContent');
         const url = prompt('Enter URL:');
         if (url) {
             const linkText = selectedText || prompt('Enter link text:') || 'Link';
             const linkMarkdown = `[${linkText}](${url})`;
             insertAtCursor('postContent', linkMarkdown);
             updatePostPreview();
         }
     }

     function insertAtCursor(elementId, text) {
         const element = document.getElementById(elementId);
         const start = element.selectionStart;
         const end = element.selectionEnd;
         element.setRangeText(text, start, end, 'end');
     }

     function getSelectedText(elementId) {
         const element = document.getElementById(elementId);
         return element.value.substring(element.selectionStart, element.selectionEnd);
     }

     function editBlogSettings() {
         if (currentUser.level < 3) {
             showNotification('Blog settings require Admin level or higher', 'error');
             return;
         }
         
         // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
         document.getElementById('blogTitleInput').value = blogSettings.title;
         document.getElementById('blogDescriptionInput').value = blogSettings.description;
         document.getElementById('subdomainInput').value = blogSettings.subdomain;
         document.getElementById('primaryColorPicker').value = blogSettings.primaryColor;
         document.getElementById('secondaryColorPicker').value = blogSettings.secondaryColor;
         
         // –í–∫–ª—é—á–∞–µ–º –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω –¥–ª—è Super Admin+
         if (currentUser.level >= 4) {
             const customDomainSection = document.getElementById('customDomainSection');
             customDomainSection.style.opacity = '1';
             const customDomainInput = document.getElementById('customDomainInput');
             customDomainInput.disabled = false;
             customDomainInput.style.background = 'rgba(255,255,255,0.1)';
             customDomainInput.style.borderColor = 'rgba(255,215,0,0.3)';
             customDomainInput.style.color = '#FFF';
         }
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
         document.getElementById('blogSettings').style.display = 'flex';
     }

     function switchSettingsTab(tabName) {
         // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
         document.querySelectorAll('.crm-tab').forEach(tab => {
             tab.classList.remove('active');
         });
         
         // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
         document.querySelectorAll('.crm-content').forEach(content => {
             content.classList.remove('active');
             content.style.display = 'none';
         });
         
         // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
         const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
         if (activeTab) {
             activeTab.classList.add('active');
         }
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
         const activeContent = document.getElementById(`${tabName}Settings`);
         if (activeContent) {
             activeContent.classList.add('active');
             activeContent.style.display = 'block';
         }
     }

     function selectTheme(themeName) {
         // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –≤—Å–µ—Ö —Ç–µ–º
         document.querySelectorAll('.theme-option').forEach(option => {
             option.style.borderColor = 'transparent';
         });
         
         // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é —Ç–µ–º—É
         const selectedTheme = document.querySelector(`[data-theme="${themeName}"]`);
         if (selectedTheme) {
             selectedTheme.style.borderColor = '#FFD700';
         }
         
         blogSettings.theme = themeName;
     }

     function saveBlogSettings() {
         const title = document.getElementById('blogTitleInput').value.trim();
         const description = document.getElementById('blogDescriptionInput').value.trim();
         const subdomain = document.getElementById('subdomainInput').value.trim();
         const primaryColor = document.getElementById('primaryColorPicker').value;
         const secondaryColor = document.getElementById('secondaryColorPicker').value;
         
         if (!title || !subdomain) {
             showNotification('Please fill in blog title and subdomain', 'error');
             return;
         }
         
         // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø–æ–¥–¥–æ–º–µ–Ω–∞
         if (!/^[a-z0-9-]+$/.test(subdomain)) {
             showNotification('Subdomain can only contain lowercase letters, numbers, and hyphens', 'error');
             return;
         }
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
         blogSettings = {
             ...blogSettings,
             title,
             description,
             subdomain,
             primaryColor,
             secondaryColor
         };
         
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
         localStorage.setItem(`blog_${currentUser.userId}`, JSON.stringify(blogSettings));
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
         loadBlogData();
         
         showNotification('Blog settings saved successfully!', 'success');
         closeBlogSettings();
     }

     function closeBlogSettings() {
         document.getElementById('blogSettings').style.display = 'none';
     }

     function previewBlog() {
         if (currentUser.level < 3) {
             showNotification('Blog preview requires Admin level or higher', 'error');
             return;
         }
         
         const previewUrl = `https://${blogSettings.subdomain}.cardgift.bnb`;
         showNotification(`Opening preview: ${previewUrl}`, 'info');
         
         setTimeout(() => {
             showNotification('Blog preview feature coming soon!', 'info');
         }, 1000);
     }

     function publishBlog() {
         if (currentUser.level < 3) {
             showNotification('Blog publishing requires Admin level or higher', 'error');
             return;
         }
         
         const savedPosts = localStorage.getItem(`blog_posts_${currentUser.userId}`);
         const posts = savedPosts ? JSON.parse(savedPosts) : [];
         const publishedPosts = posts.filter(post => post.status === 'published');
         
         if (publishedPosts.length === 0) {
             showNotification('Please publish at least one post before publishing your blog', 'error');
             return;
         }
         
         showNotification('Blog publishing feature coming soon!', 'info');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò MLM
     function loadMLMSection() {
         if (currentUser.level < 4) {
             document.getElementById('mlmContent').style.display = 'none';
             document.getElementById('mlmAccessDenied').style.display = 'block';
             return;
         }
         
         document.getElementById('mlmContent').style.display = 'block';
         document.getElementById('mlmAccessDenied').style.display = 'none';
         
         loadMLMSettings();
         updateMLMStats();
     }

     function loadMLMSettings() {
         const saved = localStorage.getItem(`mlm_settings_${currentUser.userId}`);
         if (saved) {
             mlmSettings = { ...mlmSettings, ...JSON.parse(saved) };
         }
         
         // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è
         for (let i = 1; i <= 9; i++) {
             const input = document.getElementById(`level${i}Percent`);
             if (input) {
                 input.value = mlmSettings.levels[i] || 0;
                 // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∂–∏–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–≤—å—é
                 input.addEventListener('input', updateCommissionPreview);
             }
         }
         
         updateCommissionPreview();
     }

     function saveMLMSettings() {
         // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ–ª–µ–π
         for (let i = 1; i <= 9; i++) {
             const input = document.getElementById(`level${i}Percent`);
             if (input) {
                 mlmSettings.levels[i] = parseFloat(input.value) || 0;
             }
         }
         
         mlmSettings.isActive = true;
         mlmSettings.updatedAt = Date.now();
         
         // –°–æ—Ö—Ä–∞–Ω—è–µ–º
         localStorage.setItem(`mlm_settings_${currentUser.userId}`, JSON.stringify(mlmSettings));
         
         showNotification('MLM settings saved successfully!', 'success');
         updateCommissionPreview();
     }

     function resetMLMSettings() {
         if (confirm('Reset all MLM settings to default values?')) {
             mlmSettings.levels = {
                 1: 10, 2: 7, 3: 5, 4: 3, 5: 2, 6: 1, 7: 1, 8: 0.5, 9: 0.5
             };
             
             for (let i = 1; i <= 9; i++) {
                 const input = document.getElementById(`level${i}Percent`);
                 if (input) {
                     input.value = mlmSettings.levels[i];
                 }
             }
             
             updateCommissionPreview();
             showNotification('MLM settings reset to default', 'success');
         }
     }

     function updateCommissionPreview() {
         const preview = document.getElementById('commissionPreview');
         if (!preview) return;
         
         const total = Object.values(mlmSettings.levels).reduce((sum, val) => sum + val, 0);
         
         let previewHTML = `
             <div style="margin-bottom: 10px;"><strong>Total Commission: ${total}%</strong></div>
             <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 12px;">
         `;
         
         for (let i = 1; i <= 9; i++) {
             const percent = mlmSettings.levels[i] || 0;
             previewHTML += `<div>L${i}: ${percent}%</div>`;
         }
         
         previewHTML += '</div>';
         
         if (total > 50) {
             previewHTML += '<div style="color: #FF4444; margin-top: 10px; font-size: 12px;">‚ö†Ô∏è Total commission exceeds 50%</div>';
         }
         
         preview.innerHTML = previewHTML;
     }

     function updateMLMStats() {
         // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
         const elements = {
             totalPartners: document.getElementById('totalPartners'),
             totalCommissions: document.getElementById('totalCommissions'),
             monthlyEarnings: document.getElementById('monthlyEarnings'),
             mlmConversionRate: document.getElementById('mlmConversionRate')
         };
         
         if (elements.totalPartners) elements.totalPartners.textContent = '0';
         if (elements.totalCommissions) elements.totalCommissions.textContent = '0.000';
         if (elements.monthlyEarnings) elements.monthlyEarnings.textContent = '0.000';
         if (elements.mlmConversionRate) elements.mlmConversionRate.textContent = '0%';
     }

     function createCampaign() {
         showNotification('Campaign creation feature coming soon!', 'info');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò CRM
     let currentCRMContact = null;

     function loadCRMData() {
         if (currentUser.level < 2) {
             showCRMAccessDenied();
             return;
         }
         
         const savedContacts = localStorage.getItem(`contacts_${currentUser.userId}`);
         const contacts = savedContacts ? JSON.parse(savedContacts) : [];
         
         updateCRMStats(contacts);
         displayCRMContacts(contacts);
     }

     function showCRMAccessDenied() {
         const crmContactsList = document.getElementById('crmContactsList');
         if (crmContactsList) {
             crmContactsList.innerHTML = `
                 <div style="text-align: center; color: #CCC; padding: 60px;">
                     <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                     <h3 style="color: #FFD700; margin-bottom: 15px;">CRM Access Restricted</h3>
                     <p>CRM system is available starting from Mini Admin level.</p>
                     <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">‚ö° Upgrade to Mini Admin</button>
                 </div>
             `;
         }
     }

     function updateCRMStats(contacts) {
         const activeContacts = contacts.filter(c => c.status !== 'inactive').length;
         const emailsSent = parseInt(localStorage.getItem(`emails_sent_${currentUser.userId}`) || '0');
         const crmConversion = contacts.length > 0 ? Math.round((activeContacts / contacts.length) * 100) : 0;
         
         const elements = {
             totalCrmContacts: document.getElementById('totalCrmContacts'),
             activeContacts: document.getElementById('activeContacts'),
             emailsSent: document.getElementById('emailsSent'),
             crmConversion: document.getElementById('crmConversion')
         };
         
         if (elements.totalCrmContacts) elements.totalCrmContacts.textContent = contacts.length;
         if (elements.activeContacts) elements.activeContacts.textContent = activeContacts;
         if (elements.emailsSent) elements.emailsSent.textContent = emailsSent;
         if (elements.crmConversion) elements.crmConversion.textContent = crmConversion + '%';
     }

     function displayCRMContacts(contacts) {
         const crmContactsList = document.getElementById('crmContactsList');
         if (!crmContactsList) return;
         
         if (contacts.length === 0) {
             crmContactsList.innerHTML = '<p style="color: #CCC; text-align: center; padding: 40px;">No CRM contacts yet. Import or add contacts to get started!</p>';
             return;
         }
         
         let contactsHTML = '<div style="display: grid; gap: 10px;">';
         
         contacts.forEach(contact => {
             const statusColor = contact.status === 'active' ? '#4CAF50' : 
                               contact.status === 'new' ? '#FF9800' : '#888';
             
             contactsHTML += `
                 <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,215,0,0.2); border-radius: 10px; padding: 15px; cursor: pointer;" onclick="openCRMModal('${contact.id}')">
                     <div style="display: flex; justify-content: space-between; align-items: center;">
                         <div>
                             <div style="color: #FFD700; font-weight: bold; margin-bottom: 5px;">${contact.name}</div>
                             <div style="color: #CCC; font-size: 12px;">${contact.platform} ‚Ä¢ ${contact.contact}</div>
                         </div>
                         <div style="text-align: right;">
                             <div style="background: ${statusColor}; color: white; padding: 2px 8px; border-radius: 10px; font-size: 10px; margin-bottom: 5px;">${contact.status || 'new'}</div>
                             <div style="color: #888; font-size: 10px;">${new Date(contact.createdAt).toLocaleDateString()}</div>
                         </div>
                     </div>
                 </div>
             `;
         });
         
         contactsHTML += '</div>';
         crmContactsList.innerHTML = contactsHTML;
     }

     function importContacts() {
         if (currentUser.level < 2) {
             showNotification('Contact import requires Mini Admin level or higher', 'error');
             return;
         }
         
         showImportExport();
     }

     function openCRMModal(contactId) {
         if (currentUser.level < 2) {
             showNotification('CRM access requires Mini Admin level or higher', 'error');
             return;
         }
         
         const savedContacts = localStorage.getItem(`contacts_${currentUser.userId}`);
         const contacts = savedContacts ? JSON.parse(savedContacts) : [];
         const contact = contacts.find(c => c.id === contactId);
         
         if (!contact) {
             showNotification('Contact not found', 'error');
             return;
         }
         
         currentCRMContact = contact;
         
         // –ó–∞–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω—Ç–∞–∫—Ç–µ
         document.getElementById('contactName').textContent = contact.name;
         document.getElementById('contactPlatform').textContent = contact.platform;
         document.getElementById('contactDetails').textContent = contact.contact;
         document.getElementById('contactSource').textContent = contact.source;
         document.getElementById('contactStatus').textContent = contact.status || 'new';
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–º–µ—Ç–∫–∏
         const savedNotes = localStorage.getItem(`notes_${contactId}`);
         document.getElementById('contactNotes').value = savedNotes || '';
         
         // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É
         switchCRMTab('info');
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
         document.getElementById('crmModal').classList.add('show');
     }

     function closeCRMModal() {
         document.getElementById('crmModal').classList.remove('show');
         currentCRMContact = null;
     }

     function switchCRMTab(tabName) {
         // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
         document.querySelectorAll('.crm-tab').forEach(tab => {
             tab.classList.remove('active');
         });
         
         // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–∫–ª–∞–¥–æ–∫
         document.querySelectorAll('.crm-content').forEach(content => {
             content.classList.remove('active');
             content.style.display = 'none';
         });
         
         // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
         const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
         if (activeTab) {
             activeTab.classList.add('active');
         }
         
         // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏
         const activeContent = document.getElementById(`${tabName}Content`);
         if (activeContent) {
             activeContent.classList.add('active');
             activeContent.style.display = 'block';
         }
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–∫–ª–∞–¥–æ–∫
         if (tabName === 'history') {
             loadContactHistory();
         } else if (tabName === 'chat') {
             loadContactChat();
         }
     }

     function saveContactNotes() {
         if (!currentCRMContact) return;
         
         const notes = document.getElementById('contactNotes').value;
         localStorage.setItem(`notes_${currentCRMContact.id}`, notes);
         
         showNotification('Notes saved successfully!', 'success');
     }

     function loadContactHistory() {
         const historyContainer = document.getElementById('contactHistory');
         if (!currentCRMContact) {
             historyContainer.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No contact selected.</p>';
             return;
         }
         
         const savedHistory = localStorage.getItem(`history_${currentCRMContact.id}`);
         const history = savedHistory ? JSON.parse(savedHistory) : [];
         
         if (history.length === 0) {
             historyContainer.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No interaction history yet.</p>';
             return;
         }
         
         let historyHTML = '';
         history.forEach(item => {
             historyHTML += `
                 <div style="background: rgba(255,215,0,0.1); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                     <div style="color: #FFD700; font-size: 12px; margin-bottom: 5px;">${new Date(item.timestamp).toLocaleString()}</div>
                     <div style="color: #FFF;">${item.action}</div>
                 </div>
             `;
         });
         
         historyContainer.innerHTML = historyHTML;
     }

     function loadContactChat() {
         const chatMessages = document.getElementById('chatMessages');
         if (!currentCRMContact) {
             chatMessages.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No contact selected.</p>';
             return;
         }
         
         const savedChat = localStorage.getItem(`chat_${currentCRMContact.id}`);
         const messages = savedChat ? JSON.parse(savedChat) : [];
         
         if (messages.length === 0) {
             chatMessages.innerHTML = '<p style="color: #888; text-align: center; padding: 20px;">No messages yet. Start a conversation!</p>';
             return;
         }
         
         let chatHTML = '';
         messages.forEach(message => {
             chatHTML += `
                 <div class="chat-message">
                     <div class="chat-message-time">${new Date(message.timestamp).toLocaleString()}</div>
                     <div class="chat-message-text">${message.text}</div>
                 </div>
             `;
         });
         
         chatMessages.innerHTML = chatHTML;
         chatMessages.scrollTop = chatMessages.scrollHeight;
     }

     function sendChatMessage() {
         if (!currentCRMContact) return;
         
         const chatInput = document.getElementById('chatInput');
         const messageText = chatInput.value.trim();
         
         if (!messageText) return;
         
         const message = {
             text: messageText,
             timestamp: Date.now(),
             sender: 'admin'
         };
         
         const savedChat = localStorage.getItem(`chat_${currentCRMContact.id}`);
         const messages = savedChat ? JSON.parse(savedChat) : [];
         messages.push(message);
         
         localStorage.setItem(`chat_${currentCRMContact.id}`, JSON.stringify(messages));
         
         chatInput.value = '';
         loadContactChat();
         
         showNotification('Message sent!', 'success');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –†–ï–§–ï–†–ê–õ–û–í
     function loadReferralData() {
         if (currentUser.level < 2) {
             showReferralAccessDenied();
             return;
         }
         
         // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
         const savedReferrals = localStorage.getItem(`referrals_${currentUser.userId}`);
         const referrals = savedReferrals ? JSON.parse(savedReferrals) : 
             { levels: { 1: [], 2: [], 3: [], 4: [], 5: [], 6: [], 7: [], 8: [], 9: [] }, users: {} };
         
         displayReferralLevels(referrals);
     }

     function showReferralAccessDenied() {
         document.querySelectorAll('#levelContents .level-content').forEach(content => {
             content.innerHTML = `
                 <div style="text-align: center; color: #CCC; padding: 60px;">
                     <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                     <h3 style="color: #FFD700; margin-bottom: 15px;">Referral Access Restricted</h3>
                     <p>Referral system is available starting from Mini Admin level.</p>
                     <button class="btn-primary" onclick="showSection('wallet')" style="margin-top: 20px;">‚ö° Upgrade to Mini Admin</button>
                 </div>
             `;
         });
     }

     function displayReferralLevels(referrals) {
         for (let level = 1; level <= 9; level++) {
             const levelUsers = referrals.levels[level] || [];
             const countElement = document.getElementById(`level${level}Count`);
             const tableElement = document.getElementById(`level${level}Table`);
             
             if (countElement) {
                 countElement.textContent = `${levelUsers.length} users`;
             }
             
             if (tableElement) {
                 if (levelUsers.length === 0) {
                     tableElement.innerHTML = `<tr><td colspan="6" style="text-align: center; color: #888; padding: 40px;">No level ${level} referrals yet</td></tr>`;
                 } else {
                     let tableHTML = '';
                     levelUsers.forEach(user => {
                         tableHTML += `
                             <tr>
                                 <td class="user-id-cell" onclick="openCRMModal('${user.id}')">${user.userId}</td>
                                 <td>${user.sponsor || '-'}</td>
                                 <td>
                                     <span class="wallet-status ${user.walletConnected ? 'wallet-active' : 'wallet-inactive'}">
                                         ${user.walletConnected ? 'Connected' : 'Not Connected'}
                                     </span>
                                 </td>
                                 <td>
                                     <span class="status-badge status-${user.level > 3 ? 'super' : user.level > 1 ? 'mini' : 'basic'}">
                                         Level ${user.level}
                                     </span>
                                 </td>
                                 <td>${new Date(user.joinedAt).toLocaleDateString()}</td>
                                 <td>
                                     <button class="btn-secondary" onclick="contactUser('${user.id}')" style="padding: 5px 10px; font-size: 12px;">üìß</button>
                                 </td>
                             </tr>
                         `;
                     });
                     tableElement.innerHTML = tableHTML;
                 }
             }
         }
     }

     function showLevel(level) {
         // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ —É—Ä–æ–≤–Ω–µ–π
         document.querySelectorAll('.level-btn').forEach(btn => {
             btn.classList.remove('active');
         });
         
         // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–≤–Ω–µ–π
         document.querySelectorAll('.level-content').forEach(content => {
             content.classList.remove('active');
         });
         
         // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
         const activeBtn = document.querySelector(`[data-level="${level}"]`);
         if (activeBtn) {
             activeBtn.classList.add('active');
         }
         
         const activeContent = document.getElementById(`level${level}Content`);
         if (activeContent) {
             activeContent.classList.add('active');
         }
     }

     function copyReferralLink() {
         if (currentUser.userId === 'NOT_CONNECTED') {
             showNotification('Please connect your wallet first', 'error');
             return;
         }
         
         const referralLink = `https://cardgift.bnb/registration.html?ref=${currentUser.userId}`;
         
         navigator.clipboard.writeText(referralLink).then(() => {
             showNotification('Referral link copied to clipboard!', 'success');
         }).catch(() => {
             // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
             const textArea = document.createElement('textarea');
             textArea.value = referralLink;
             document.body.appendChild(textArea);
             textArea.select();
             document.execCommand('copy');
             document.body.removeChild(textArea);
             showNotification('Referral link copied!', 'success');
         });
     }

     function shareReferralLink() {
         if (currentUser.userId === 'NOT_CONNECTED') {
             showNotification('Please connect your wallet first', 'error');
             return;
         }
         
         const referralLink = `https://cardgift.bnb/registration.html?ref=${currentUser.userId}`;
         
         if (navigator.share) {
             navigator.share({
                 title: 'Join CardGift - Create Amazing Greeting Cards!',
                 text: 'Create beautiful greeting cards and earn with CardGift platform!',
                 url: referralLink
             });
         } else {
             copyReferralLink();
         }
     }

     function contactUser(userId) {
         showNotification('User contact feature coming soon!', 'info');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò GLOBALWAY
     function showGlobalWayInfo() {
         const modal = document.createElement('div');
         modal.style.cssText = `
             position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
             background: rgba(0,0,0,0.9); z-index: 5000; display: flex; 
             align-items: center; justify-content: center; padding: 20px;
         `;
         
         modal.innerHTML = `
             <div style="background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(26,26,26,0.95)); 
                         border: 2px solid #FFD700; border-radius: 20px; padding: 40px; 
                         max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto;
                         box-shadow: 0 20px 40px rgba(255,215,0,0.3);">
                 
                 <div style="text-align: center; margin-bottom: 30px;">
                     <h2 style="color: #FFD700; font-size: 28px; margin-bottom: 10px;">üåç GlobalWay Integration</h2>
                     <p style="color: #CCC;">Expand CardGift possibilities through GlobalWay ecosystem</p>
                 </div>
                 
                 <div style="margin-bottom: 30px;">
                     <h3 style="color: #FFD700; margin-bottom: 15px;">üöÄ Additional Features:</h3>
                     <div style="color: #CCC; line-height: 1.8;">
                         <div style="margin-bottom: 10px;">üéØ <strong>Advanced Marketing Tools</strong> - Professional campaign management</div>
                         <div style="margin-bottom: 10px;">üí∞ <strong>Extended Partner Program</strong> - Multi-tier commission structure</div>
                         <div style="margin-bottom: 10px;">üåê <strong>Global Ecosystem Access</strong> - Connect with worldwide network</div>
                         <div style="margin-bottom: 10px;">üéÅ <strong>Exclusive Bonuses</strong> - Special rewards and tokens</div>
                         <div style="margin-bottom: 10px;">üîÑ <strong>Token Exchange</strong> - CGT ‚Üî GWT seamless conversion</div>
                         <div style="margin-bottom: 10px;">üìä <strong>Enhanced Analytics</strong> - Deep insights and reporting</div>
                     </div>
                 </div>
                 
                 <div style="background: rgba(255,215,0,0.1); border: 1px solid rgba(255,215,0,0.3); 
                             border-radius: 12px; padding: 20px; margin-bottom: 25px;">
                     <h4 style="color: #FFD700; margin-bottom: 15px;">üìã Integration Status:</h4>
                     <div style="color: #CCC;">
                         <div style="margin-bottom: 8px;"><strong>Status:</strong> <span style="color: #FFA500;">Coming Soon</span></div>
                         <div style="margin-bottom: 8px;"><strong>Your CardGift ID:</strong> <span style="color: #4CAF50;">${currentUser.userId}</span></div>
                         <div style="margin-bottom: 8px;"><strong>Level:</strong> <span style="color: #FFD700;">${getUserLevelName(currentUser.level)}</span></div>
                         <div><strong>Ready for Integration:</strong> <span style="color: #4CAF50;">‚úÖ Yes</span></div>
                     </div>
                 </div>
                 
                 <div style="background: rgba(33,150,243,0.1); border: 1px solid rgba(33,150,243,0.3); 
                             border-radius: 12px; padding: 20px; margin-bottom: 25px;">
                     <h4 style="color: #2196F3; margin-bottom: 15px;">üí° How Integration Works:</h4>
                     <div style="color: #CCC; font-size: 14px; line-height: 1.6;">
                         <div>1. <strong>Keep Your Data:</strong> All your cards, contacts, and settings remain in CardGift</div>
                         <div>2. <strong>Enhanced Features:</strong> GlobalWay adds powerful marketing and analytics tools</div>
                         <div>3. <strong>Unified Access:</strong> One login for both platforms with shared progress</div>
                         <div>4. <strong>Token Benefits:</strong> Earn and exchange tokens across the ecosystem</div>
                     </div>
                 </div>
                 
                 <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                     <button onclick="registerGlobalWayInterest()" 
                             style="background: linear-gradient(45deg, #4CAF50, #45a049); color: white; 
                                    border: none; border-radius: 12px; padding: 15px 25px; cursor: pointer; 
                                    font-weight: bold; transition: all 0.3s ease;">
                         üìß Notify Me on Launch
                     </button>
                     
                     <button onclick="visitGlobalWay()" 
                             style="background: linear-gradient(45deg, #2196F3, #1976D2); color: white; 
                                    border: none; border-radius: 12px; padding: 15px 25px; cursor: pointer; 
                                    font-weight: bold; transition: all 0.3s ease;">
                         üåê Learn More
                     </button>
                     
                     <button onclick="closeGlobalWayModal()" 
                             style="background: rgba(255,68,68,0.2); color: #FF4444; border: 2px solid #FF4444; 
                                    border-radius: 12px; padding: 15px 25px; cursor: pointer; font-weight: bold;">
                         ‚ùå Close
                     </button>
                 </div>
             </div>
         `;
         
         modal.onclick = function(e) {
             if (e.target === modal) {
                 closeGlobalWayModal();
             }
         };
         
         document.body.appendChild(modal);
         window.globalWayModal = modal;
     }

     function getUserLevelName(level) {
         const names = {
             0: 'Guest', 1: 'User', 2: 'Mini Admin', 
             3: 'Admin', 4: 'Super Admin', 5: 'Manager', 6: 'Author'
         };
         return names[level] || 'Unknown';
     }

     function registerGlobalWayInterest() {
         const notification = {
             userId: currentUser.userId,
             email: prompt('Enter your email for GlobalWay launch notification:'),
             level: currentUser.level,
             registeredAt: Date.now()
         };
         
         if (notification.email && notification.email.trim()) {
             // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
             const notifications = JSON.parse(localStorage.getItem('globalwayNotifications') || '[]');
             notifications.push(notification);
             localStorage.setItem('globalwayNotifications', JSON.stringify(notifications));
             
             showNotification('‚úÖ You will be notified when GlobalWay launches!', 'success');
             closeGlobalWayModal();
         } else {
             showNotification('Please enter a valid email address', 'error');
         }
     }

     function visitGlobalWay() {
         showNotification('GlobalWay website will be available soon!', 'info');
     }

     function closeGlobalWayModal() {
         if (window.globalWayModal) {
             document.body.removeChild(window.globalWayModal);
             window.globalWayModal = null;
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –ù–ê–°–¢–†–û–ï–ö
     function saveAllSettings() {
         const settings = {
             displayName: document.getElementById('displayName')?.value || '',
             userEmail: document.getElementById('userEmail')?.value || '',
             userTelegram: document.getElementById('userTelegram')?.value || '',
             userTimezone: document.getElementById('userTimezone')?.value || 'UTC',
             emailNotifications: document.getElementById('emailNotifications')?.checked || false,
             referralNotifications: document.getElementById('referralNotifications')?.checked || false,
             systemNotifications: document.getElementById('systemNotifications')?.checked || false,
             marketingNotifications: document.getElementById('marketingNotifications')?.checked || false,
             themeSelect: document.getElementById('themeSelect')?.value || 'dark',
             languageSelect: document.getElementById('languageSelect')?.value || 'en',
             reducedMotion: document.getElementById('reducedMotion')?.checked || false,
             autoSave: document.getElementById('autoSave')?.checked || true,
             autoDisconnect: document.getElementById('autoDisconnect')?.checked || true,
             requireConfirmation: document.getElementById('requireConfirmation')?.checked || true
         };
         
         localStorage.setItem(`settings_${currentUser.userId}`, JSON.stringify(settings));
         
         // –ü—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —è–∑—ã–∫–∞
         if (settings.languageSelect !== currentLanguage) {
             switchLanguage(settings.languageSelect);
         }
         
         showNotification('Settings saved successfully!', 'success');
     }

     function exportUserData() {
         if (currentUser.level === 0) {
             showNotification('Data export requires account activation', 'error');
             return;
         }
         
         const userData = {
             user: currentUser,
             contacts: JSON.parse(localStorage.getItem(`contacts_${currentUser.userId}`) || '[]'),
             archive: JSON.parse(localStorage.getItem(`archive_${currentUser.userId}`) || '{}'),
             blog: JSON.parse(localStorage.getItem(`blog_posts_${currentUser.userId}`) || '[]'),
             surveys: JSON.parse(localStorage.getItem(`surveys_${currentUser.userId}`) || '[]'),
             settings: JSON.parse(localStorage.getItem(`settings_${currentUser.userId}`) || '{}'),
             exportedAt: Date.now()
         };
         
         const dataStr = JSON.stringify(userData, null, 2);
         const dataBlob = new Blob([dataStr], {type: 'application/json'});
         
         const link = document.createElement('a');
         link.href = URL.createObjectURL(dataBlob);
         link.download = `cardgift_data_${currentUser.userId}_${Date.now()}.json`;
         document.body.appendChild(link);
         link.click();
         document.body.removeChild(link);
         
         showNotification('User data exported successfully!', 'success');
     }

     function clearAllData() {
         if (confirm('Are you sure you want to clear all your data? This action cannot be undone!')) {
             if (confirm('This will delete all your contacts, cards, posts, and settings. Are you absolutely sure?')) {
                 // –û—á–∏—â–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                 const keysToRemove = [];
                 for (let i = 0; i < localStorage.length; i++) {
                     const key = localStorage.key(i);
                     if (key && key.includes(currentUser.userId)) {
                         keysToRemove.push(key);
                     }
                 }
                 
                 keysToRemove.forEach(key => localStorage.removeItem(key));
                 
                 showNotification('All user data cleared successfully!', 'success');
                 
                 // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                 setTimeout(() => {
                     window.location.reload();
                 }, 2000);
             }
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –†–ê–°–°–´–õ–û–ö –ò –ê–ù–ê–õ–ò–¢–ò–ö–ò
     function createNewCampaign() {
         if (currentUser.level < 3) {
             showNotification('Email campaigns require Admin level or higher', 'error');
             return;
         }
         
         showNotification('Email campaign creation feature coming soon!', 'info');
     }

     function viewCampaignTemplates() {
         showNotification('Campaign templates feature coming soon!', 'info');
     }

     function exportAnalytics() {
         if (currentUser.level < 3) {
             showNotification('Analytics export requires Admin level or higher', 'error');
             return;
         }
         
         showNotification('Analytics export feature coming soon!', 'info');
     }

     function refreshAnalytics() {
         showNotification('Analytics refreshed!', 'success');
     }

     function addCoauthor() {
         const isFounder = FOUNDERS_ADDRESSES.includes(userWalletAddress);
         if (!isFounder) {
             showNotification('Only project founders can add co-authors', 'error');
             return;
         }
         
         showNotification('Co-author management feature coming soon!', 'info');
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –Ø–ó–´–ö–ê
     function switchLanguage(lang) {
         currentLanguage = lang;
         localStorage.setItem('selectedLanguage', lang);
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É —è–∑—ã–∫–∞
         document.querySelectorAll('.lang-btn').forEach(btn => {
             btn.classList.remove('active');
             if (btn.getAttribute('data-lang') === lang) {
                 btn.classList.add('active');
             }
         });
         
         // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
         applyTranslations(lang);
         
         showNotification(`Language changed to ${lang.toUpperCase()}`, 'success');
     }

     function loadSavedLanguage() {
         const savedLang = localStorage.getItem('selectedLanguage') || 'en';
         switchLanguage(savedLang);
     }

     function applyTranslations(lang) {
         const t = translations[lang] || translations.en;
         
         // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã –∫–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å ID –∏–∑ translations
         Object.keys(t).forEach(key => {
             const element = document.getElementById(key);
             if (element) {
                 if (element.tagName === 'INPUT' && element.type !== 'submit' && element.type !== 'button') {
                     element.placeholder = t[key];
                 } else {
                     element.textContent = t[key];
                 }
             }
         });
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
         document.title = t.pageTitle || 'CardGift - Admin Dashboard';
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∞-–æ–ø–∏—Å–∞–Ω–∏–µ
         const metaDesc = document.querySelector('meta[name="description"]');
         if (metaDesc) {
             metaDesc.content = t.metaDescription || 'CardGift Admin Dashboard - Manage your network';
         }
     }

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –í–†–ï–ú–ï–ù–ò –ò –î–ê–ù–ù–´–•
     function updateTime() {
         const now = new Date();
         const timeString = now.toLocaleString();
         const timeElement = document.getElementById('currentTime');
         if (timeElement) {
             timeElement.textContent = timeString;
         }
     }

     function loadDashboardData() {
         // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É dashboard
         const stats = {
             totalReferrals: 0,
             activeReferrals: 0,
             totalEarnings: '0.000',
             conversionRate: '0%'
         };
         
         // –í —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –±–ª–æ–∫—á–µ–π–Ω–∞
         const savedReferrals = localStorage.getItem(`referrals_${currentUser.userId}`);
         if (savedReferrals) {
             const referrals = JSON.parse(savedReferrals);
             stats.totalReferrals = Object.values(referrals.levels).flat().length;
             stats.activeReferrals = Object.values(referrals.levels).flat().filter(u => u.isActive).length;
         }
         
         // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
         const elements = {
             totalReferrals: document.getElementById('totalReferrals'),
             activeReferrals: document.getElementById('activeReferrals'),
             totalEarnings: document.getElementById('totalEarnings'),
             conversionRate: document.getElementById('conversionRate')
         };
         
         Object.keys(elements).forEach(key => {
             if (elements[key]) {
                 elements[key].textContent = stats[key];
             }
         });
     }

     // ‚úÖ –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô
     document.addEventListener('DOMContentLoaded', function() {
         // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
         const mobileToggle = document.getElementById('mobileToggle');
         if (mobileToggle) {
             mobileToggle.addEventListener('click', toggleSidebar);
         }
         
         // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ ESC
         document.addEventListener('keydown', function(e) {
             if (e.key === 'Escape') {
                 // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
                 document.querySelectorAll('.crm-modal').forEach(modal => {
                     if (modal.classList.contains('show') || modal.style.display === 'flex') {
                         modal.classList.remove('show');
                         modal.style.display = 'none';
                     }
                 });
                 
                 // –ó–∞–∫—Ä—ã–≤–∞–µ–º GlobalWay –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                 if (window.globalWayModal) {
                     closeGlobalWayModal();
                 }
             }
         });
         
         // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞
         const searchInputs = document.querySelectorAll('input[type="text"][placeholder*="Search"], input[type="text"][placeholder*="search"]');
         searchInputs.forEach(input => {
             input.addEventListener('keypress', function(e) {
                 if (e.key === 'Enter') {
                     const section = input.closest('.content-section')?.id;
                     if (section === 'contacts') {
                         searchContacts();
                     } else if (section === 'archive') {
                         searchArchive();
                     } else if (section === 'surveys') {
                         filterSurveys();
                     }
                 }
             });
         });
         
         // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è chat input
         const chatInput = document.getElementById('chatInput');
         if (chatInput) {
             chatInput.addEventListener('keypress', function(e) {
                 if (e.key === 'Enter') {
                     sendChatMessage();
                 }
             });
         }
         
         // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è push message textarea
         const pushTextarea = document.getElementById('pushMessageText');
         if (pushTextarea) {
             pushTextarea.addEventListener('input', function() {
                 const charCount = document.getElementById('charCount');
                 if (charCount) {
                     charCount.textContent = this.value.length;
                 }
                 updateSendButton();
             });
         }
         
         // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
         setInterval(updateTime, 1000);
         
         // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
         const settingsInputs = document.querySelectorAll('#settings input, #settings select, #settings textarea');
         settingsInputs.forEach(input => {
             input.addEventListener('change', function() {
                 const autoSave = document.getElementById('autoSave')?.checked;
                 if (autoSave) {
                     setTimeout(saveAllSettings, 1000); // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                 }
             });
         });
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã
         const savedGroups = localStorage.getItem(`custom_groups_${currentUser.userId}`);
         if (savedGroups) {
             contactsData.customGroups = JSON.parse(savedGroups);
             displayCustomGroups();
         }
         
         // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
         const savedAPI = localStorage.getItem(`api_integrations_${currentUser.userId}`);
         if (savedAPI) {
             apiIntegrations = { ...apiIntegrations, ...JSON.parse(savedAPI) };
             
             // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å—ã API
             Object.keys(apiIntegrations).forEach(platform => {
                 if (apiIntegrations[platform].connected) {
                     updateAPIStatus(platform, true);
                 }
             });
         }
         
         console.log('‚úÖ Event handlers initialized');
     });

     // ‚úÖ –§–£–ù–ö–¶–ò–ò –û–¢–õ–ê–î–ö–ò (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
     window.cardGiftDebug = {
         currentUser: () => console.log('Current User:', currentUser),
         contacts: () => console.log('Contacts Data:', contactsData),
         apiIntegrations: () => console.log('API Integrations:', apiIntegrations),
         resetUser: () => {
             currentUser = { userId: 'NOT_CONNECTED', level: 0, isActive: false, walletAddress: null };
             updateUserInterface();
             console.log('User reset');
         },
         setLevel: (level) => {
             currentUser.level = parseInt(level);
             updateUserInterface();
             loadContactsData();
             console.log(`User level set to: ${level}`);
         },
         addTestContacts: () => {
             const testContacts = [
                 { id: 'test1', name: 'John Doe', platform: 'telegram', contact: '@johndoe', pushConsent: true, source: 'test', userLevel: 'guest', createdAt: Date.now(), addedBy: currentUser.userId },
                 { id: 'test2', name: 'Jane Smith', platform: 'whatsapp', contact: '+1234567890', pushConsent: true, source: 'test', userLevel: 'user', createdAt: Date.now(), addedBy: currentUser.userId },
                 { id: 'test3', name: 'Bob Wilson', platform: 'email', contact: 'bob@email.com', pushConsent: false, source: 'test', userLevel: 'admin', createdAt: Date.now(), addedBy: currentUser.userId }
             ];
             localStorage.setItem(`contacts_${currentUser.userId}`, JSON.stringify(testContacts));
             loadContactsData();
             console.log('Test contacts added');
         },
         clearStorage: () => {
             localStorage.clear();
             console.log('Storage cleared');
         },
         exportDebugData: () => {
             const debugData = {
                 currentUser,
                 contactsData,
                 apiIntegrations,
                 localStorage: {...localStorage},
                 timestamp: Date.now()
             };
             console.log('Debug Data:', debugData);
             return debugData;
         }
     };

     console.log('üéâ CardGift Dashboard fully loaded!');
     console.log('üí° Use cardGiftDebug for debugging commands');
     console.log('üì± Contact system fully restored with advanced features');
     console.log('üîó API integrations ready for Telegram, WhatsApp, and Email');
     console.log('üì¢ Push notification system with level-based limits');
     console.log('üì•üì§ Import/Export functionality available');

     // ‚úÖ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ö–û–®–ï–õ–¨–ö–û–í
function checkWallets() {
    console.log('üîç === WALLET DETECTION REPORT ===');
    console.log('window.ethereum:', !!window.ethereum);
    console.log('window.safepal:', !!window.safepal);  
    console.log('window.safePal:', !!window.safePal);
    
    if (window.ethereum) {
        console.log('ethereum.isSafePal:', window.ethereum.isSafePal);
        console.log('ethereum.isMetaMask:', window.ethereum.isMetaMask);
        console.log('ethereum provider info:', window.ethereum);
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
    console.log('Available window objects:');
    Object.keys(window).filter(key => key.toLowerCase().includes('safe') || key.toLowerCase().includes('pal') || key.toLowerCase().includes('meta')).forEach(key => {
        console.log(`  ${key}:`, !!window[key]);
    });
    
    console.log('üîç === END REPORT ===');
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
setTimeout(checkWallets, 3000);
 </script>
</body>
</html>




